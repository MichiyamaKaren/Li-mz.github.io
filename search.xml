<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>2020年度总结——ACG部分</title>
    <url>/2020/12/29/2020-review-ACG/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>本文是2020年度总结的一部分，关于我在2020年看过的ACG作品（主要是动画）进行一些简要的评价和讨论。</p>
<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><h3 id="一月番"><a href="#一月番" class="headerlink" title="一月番"></a>一月番</h3><p><img src="anime-01-railgunT.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>科学超电磁炮T</strong>：JC亲女儿，虽然因为疫情从半年番硬生生拖成了年番，但还算没有太拉胯，该有的大场面也算到位。从个人观感来讲，不知道和之前看了漫画有没有关系，总觉得有点有声漫画的感觉，后半部分天赋梦路篇这种感觉尤为严重，好几个地方分镜似乎就直接复制了漫画的，转场也很生硬。另外这应该算是一部“爷青回”番了，但看的时候总找不到当初看超炮时的燃的感觉，不知道变的是超炮还是我呢。</p>
<p><img src="anime-01-IDINVADED.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>异度侵入</strong>：从我系统性地追新番开始每年都会有（且仅有）一部我特别喜欢的动画，18年是少歌，19年是不吉波普。今年似乎没有这样的动画，但要说今年感觉最好的的话那就是异度侵入。<br>最初吸引我入坑的是“潜意识探案”这样听起来就会让人想要期待其中的抽象、意识流演出的核心设定。这种期待一部分被达成了，比如最让我惊艳的圆环列车那话的演出——鸣瓢“我只是想要救你”的真情流露之后，远景的圆环列车显现，无比有力地具象化了鸣瓢和井波两人被囚禁于过去，仍未迈出一步的心理。这一话的精彩演出给我的印象，超过了后面令大多数人称为神回的第十话，不过这似乎也让我搞错了该在这部动画中寻求什么。<br>以更客观一点的角度评价这部动画，作为推理番，它有头有尾地讲好了一个有悬念有起伏的故事，剧情设计可以说很巧妙；作为科幻番，井的设定很炫酷且能自圆其说，不过后面井来自于超能力的展开在我看来属实很掉b格。细节就不多说了，如果我没有擅自给它多余的期待，这就是一部能让我满足的动画。</p>
<p><img src="anime-01-oshibudo.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>神推偶像登上武道馆我就死而无憾</strong>：罕见的以偶像宅视角展开的偶像番（这样还能叫偶像番吗），我同样作为偶像宅，前面的太多部分能让我大呼真实，我也就顺理成章地追了起来。不过往下看一点后愈发觉得奇怪。说厨力我自然是远不如飘姐，但心态上却也存在着决定性的差异，我很难理解不得不用金钱量化自己对偶像的喜欢，为此还把自己搞得狼狈不堪的行为。消费不是为了买来快乐，而是消费行为本身成为了快乐的基础，这种粉丝-偶像关系我认为是畸形的。神推前期带给我的违和感主要来源于此，不过后面对这个话题并没有进行过多的讨论，而是走了一般恋爱喜剧的套路。我本来对这个题材非常不感冒，但由于是女孩子贴贴，也能让我不太无聊地看完。</p>
<p><img src="anime-01-threebody.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>我的三体</strong>：对于《我的三体》这种从个人、低成本制作开始的作品，能做到现在这个地步本身就已经很值得称赞了。在增加了一些原创内容后，《我的三体》可以说优秀地还原、展现了《三体》的故事，这已经足够让人满足了，而考虑原作是《三体》这样的小说，也足够说是一部优秀的动画了。</p>
<p><img src="anime-01-astroid.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>恋爱小行星</strong>：没啥好说的，轻百萌豚作。冲着里面的天文要素追的，但中间一段全是地学，就弃了一段时间。后来捡起来看完了，天文要素也不是很多（在萌豚动画寻找天文要素是不是搞错了什么），最终观感一般。多说一嘴，天文番果然还得浪漫追星社。</p>
<p><img src="anime-01-kyokousuiri.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>虚构推理</strong>：差点忘了看过它了。也是观感比较一般的作品，普遍被诟病的两点，一是女主动不动就长篇大论讲个没完，二是原作动不动开黄腔的萝莉的形象没塑造好，就我来说对长篇大论有一定忍受度，对黄腔也没啥感觉，因此这两点我觉得没那么糟。不过剧情展开全靠说这点我确实是很不欣赏，再加上长篇大论的确让人不容易找到重点，作为转折点的谎言设计的转折的表现力也就比较不足，其结果就是平淡的观感。</p>
<p><img src="anime-01-violet.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>紫罗兰永恒花园外传 永远与自动手记人偶</strong>：疫情之前看过的最后一场电影，更精确地说是当天看完之后疫情的消息就铺天盖地的传来了。说回电影，京紫外传和动画单集的故事结构是相似的，只不过时间长了一些，可以多将些内容。但其观感实际上还并不如动画比较出彩的几话。或许是电影的时长可以让叙事节奏悠闲一点，但这也太悠闲了，以至于详略并不得当。前半段我们只能看到姐姐向往不被规训的自由，好长时间之后主题的对妹妹的思念才出现，而姐妹之前的故事却并没有得到足够详细的描写，这就导致我知道姐妹情深，但这表现出来却没法打动我，这也就失去了动画最大的优点。因此总结来说，外传剧场版的观感是比较让人失望的。（另外，在写这篇的时候环大陆上映的京紫剧场版还没有引进的消息，希望明年能看到）</p>
<h3 id="七月番"><a href="#七月番" class="headerlink" title="七月番"></a>七月番</h3><p><img src="anime-07-DECA-DENCE.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>没落要塞</strong>：冲着楠木灯追的番 <del>（wdnmd!）</del> 可以说是一部没有很醒目的优点也没有明显的缺点的一部动画。表面末世实则生化人游戏场的一层反转背景设定，性格坚韧不拔一往无前的女主，有着苦大仇深的过去被女主拯救内心的男主，背后操控一切的庞大组织，这些典型的要素的确容易促成一个有笑有泪有燃的好故事。泛式说这部动画很多地方有着对经典套路的违背，并可以看成对套路的吐槽从而有着别样的乐趣，我没太看出来，可能是我看的这类动画不够多。不过抛开这个，《没落要塞》的确做到了所有该做到的，燃的地方有足够感染力，感人的地方能触动人心，整个故事看下来让人满足之余也有些意犹未尽。要说的话，如果目前动画的平均水平是《没落要塞》的水平，那我就很满足了。</p>
<h3 id="十月番"><a href="#十月番" class="headerlink" title="十月番"></a>十月番</h3><p><img src="anime-10-nijigasaki.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>Lovelive 虹咲学园偶像同好会</strong>：打破了我对传统偶像番的上限的预期的作品。本来因为其题材并没有报太大期待，只是冲着声优和音乐随便看看，但是第一话的雪菜的live的演出就以我完全预想不到的方式惊艳到了我。同样在我心中诞生的这份悸动也让我怀着热情看到了最后，而虹动画并没有辜负我的期待。<br>关于结构，这里采取的连续九话的个人回并不算巧妙，主线的存在感过低，集与集之间的关联性过弱，这也导致观感上的参差不齐——既有第一话、第八话那样的非常优秀的话，也有第二话、第四话那样比较一般的话。不过一致的是大部分地方表现力都到位，所以左右观感的更多是剧情。<br>而关于剧情，这就是受题材限制的地方。在日常为背景、偶像为主题的前提下，要就九名角色进行各有特色且有一定深度的刻画（更要命的是，它还每次都要用负面情绪——解决的套路进行这种刻画）——虹做到了没有同质化，有的地方也相当有特色和新意（比如璃奈），但有些矛盾塑造得就有些强行，没法达到预期的效果。<br>虽然上面的评论看起来更偏向是在批评，但这只是因为我讲优点的能力和相比讲缺点的能力太差。事实上即使存在诸多不足之处，虹的整体表现仍然可以说是很不错的。这是拜其极其到位的表现力所赐，即使一般甚至是有些强行的剧情下也可以有几个出彩的地方，而对合理的剧情就可以给出非常优秀的演出了。平均质量不差+几个很优秀的高光点，作为独立动画来说就可以认为很不错了，而对我相比之下低得多的加推门槛来说更是完全够用。作为lovelive系列的第三代，我本来并没有给它多大期待，但虹的确同样在校园偶像这个题材下走出了和lovelive前辈完全不同的路。<br>另外关于虹动画我做了一个有趣的尝试，每话更新之后无论观感好坏都让自己在微博上写一些关于这一话的评论。这是一件我认为有趣且有益的事，强迫自己把自己的想法写出来不仅是锻炼表达能力，想法本身在这一过程中也会得到确认和完善。之后追新番的时候我也会尽量延续这一行为（不过前提是有让我愿意给它每话写评论的新番）。每话的评论记录如下：</p>
<ul>
<li><a href="https://weibo.com/5566902218/Jnxplgs29">第一话</a></li>
<li><a href="https://weibo.com/5566902218/JoBw7Degh">第二话</a></li>
<li>第三话没有评论，因为没有关弹幕，在重要场景被严重影响了观感，所以不好评价</li>
<li><a href="https://weibo.com/5566902218/JqJEmfU2u">第四话</a></li>
<li><a href="https://weibo.com/5566902218/JrN5uim2M">第五话</a></li>
<li><a href="https://weibo.com/5566902218/JsRbRgznb">第六话</a></li>
<li><a href="https://weibo.com/5566902218/JtVC65UNk">第七话</a></li>
<li><a href="https://weibo.com/5566902218/JuZIy2fzJ">第八话</a></li>
<li><a href="https://weibo.com/5566902218/Jw3gB914i">第九话</a></li>
<li><a href="https://weibo.com/5566902218/Jx7aNFj6L">第十话</a></li>
<li><a href="https://weibo.com/5566902218/JyboTyIHm">第十一话</a></li>
<li><a href="https://weibo.com/5566902218/JzfBJx02g">第十二话</a></li>
<li><a href="https://weibo.com/5566902218/JAjq1BzDr">第十三话</a></li>
</ul>
<p><img src="anime-10-adashima.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>安达与岛村</strong>：<del>实在没办法给出客观的评价，因为一看到她们贴贴我的脑子就失效了。</del>这种有点电波的风格让我看得很舒服，《安达与岛村》没有什么“大”的描写，而是聚焦在了非常细腻的感情的刻画上，安达的恋する乙女的心境，岛村和安达相处的细微的独特感，都是需要静下心来细细品味的，而《安岛》也成功塑造出了这种氛围。由于没有什么非常印象深刻的地方，可能过一段时间后这里面的它就会被我忘得差不多，但追番的过程绝对是愉快的体验。</p>
<p><img src="anime-10-lily.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>突击莉莉</strong>：只用一句话概括的话，是我近几年来看过的新番中最烂的（也有可能是魔禁三）。对节奏的把握极其糟糕，就像是被赶着把设定和剧情赶紧交代完事拉倒，作为观众完全没有一丝一毫被剧中的任何东西感染到。其所遵循的“新三集定律”（即三集一崩），在我看来更像是每次huge一出现就崩，动画组根本把握不好超出日常贴贴之外的情感要如何刻画，所以每次工具huge出现，剧情开始严肃的时候就会同时开始崩坏。不过平心而论（这很难），其实到了后面是开始出现了改观的，最后两话虽然也是出现了huge，但应该还算看得下去。不过固有印象这个东西一旦形成了就很难改变，前面烂成这样，后面就算还算过线也没法让人认真看了——我还是没法投入，只想笑。<br>题外话，根据<a href="https://www.bilibili.com/read/cv7250643">这篇访谈</a>，少歌初期怕不是也要当成莉莉这样的企划来做的……我对古川监督只有感谢……</p>
<h3 id="旧番"><a href="#旧番" class="headerlink" title="旧番"></a>旧番</h3><p><img src="anime-yagakimi.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>终将成为你</strong>：上半年看的，记不太清了，如果有时间二刷一遍就把评论补上（</p>
<h2 id="漫画"><a href="#漫画" class="headerlink" title="漫画"></a>漫画</h2><p><img src="manga-fire-punch.jpg" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>炎拳</strong>：因为年中最后生还者的事奇怪地把“对他使用炎拳吧”的梗带火了起来，以此为契机补了炎拳。剧情结构的设计很引人入胜，大大小小密集的爆点（大概可以用这个词？）有一种是在看电影的感觉，这种持续不断的激励可以让人一口气看下去。主角阿格尼的塑造也很不错，在“烈焰人”、“炎拳”、“阿格尼”、“桑”的身份之间的彷徨，和从始至终贯穿的被“活下去”的诅咒束缚，或许这里也能看见一些虚无主义的思想。而关于剧情本身，我只能说，藤本树，我的自由恶魔……</p>
<p><img src="manga-chainsaw.jpg" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>电锯人</strong>：同样是藤本树的作品，相比之下《电锯人》无论设定、人物还是剧情结构上，都和其他令人津津乐道的传统热血漫没有什么很大的差别。虽然整体性质没什么可圈可点的，但在很多局部却有着独特的亮点，在一些单个场景上，《电锯人》凭借其杰出的想象力给出了具有无与伦比的震撼和冲击力的画面（暗之恶魔登场、万圣节、电锯人玛奇玛双人舞等），除去这些异常优秀的地方，在单话的尺度上，其表现也可以说是不俗。总得说是很值得一看的作品，也期待明年动画化之后能给出更好的表现。</p>
<h2 id="电视剧"><a href="#电视剧" class="headerlink" title="电视剧"></a>电视剧</h2><p>当然，电视剧不属于ACG，不过和动画同属于影视作品，我也会用同样的方法评价，放到别处去会破坏结构的美观，所以还是放在这里了。</p>
<p><img src="TVdrama-silent-corner.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>隐秘的角落</strong>：六月那阵搞得很火，当时我刚被北大的夏令营刷下去，一个人在合肥待着那几天想看点啥又没啥可看的，于是破天荒地开始看了电视剧。前面部分的剧情展开得不错，有足够的内容和悬念，能让人有兴趣看下去，里面展现的对孩子有着控制欲极强的单亲母亲形象很真实也引人思考。但之后的剧情我只能以迷惑来形容，莫名其妙的人做莫名其妙的事引发莫名其妙的剧情展开，观感十分糟糕。<br>比起电视剧本身，让我觉得比较有趣的点是观众的论调，举一例，普普退场那里，这里对重要角色的退场的处理仓促到可以以狼狈来形容，这简直是希望之花级别的剧情崩坏，这要是动画的话估计早就被群嘲了，但这里似乎没什么反应。另外一点是大家似乎普遍对黑深残有着奇怪的偏好，以至于纯靠脑补的生硬解释都能广受吹捧（“不按我预期发展的剧情都是幻觉”），似乎别的都不重要，只要足够黑深残就是好作品了。我对黑深残没有什么意见，但为了黑深残而黑深残是我非常讨厌的行为，这除了作者编故事水平不行之外什么也无法表达。对可能的伏笔的合理推测和对已展现出的剧情的重解读也是我认为很有意义的，但观众靠强行脑补给自己讲不明白故事的作品圆场，我实在想不出其乐趣所在。</p>
</body></html>]]></content>
      <categories>
        <category>总结</category>
      </categories>
      <tags>
        <tag>总结</tag>
        <tag>ACG</tag>
      </tags>
  </entry>
  <entry>
    <title>2020年度总结</title>
    <url>/2021/01/01/2020-review/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>这里应该有个开头，但不知道怎么开，就算了。毕竟是2020年的总结，不守规矩一点倒更符合。</p>
<h2 id="学业和科研"><a href="#学业和科研" class="headerlink" title="学业和科研"></a>学业和科研</h2><p>无事结束了大三的学业，不出意外的话应该马上也会无事结束咸鱼的大四上半学期。和往常一样，既不是一点没懂，也算不上有多通透。这学期意识到了选不是不得不选的课导致要在应对考试上浪费时间是多么蠢的事，那么马上要结束的应该也是大学期间选的最后一门课了。</p>
<p>有惊无险地保研去了上海交大，从决定留国内到拿到名额（甚至有那之后也有一段）的那段时间内一直重复着无意义的焦虑，被北大刷下来之后尤甚，脑子里充斥着各种保研局势严重的信息和对失学的恐惧。不过还好，我的运气不算太差。妮可的五年本科给我的改变可谓是翻天覆地，在交大的（至少）五年博士之后又会是什么样呢？——到时候再说吧。</p>
<p>被carry着完成了人生中第一个课题。我做的只是些平凡的工作，倒不如说不平凡的我也做不来。早就有了的我在科研上的能力比算不上多强的在做题上的能力还要差得多的预感得到了验证。可能我的能力和兴趣都只在于看看我们已经做到了什么程度。希望我今后别搞得太差。</p>
<h2 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h2><p>虽然世间经历了巨大的动荡，但多少不太合适地说，这对我倒成为了享受比以往安逸得多的生活的契机。疫情在沈阳并没有多严重（讽刺的是，在写这篇总结的现在，沈阳却成了全国最危险的地方之一。希望城没事）。事实上今年前半年待在家的时间可以说是我过过的最舒服的生活了。一个人待在家里也就意味着这片不小的空间完全属于我一个人，不算多的课不按时听也可以随时看回放（除了天力天测这屑课还要签到），所以时间的安排也能由我全部掌握，由于完全没有其他人的干扰，在不熬夜写代码/debug/追番以及没有失眠的情况下我竟能难得的做到23:00-9:00的规律作息（除了天力天测这屑课还要早起签到）。以及没有重到让我无暇休息的课业和科研任务让我不至于一天颓废到晚，对自己的兴趣也可以有足够的时间投入，四月那一场高强度剧本杀之后在群里闲聊使我也能保留和其他人的联系，隔三差五还可以找朋友串门，自己做的菜比妮可食堂合胃口得多，不自给但自足，一个月花销估计不到一千……说能一直过下去这种生活成为了我的理想都不为过。</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="阅读"><a href="#阅读" class="headerlink" title="阅读"></a>阅读</h3><p>读了《科学革命的结构》。因为对科学哲学一直很感兴趣就去读了，对范式和科学革命有了一些概念，的确给出了一些与我的朴素直觉不同的对科学本身的看法。关于科学哲学以后应该还会继续了解，这本书之后应该也会再读一遍，整理篇博客出来。</p>
<p>读了《研究之美》。大一的时候就听说了，这回看到电脑里放了不知道多久的文件一个下午一口气读完了，感受到了酣畅淋漓的快感，看到无穷小和无穷大被构造出来的时候简直想欢呼一声（鉴于家里就我一个人，可能也真的叫出来了，记不得了）。用无趣的语言整理成了<a href="/2020/05/30/surreal-numbers/" title="关于超现实数">关于超现实数</a>。</p>
<h3 id="ACG"><a href="#ACG" class="headerlink" title="ACG"></a>ACG</h3><p>单独写在了<a href="/2020/12/29/2020-review-ACG/" title="2020年度总结——ACG部分">2020年度总结——ACG部分</a>。</p>
<h3 id="声优偶像"><a href="#声优偶像" class="headerlink" title="声优偶像"></a>声优偶像</h3><p><img src="kakkoii-kawaii.png" alt=""></p>
<p>由于众所周知的原因，本来很期待的今年少歌预定的两个活动——乐队live和大运动会都取消了，日本（自以为）控制住了之后的远足的Revue也因为奇怪的原因取消了。又由于显而易见的原因，没人引进剧场版总集篇到大陆，手贱看了剧透的我只能一边心慌地等着BD发售一边一遍遍听着「ああ　私たちは　何者でもない　夜明け前のほんのひととき」，还时不时担心明年新剧场版会不会把整个企划直接送走。好在靠Starry Diamond的BD和再生赞美曲的碟补充了一些starlight能量，特别是后者，不得不说少歌官方的确有一手，附赠的小册子记录了九九组和staff们一路的点点滴滴，浓缩了来自动画的感动和来自九九组的感动。这个企划今年也在支撑着我活下去。</p>
<p>以スタリラ为契机加推了长得可爱歌唱力又超高的楠木灯和甜到掉牙的とのつむ。以楠木灯为契机看了虹团的动画，观感异常的好，于是又成为新晋虹虹人。总之就是誰でも大好き。</p>
<p>（说起lovelive，其实本来想要去看年初的lovelive fes的，但是抽选没抽中，要是去了的话，最坏的情况可能困在日本回不来了……好险……）</p>
<p>顺便，画了个奇怪的东西：</p>
<p><img src="dd-tree.png" alt=""></p>
<p align="center">
节点代表加推对象，边代表加推契机。容易看出是有向无环图，我称之为DD树。
</p>

<h3 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h3><p><img src="my-github-contribution.png" alt=""></p>
<p align="center">
连地铁的瓷砖都比我勤奋.jpg
</p>

<p>“就你写的那垃圾项目也配称作开发？”我也是这么想的，但的确想不出别的标题了。</p>
<p>为了跑团方便写了个骰子机器人。用的是一直以来用的框架，我自己写的都是些简单到不行，没多少营养的东西。不过尽管如此，每次加新功能、重构之后也能有那么一点成就感。虽然从学C的时候遗留下的习惯还很重，但是现在写面向对象的代码也能越来越顺手了。年中那阵各大QQ机器人平台被封的时候消沉了一段时间——虽然是垃圾，也是我自己花时间亲手写的垃圾啊——不过还好mirai平台还活着，在它被封之前还能苟一段时间。</p>
<p>别的放到github上的项目几乎都是课题用的，没啥好说的。尽量做到了还算好看。</p>
<h3 id="产出"><a href="#产出" class="headerlink" title="产出"></a>产出</h3><p>试着做了下动画的二次创作，剪了两个勉强可以称作MAD的东西。结果无论是主观还是客观来看都很不怎么样，也是意识到了人与人的体质不可一概而论，自己的确没什么艺术细胞。但尽管明白自己做得很烂，仅仅是因为自己的作品得到来自完全不认识的陌生人的认可时的成就感却仍然很强烈，这可能是我唯一的完全因为自己的能力本身而得到他人认可的机会。所以无论好坏，有机会我还会继续做下去，继续用低水平的作品污染愿意关注我的人的眼球以换取不长久的虚荣心。</p>
<p>与标题不符但同质的一件事是，我从前意识不到在网络平台给不认识的人评论和交流有什么意思，不过今年也是大量开始了这种尝试。有时脱离了自己在熟人群体中的被确定了的身份，在网络空间上可能反而得到更客观的评价。（当然，那些乌烟瘴气的领域是不可能碰的，这辈子不可能碰的）</p>
<h3 id="其他-1"><a href="#其他-1" class="headerlink" title="其他"></a>其他</h3><p>其他值得记录的可能就是在妮可日语卡拉OK上去唱歌了。唱得很开心，虽然唱得不行形象也不行但是很开心。能登台演出的机会今后大概也不会再有了，总之很感谢日协，也很庆幸在大学最后一年搭上了末班车。</p>
<h2 id="关于自己"><a href="#关于自己" class="headerlink" title="关于自己"></a>关于自己</h2><p>如果说2020年的我自己，那大概是交织着安逸和焦虑，以及一边安逸一边焦虑地度过的。安逸的一方面，很难得的在很长的一段时间里我都能有合适的状态来审视自己的价值。其结果是，没有什么价值。这不仅是对社会做出贡献这种层面，也是说在几乎任何领域都没法做出什么让自己满意的东西。尽管理智告诉我这不要紧，人生下来不是为了完成某种被指定的目的的，但每每想到这点还是会为之难过。不过好在也有着支撑我的东西一直给我输入着正激励，这一年的思考也再次确定了，对这种正激励的追寻可以构成人生的意义。</p>
<p>而焦虑的一方面，不仅是关于保研，也有关于之后的人生。心理上一直觉得还很远的未来突然就来到了面前，各种想逃避却不得不面对的选择背后的重量似乎要压得我喘不过气来。在不断的准备材料、查找信息的过程中我才头一次感同身受的体会到，在社会中不得不操心的事比我本以为的要多得多。可以被安排的时间早就过去了，这些纷乱复杂的东西本就要由自己处理。我对这些仍然没那么习惯，但至少也不算是什么也不会了，至少这点上有所成长吧。</p>
<h2 id="展望"><a href="#展望" class="headerlink" title="展望"></a>展望</h2><p>我没有立flag的习惯，硬要说的话就是每学期开学从图书馆借一堆书，看几页或一页没看，在学期末再原样还回去。所以这里只是列一下希望能在2021年做到的事，仅仅只是愿望而已。</p>
<ul>
<li>希望毕业旅行去日本玩一下，看看东京塔，进行一下圣地巡礼，也想在电影院看明年上映的少歌新剧场版。不过看日本防疫做的这熊样，大概是希望渺茫。不过还是希望，没准毕业之前能打上疫苗呢</li>
<li>希望搬砖之外也能多会点数学，多学点宇宙学，多学点广相</li>
<li>希望多学点web编程，希望能写出来能看的项目</li>
<li>希望能遇到新的优秀的动画</li>
<li>希望能无事毕业</li>
<li>希望我推都健康不出事，多出演点动画或舞台。希望少歌新剧场版能延续动画的水平，希望能多看到点少歌新活动，スタリラ别关服，少歌别凉（</li>
<li>希望周围的人都没事</li>
<li>希望2021也能活下去</li>
</ul>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>不会真的有人有耐心看到最后吧？——那也有可能是多年之后的我自己。总之来都来了，听听我今年最喜欢的歌再走吧。</p>
<blockquote>
<p>選ばなかった過去たちへ　静かに捧ぐ讃美歌を</p>
</blockquote>
<iframe src="//music.163.com/outchain/player?type=2&amp;id=1480046010&amp;auto=0&amp;height=66" style="width: 310px; height: 86px;"> </iframe></body></html>]]></content>
      <categories>
        <category>总结</category>
      </categories>
      <tags>
        <tag>总结</tag>
      </tags>
  </entry>
  <entry>
    <title>舞台少女将站上名为自己的舞台</title>
    <url>/2022/01/03/202201-revue-starlight-gekijoban/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>从很久之前开始我就一直在想，我总是要写点什么的，这并不是因为我的见解多深刻或视角多独特以至于一定要写出来才行，只是试图借文字理清我那些不怎么清楚的想法和感受。我一直认为作品是只有被它的观众看到的那一刻才算完成了的，而将看到的画面和听到的声音转化为自己能够理解的东西本身就是一种再创作，所以我的行为大概可以被解释为一种致敬，对少女歌剧这样难得的优秀作品进行的模仿创作。虽然是拙劣的模仿，但我想这是我一定要做的，如同剧场版中的舞台少女们一样，完成一直以来没能完成的执念，然后才可能走向下一个舞台。</p>
<h2 id="两人的高速公路"><a href="#两人的高速公路" class="headerlink" title="两人的高速公路"></a>两人的高速公路</h2><p>作为wi(l)d-screen baroque的第一幕，花叶revue也承担了展示剧场版中revue的风格的作用。对revue的解读存在很多的讨论和说法，这里我并不想过多纠结死的设定，我采用这样的理解：revue即是舞台，而在revue中发生的一切，包括revue本身，也都属于舞台的范畴。剧场版的revue的风格的明显变化也是符合这一理解的，不再起选拔作用的revue的内容也不再仅仅是舞台少女们以试图砍掉对方的披肩的形式分个胜负。这无疑更加增加了revue的表现能力。</p>
<p>另外一个值得注意的点是，舞台脱离了圣翔音乐学院的地下，而是在未知的地点，或者是不属于世界上任何一个位置的地点上演。在花叶revue的最开始，我们仍然可以看到熟悉的东京塔和我们预期的会在revue中出现的内容。</p>
<p><img src="futakao-0.png" alt=""></p>
<p><img src="futakao-1.png" alt=""></p>
<div align="center"> 即用刀斧打架 </div>

<p>而在双叶说出“我是为了你好”之后，场景发生了转换。可以看出这里的舞台设定是心虚的男人和已经知道一切的女人互相摊牌，这无疑也是与花叶符合的。双叶不继续留在香子身边当然不都是为了香子，而香子对这点也是心知肚明，因此能够怼得双叶说不出话来。内容上，这是对花叶过去的关系的持续的否定，而这里的舞台整体风格的改变也可以看做在另外一个维度上的，对TV中已经定型的revue形式的否定。这种否定，或是说创新，也可以很容易地在后面的revue中发现。</p>
<p>当然，（好不容易做得这么好的）TV的内容也并没有被完全否定。与约定的revue香子试图割断自己的披肩那里类似，怨恨的revue止于香子自己把自己的车开了下去。</p>
<p><img src="futakao-2.png" alt=""></p>
<p>这也是我在花叶revue中最受到冲击的画面（<del>不觉得和odd taxi最终话的名场面很像吗</del>）这里的相似在于，事实上香子从头到尾都明白一切，她的行为只是为了看到双叶表现出的行动。在TV中是希望得到双叶的挽留以确认她对自己的重视，而在这里要确认的大概就是双叶离她而去追寻自己的舞台的决心。让她满足的不是“为了你好”的讲不通的表面话，而是“不能继续在一起了”的真心。在最后的最后，双叶虽然离开香子，但仍然由不讲理的任性延续了她们的缘分。这也是颇有花叶风味的展开，一向被任性的双叶在最后提出了最大的任性，而从岔路口分开抵达不同目的地的两人也可能以不是“追逐与被追逐”的形式重逢。</p>
<h2 id="用演技表达的真心"><a href="#用演技表达的真心" class="headerlink" title="用演技表达的真心"></a>用演技表达的真心</h2><p>纵观剧场版的所有revue，光昼revue的独特性在于其高潮部分的真情流露并不是借由revue的演出的内容，而是借由表演这一行为本身。真昼的一连串嘲讽和恐吓当然不是真心话，其目的如果仅仅是为了让小光正视她和华恋的舞台上还存在没做完的事，那么自然存在更多更温和的方式，而真昼的选择是拉小光来到由她表演的舞台。这里真昼的性质得到强烈的表现，如果我们不去管在戏里和戏外都被过分强调的真昼身上的扭曲戏份，她实际上也是热爱舞台、渴望闪耀的舞台少女。从动画里考虑，这场revue是在让小光表达她没做完的事；而从动画之外考虑，这也是在完成真昼在摆脱对华恋病态的依赖之后的缺失的塑造。在正午的阳光的背景之中闪耀，投下温暖的光芒，这才是名为露崎真昼的星。</p>
<p>另外，revue中的恐怖表现也让我惊艳。我确实从未预期过能在少女歌剧中看到恐怖的演出，这也确实是无法预料的舞台了。</p>
<p><img src="hikamahi-1.png" alt=""></p>
<div align="center"> 真挺吓人的 </div>

<p>最后是一些完全的个人内容，由于一些早期的原因，我对光昼这对组合心里一直有些意见，因此在被剧透到剧场版会有这一场revue时，我心里确实存在些许担心，会不会整一些我不愿看到的烂活。但毕竟少女歌剧是少女歌剧，能让我乖乖放下成见感动到落泪，这也是这部作品所拥有的能力啊。</p>
<p><img src="hikamahi-2.png" alt=""></p>
<div align="center"> 三句话，让光昼雷为光昼revue落泪 </div>

<h2 id="耀眼之物处在自己的舞台"><a href="#耀眼之物处在自己的舞台" class="headerlink" title="耀眼之物处在自己的舞台"></a>耀眼之物处在自己的舞台</h2><p>很遗憾地承认，在看了很多遍之后，我仍然没法抓到一个解读蕉纯revue的头绪。不过即便如此，我的感受也并非只是“我不懂”，因为这里仍然存在一些能让我可以抓住的点。</p>
<p>可以注意到的是这场revue中关于蕉纯二人存在很多的对称性，例如最开始和最后的“给她弄哭了啊”，被斩断的纯那的名言（“星”）和奈奈的刀，甚至这个像是Python切片表达式的歌名在某种程度上也可以看做是一种对称。</p>
<p><img src="jnnn-1.png" alt=""></p>
<div align="center"> 这个position zero形状的路也是镜像对称的，好吧这可能不怎么重要 </div>

<p>这种大量存在的对称性大概也可以理解为对蕉纯本身的关系的隐喻，因为我们可以看得到奈奈对纯那“届不到”的否定（这里蕉斩断了纯的“星”）使纯那意识到单纯复读名言是不行的，从而将名言的力量真正转化为自身的力量；而纯那对奈奈预期的打破（这里纯斩断了蕉的刀）则使奈奈最终放弃了仅存在于他人身上和过去的再演。可以认为蕉纯二人在对方的心态转变上都起到了类似的作用。</p>
<p>在revue的最后，奈奈感叹“我的再演在现在结束了”。这必然不是指对99届圣翔祭的再演，它在一年前（或三年前）就结束了，我对这句话的理解是，这里的“再演”指的是将自己的舞台放在他人身上的行为。如同对99届圣翔祭的再演中奈奈告诉自己的她在试图从她以为的可怖的未来中保护大家，此时她所需要看到的也是纯那保持她认为的“我的纯那酱”的形象，即使这意味着作为舞台少女的枯萎凋零。也和羁绊的revue的华恋类似，纯那斩断了奈奈为她制作的舞台，从而终止了奈奈的再演。此时的蕉纯的前方都是只属于自己的舞台，只在那里她们能找到自己的闪耀之物。</p>
<p><img src="jnnn-2.png" alt=""></p>
<div align="center"> 破坏之后的复合，这个画面实在过于浪漫…… </div>

<h2 id="展露灵魂的毕业演出"><a href="#展露灵魂的毕业演出" class="headerlink" title="展露灵魂的毕业演出"></a>展露灵魂的毕业演出</h2><p>迷宫的revue大概可以说是剧场版中最华丽的一场，同时也可以说是最“舞台”的一场。和其余的revue要处理的人物如何向不同的前路迈进不同，迷宫revue给我的感觉更多是一场集大成的毕业演出。舞台的不同阶段内容差异巨大，衔接却十分流畅，比起仅仅在这一出舞台上演出的内容，理解成长久以来的心意的互相显露倒更自然一些。</p>
<p>当然，这并不意味着这场revue的存在不那么重要。因为迷宫revue中要讲述的不是如何登上舞台，而是如何从完美的舞台之神的容器退化为存在缺陷与污点的人。这大概也可以用于理解这场revue的结局，只有成为存在缺陷的人的真矢的眼睛才能看到同样存在缺陷的克洛却也如此的美丽。</p>
<p>至于华丽的演出效果，虽然我更享受的是这个，但并不容易用文字描述。这里只说一处，让我最震撼的是在最后，真矢惊叹于克洛的美丽，和舞台的设定一样，展现出了她未曾见过的光芒的克洛让真矢展露出了她的灵魂。随着契约兑现，整座舞台燃起熊熊烈火。很难讲述震撼的由来，只能说这是最适合华丽的舞台的华丽的终结方式了吧。</p>
<p><img src="mayakuro-1.png" alt=""></p>
<h2 id="你即是我，我即是你"><a href="#你即是我，我即是你" class="headerlink" title="你即是我，我即是你"></a>你即是我，我即是你</h2><p>这部分会长一点，因为我的成分，懂的都懂。</p>
<h3 id="华恋的内面"><a href="#华恋的内面" class="headerlink" title="华恋的内面"></a>华恋的内面</h3><p>我第一次体会到少歌的美和震撼是在第不知多少次再演时，大概也是从那一刻起我就是华恋推了，虽然当时我可能还没意识到这一点。我记不起那是什么时候，一个我能记起的时间点是在20年初我剪完约定之塔的MAD之后，那时我意识到TV中华恋的形象似乎存在一些两面性。在舞台上的华恋是不讲理的傲慢的，她在TV的revue中的表现，即对对方说的话强行进行不相关的否定（即non non哒哟）即是出于这样的傲慢，也是由这份傲慢，她才能够连舞台的运转规则和既定的命运都否定掉，才能跳入舞台续写starlight的结局。而另一方面，舞台下的（或者更具体一点，在光面前的）华恋是小心谨慎的，在4话和11话小光离开之后的满城寻找和魂不守舍，其中能看到的更多是焦虑和不安。不过TV中被更多强调的仍是华恋的傲慢的一面，因此那时的我也并不能完全确定华恋心里是否也存在这另外一面，只是作为了心中的一个疑问和期待留存下来。因此在剧场版中华恋中不安的一面得到重点表现，对我来说比起意外更多能感觉到惊喜。我们得以看到更清楚的华恋的细腻的内心，可以看到她对约定的执着之外的更多包含的“不看，不听，不搜”小心翼翼，以及除了向着目标一直线之外也会像每个人一样会拥有的烦恼与迷茫。</p>
<p><img src="karen-1.png" alt=""></p>
<div align="center"> 眼镜小哥就是我啊 </div>

<p>仍然需要说明的是，剧场版对华恋的描写在我看来是增添而不是补完，即我并不认为TV中的华恋是一个不完整的形象，其原因在上面已经讲述过。我们回顾TV可以看到的是华恋即使心中存在着不安与恐惧，却仍然能够去向星伸出手，去改写已成定数的结局，颠覆不可颠覆的命运，这仍然是我们不该忘记的TV告诉我们的华恋身上存在的独特魅力。</p>
<h3 id="重生的舞台"><a href="#重生的舞台" class="headerlink" title="重生的舞台"></a>重生的舞台</h3><p>这大概是每个少歌人都想过的问题，在TV讲述完了这么一个完整而独立的故事之后，演绎完了完整的starlight的舞台少女们又要走向何方？剧场版在皆殺し的revue中给出了答案——她们死了。我并没有单独开一段讨论皆殺し的revue，因为要讨论的话就只能讨论假药了，而我不怎么喜欢假药，无论是做还是吃。比起假药我更喜欢谜语一点，所以我说谜语：华恋在皆殺し的revue中并没有出现，这大概是因为她在那之前就死了，不是在之后在光面前她的番茄裂开的时候，而是在演完starlight之后失去新的目标的瞬间。亦或是再之前，在她认定自己的舞台只能是starlight的那时。此时的华恋甚至也可以说是被她自己囚禁在了和光的约定之塔中。</p>
<p><img src="karehika-1.png" alt=""></p>
<div align="center"> 这里约定之塔成了华恋的轨道的终点 </div>

<p>当然，具体的华恋的死仍然发生在和小光重新见面时，在华恋将目光从她已完成的约定和小光身上移开，转到只属于她自己的舞台，并为自己的空无一物感到恐惧之时。值得注意的是恋光在这里的表现和在过去两人许下约定时的表现是完全一致的。这也正是对恋光两人对对方的意义的绝佳概括——“你即是我，我即是你”。</p>
<p><img src="karehika-2.png" alt=""></p>
<p><img src="karehika-3.png" alt=""></p>
<p>和在过去华恋拉住小光的手要与她一同前往舞台，成为star使光作为舞台少女重生相同，此时光的信落到华恋身上，这或许也是一个不需要被点明的约定——作为舞台少女，无论多少次都要再次踏上舞台。</p>
<p><img src="karehika-4.png" alt=""></p>
<p>于是登上列车的华恋进行了她的再生产，在这次我们看到的最后的再生产中，华恋过去的一切，包括曾经与小光的约定都被燃烧殆尽，让她得以新生，以崭新的姿态站在舞台上。</p>
<p><img src="karehika-5.png" alt=""></p>
<p><img src="karehika-6.png" alt=""></p>
<p>然而wi(l)d-screen baroque在此时还未结束，华恋还有一定要说的最后的台词。值得注意这里并不是一场revue，而仅仅是“最后的台词”。</p>
<p><img src="karehika-7.png" alt=""></p>
<div align="center"> 没有revue名 </div>

<p>可以采用这样的理解，华恋所需要进行的再生产在回到舞台之前便已完成，她需要最后在revue starlight舞台上让这个舞台落下帷幕。在故事的开端，由于华恋的约定走上舞台的光此时绽放出无比的闪耀，正是这份闪耀促使了华恋的重生，也是切实接收了这份闪耀使得华恋的执着的对象变成了舞台本身。被光的闪耀迷住双眼的华恋说出最后的台词“我也不想输给光”，无数的position zero从她之中迸发而出，将约定之塔撕裂成两端，让她来到了舞台中心。</p>
<p><img src="karehika-8.png" alt=""></p>
<p><img src="karehika-9.png" alt=""></p>
<p>在这场舞台中更为耀眼的确是光，但这不再是互相争夺闪耀的revue，而是让revue starlight画下句号的，舞台少女爱城华恋新生的舞台。正是在这一刻，华恋和所有舞台少女们都终于可以迈出starlight之后新的一步，如同她们摘下的披风一样，可以无依托地在空中自由地被放飞。重新成为心中空无一物的华恋，却也是未被涂画过的白纸，在她的舞台上存在着无限的可能性，而她也定会找到一个又一个仅属于自己的舞台。</p>
<h2 id="舞台之外"><a href="#舞台之外" class="headerlink" title="舞台之外"></a>舞台之外</h2><p>写这篇观后感并不是在我第一次看剧场版之后，也肯定不会是最后一次。第一次看完的时候我哭得很厉害，既是因为没有任何预想的初见时面对这样的情感和信息的洪流没什么抵抗能力，也是因为我也很清楚剧场版的结局对我和一起走过三年的少女歌剧来说意味着什么。舞台是消耗物，动画也是，但被消耗的并不是作品本身，而是去观看作品的人。有些感受是只有初见才能体会的到的，有些可能会随着时间的流逝产生变化，有些曾有过的感受可能在从不知道第几次再演开始再也不会出现。我曾很害怕这一点，害怕变成一个完全不一样的自己，害怕曾经有过的情感在某一天再也找不回来，害怕曾经让我感受到无比闪耀的东西也会随着我的改变而褪色，对少女歌剧这样带给了我未曾想象过的感受的作品就更是如此。</p>
<p><img src="after-1.png" alt=""></p>
<p>但我想剧场版还是给了我一些改变的。剧场版给我的并非只有结束的信息，重要的是让我感受到了从未感受过的满足。我说不清是为什么，虽然我也没有什么过于耀眼而看不清的未来，但大概这点满足也就够了。我确是最空虚的，也是最满足的。在今后我还会再演不知道多少次，再遥远的之后可能即使再演也唤不起来现在的感受，但这份满足感大概会烙印在我身上，我会一直记得一部叫做《少女歌剧 Revue Starlight》的动画给过我如此多这样新的体验。</p>
<p>但那是未来的事，至于现在，我还有很多没法归纳成语言的感受不知该如何表达。我想我只好复读一遍初看之后那天晚上归结的一句话：</p>
<p><img src="after-2.png" alt=""></p>
<p>看到最后了，Revue Starlight。</p>
</body></html>]]></content>
      <categories>
        <category>ACG</category>
      </categories>
      <tags>
        <tag>ACG</tag>
        <tag>随想</tag>
      </tags>
  </entry>
  <entry>
    <title>在Docker上部署Jupyter Notebook</title>
    <url>/2019/10/22/Docker-Jupyter/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>由于要用到只能在Linux上运行的python包，又懒得装双系统，就了解了一下Docker，配置了一个能在Windows上用的Jupyter Notebook环境。</p>
<h2 id="Docker上Ubuntu的基础配置"><a href="#Docker上Ubuntu的基础配置" class="headerlink" title="Docker上Ubuntu的基础配置"></a>Docker上Ubuntu的基础配置</h2><p>去官网上下载一个Docker Desktop，然后pull一个ubuntu镜像。刚pull下来的ubuntu镜像里什么必要的工具也没有，需要自己apt-get安装。（改软件源的配置文件时需要注意按照对应的系统版本去搜索配置文件的写法，否则apt-get会报错）</p>
<p>安装python, python3, pip, pip3, vim等必要软件。</p>
<h2 id="配置Jupyter-Notebook"><a href="#配置Jupyter-Notebook" class="headerlink" title="配置Jupyter Notebook"></a>配置Jupyter Notebook</h2><p>参考了<a href="https://www.jianshu.com/p/21d5afc1c079">这篇博客</a>。</p>
<p>首先安装Jupyter（我的电脑上pip3 config似乎有问题）：<br></p><figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">pip3 install -i https:<span class="regexp">//</span>pypi.tuna.tsinghua.edu.cn/simple jupyter</span><br></pre></td></tr></tbody></table></figure><br>以及其他必要的第三方库。<br>然后生成Jupyter配置文件：<br><figure class="highlight verilog"><table><tbody><tr><td class="code"><pre><span class="line">jupyter notebook --<span class="keyword">generate</span>-<span class="keyword">config</span></span><br></pre></td></tr></tbody></table></figure><br>修改配置文件<code>~/.jupyter/jupyter_notebook_config.py</code>中的如下几项：<br><figure class="highlight ini"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">c.NotebookApp.open_browser</span> = <span class="literal">False</span></span><br><span class="line"><span class="attr">c.NotebookApp.ip</span> = <span class="string">'*'</span></span><br><span class="line"><span class="attr">c.NotebookApp.port</span> = <span class="number">8888</span></span><br></pre></td></tr></tbody></table></figure><br>设置密码：<br><figure class="highlight ebnf"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">jupyter notebook password</span></span><br></pre></td></tr></tbody></table></figure><br>然后把当前容器commit到notebook镜像。<p></p>
<p>需要启动Jupyter Notebook时，用如下命令启动notebook容器：<br></p><figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">docker run -d --name jupyter_pycbc -p <span class="number">8888</span>:<span class="number">8888</span> -v <span class="regexp">//</span>D<span class="regexp">/DockerShare/</span>:<span class="regexp">/home/</span>FromHost notebook jupyter notebook --allow-root /home</span><br></pre></td></tr></tbody></table></figure><br>各参数的含义为：<p></p>
<ul>
<li>-d：在后台运行</li>
<li>-p：将容器的8888端口映射到宿主机的8888端口</li>
<li>-v：将容器的<code>/home/FromHost</code>目录挂载到宿主机的<code>D:DockerShare</code>目录下。注意Windows中D盘DockerShare文件夹的表示方式为<code>//D/DockerShare</code>。</li>
</ul>
<p>在宿主机访问<code>localhost:8888</code>即可使用Jupyter Notebook。</p>
<h2 id="配置多个python"><a href="#配置多个python" class="headerlink" title="配置多个python"></a>配置多个python</h2><p>参考了<a href="https://blog.csdn.net/hohaizx/article/details/89633203">这篇博客</a>。</p>
<p>之前配置的Jupyter Notebook只能使用python3，现在要同时使用python2和python3，需要进一步配置。</p>
<p>这只需添加python2的ipython kernel：<br></p><figure class="highlight jboss-cli"><table><tbody><tr><td class="code"><pre><span class="line">pip install -i https:<span class="string">//pypi.tuna.tsinghua.edu.cn/simple</span> ipykernel</span><br><span class="line">python -m ipykernel install <span class="params">--user</span> <span class="params">--name</span> python27 <span class="params">--display-name</span> <span class="string">"python27"</span></span><br></pre></td></tr></tbody></table></figure><br>再次启动Jupyter Notebook，即可看到两个python。<p></p>
</body></html>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>电磁场方程</title>
    <url>/2019/05/28/EM-field-equation/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h1 id="1-拉氏量密度"><a href="#1-拉氏量密度" class="headerlink" title="1.拉氏量密度"></a>1.拉氏量密度</h1><p>电磁场体系完整的拉氏量为:</p>
<script type="math/tex; mode=display">L = L_p + L_{pf} + L_f</script><p>这三项分别为粒子、粒子与场耦合和场的拉氏量。上一节只讨论了粒子在电磁场中的运动，故只涉及前两项，而现在要讨论的则是电磁场的方程，因此要关注的是后两项。</p>
<p>我们之前接触的拉氏量使用来描述粒子的运动的，那么如何使用拉氏量描述场呢？简单起见，我们先来考虑一个标量场$\phi(t,\mathbf x)$：我们可以把$\phi$看做广义坐标，时空坐标为作为参量，那么可以找到一个合适的拉氏量，用最小作用量原理推出场的方程$f(\phi, \partial_{\mu}\phi, x^{\mu}) = 0$。与粒子不同的一点是，场具有无穷的自由度——$\phi$作为广义坐标，需要空间中每个点的$\phi$值才能确定场的分布；而在每个点上，自由度是有限的。这相当于系统中存在连续分布的粒子，多粒子体系的拉氏量是单独的粒子的拉氏量之和，那么对于在空间中连续分布的场，拉氏量应为：</p>
<script type="math/tex; mode=display">L = \int \mathscr L dxdydz</script><p>$\mathscr L$为<strong>拉氏量密度</strong>。从上面的讨论也可以看出，在考虑场的方程时，应给出的是拉氏量密度。</p>
<p>对拉氏量密度为$\mathscr L = \mathscr L(\phi, \partial_{\mu}\phi)$，则根据定义，作用量为：</p>
<script type="math/tex; mode=display">S = \int\int \mathscr L d^3xdt = \int \mathscr L d\Omega</script><p>$d\Omega=dtdxdydz$是洛伦兹不变量，因此$\mathscr L$也应为洛伦兹不变量。下面用变分法推出场的E-L方程：</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta S &= \int \left[\left( \frac{\partial \mathscr L}{\partial \phi} \right)\delta\phi + \frac{\partial \mathscr L}{\partial (\partial_{\mu}\phi)}\delta(\partial_{\mu}\phi) \right] d\Omega
\\&= \int \left[\left( \frac{\partial \mathscr L}{\partial \phi} \right)\delta\phi + \frac{\partial \mathscr L}{\partial (\partial_{\mu}\phi)}\partial_{\mu}\delta\phi \right] d\Omega
\\&= \int \left[\frac{\partial \mathscr L}{\partial \phi} - \frac{\partial}{\partial x^{\mu}}\frac{\partial \mathscr L}{\partial (\partial_{\mu}\phi)} \right] \delta\phi d\Omega
\end{align*}</script><p>其中用到了分部积分，$\delta\phi$在边界上为0。场的E-L方程和粒子的E-L方程具有类似的形式：</p>
<script type="math/tex; mode=display">\frac{\partial \mathscr L}{\partial \phi} - \frac{\partial}{\partial x^{\mu}}\frac{\partial \mathscr L}{\partial (\partial_{\mu}\phi)}=0</script><h1 id="2-电磁场的拉氏量密度"><a href="#2-电磁场的拉氏量密度" class="headerlink" title="2.电磁场的拉氏量密度"></a>2.电磁场的拉氏量密度</h1><h2 id="2-1-猜测电磁场的拉氏量密度"><a href="#2-1-猜测电磁场的拉氏量密度" class="headerlink" title="2.1 猜测电磁场的拉氏量密度"></a>2.1 猜测电磁场的拉氏量密度</h2><p>电磁场是矢量场，虽然和前面讨论的标量场不一样，但是E-L方程也有相同的形式：</p>
<script type="math/tex; mode=display">\frac{\partial \mathscr L}{\partial A^{\nu}} - \frac{\partial}{\partial x^{\mu}}\frac{\partial \mathscr L}{\partial (\partial_{\mu}A^{\nu})}=0</script><p>即E-L方程对$A^{\nu}$的每个分量仍然成立。</p>
<p>我们可以猜测一下电磁场的拉氏量密度$\mathscr L_f$的形式。它应该满足以下性质：</p>
<ol>
<li>如1小节所述，$\mathscr L_f$应该是洛伦兹不变量</li>
<li>应该具有规范对称性</li>
<li>电磁场应该满足叠加原理，即电磁场方程应该是线性的，则应该有$\mathscr L_f \sim (\partial_{\mu}A^{\nu})^2$</li>
</ol>
<p>事实上人们发现$\mathscr L_f$的形式是：</p>
<script type="math/tex; mode=display">\mathscr L_f = -\frac 1 {4\mu_0 c} F^{\alpha\beta}F_{\alpha\beta}</script><p>很容易验证它是满足以上的要求的。</p>
<h2 id="2-2-真空电磁场方程"><a href="#2-2-真空电磁场方程" class="headerlink" title="2.2 真空电磁场方程"></a>2.2 真空电磁场方程</h2><p>将电磁场的拉氏量带入E-L方程，求得真空中的（即只考虑$\mathscr L_f$，不考虑$\mathscr L_{pf}$）电磁场方程为：</p>
<script type="math/tex; mode=display">\frac 1 {\mu_0 c} \frac{\partial F_{\nu}^{\cdot\mu}}{\partial x^{\mu}}=0</script><p>也可以乘$\eta_{\mu\gamma}$并改变自由指标得到：</p>
<script type="math/tex; mode=display">\frac 1 {\mu_0 c} \frac{\partial F_{\nu\mu}}{\partial x^{\mu}}=0</script><p>将电磁场张量按照定义展开，得到：</p>
<script type="math/tex; mode=display">\frac{\partial}{\partial x^{\nu}}\frac{\partial A^{\mu}}{\partial x^{\mu}}-\frac{\partial^2}{\partial x_{\mu}\partial x^{\mu}}A^{\nu}=0</script><p>选取洛伦兹规范：</p>
<script type="math/tex; mode=display">\frac{\partial A^{\mu}}{\partial x^{\mu}}=0</script><p>则有：</p>
<script type="math/tex; mode=display">\frac{\partial^2}{\partial x_{\mu}\partial x^{\mu}}A^{\nu}=0</script><p>这就是真空中的电磁场方程。</p>
<p>写成分量的形式为：</p>
<script type="math/tex; mode=display">
\left(\frac 1 {c^2} \frac{\partial^2}{\partial t^2} - \nabla^2 \right)\phi=0
\\ \left(\frac 1 {c^2} \frac{\partial^2}{\partial t^2} - \nabla^2 \right)\mathbf A=0</script><p>再利用洛伦兹规范：</p>
<script type="math/tex; mode=display">\frac{\partial A^{\alpha}}{\partial x^{\alpha}} = \frac 1 {c^2} \frac{\partial \phi}{\partial t} + \nabla\cdot\mathbf A =0</script><p>则有：</p>
<script type="math/tex; mode=display">
\begin{align*}
\left(\frac 1 {c^2} \frac{\partial^2}{\partial t^2} - \nabla^2 \right)\phi &= \frac{\partial}{\partial t}(-\nabla\cdot\mathbf A) - \nabla^2\phi
\\ &= \nabla\cdot(-\frac{\partial \mathbf A}{\partial t} - \nabla \phi) 
\\ &= \nabla\cdot\mathbf E=0
\end{align*}</script><p>以及：</p>
<script type="math/tex; mode=display">
\begin{align*}
\left(\frac 1 {c^2} \frac{\partial^2}{\partial t^2} - \nabla^2 \right)\mathbf A &= \frac 1 {c^2} \frac{\partial^2 \mathbf A}{\partial t^2} + \nabla\times(\nabla\times\mathbf A) - \nabla(\nabla\cdot\mathbf A)
\\ &= \frac 1 {c^2} \frac{\partial^2 \mathbf A}{\partial t^2} + \nabla\times\mathbf B + \nabla\left(\frac 1 {c^2} \frac{\partial \phi}{\partial t} \right)
\\ &= \nabla\times\mathbf B - \frac 1 {c^2}\frac{\partial \mathbf E}{\partial t} =0
\end{align*}</script><p>我们得到了真空中的麦克斯韦方程组中的两个方程：</p>
<script type="math/tex; mode=display">
\nabla\cdot\mathbf E=0
\\ \nabla\times\mathbf B = \frac 1 {c^2}\frac{\partial \mathbf E}{\partial t}</script><p>结合上一节中的两个方程，我们得到了全部真空中的麦克斯韦方程。</p>
<h1 id="3-与粒子耦合的电磁场"><a href="#3-与粒子耦合的电磁场" class="headerlink" title="3.与粒子耦合的电磁场"></a>3.与粒子耦合的电磁场</h1><h2 id="3-1-电流密度"><a href="#3-1-电流密度" class="headerlink" title="3.1 电流密度"></a>3.1 电流密度</h2><p>我们下一步要做的事自然是考虑$S_{pf}$和$S_f$的耦合，但是在此之前，由于电磁场的项是用拉氏量密度表示的，所以我们也需要将$S_{pf}$也用拉氏量密度表示。</p>
<p>对多个粒子的系统：</p>
<script type="math/tex; mode=display">
\begin{align*}
S_{pf} &= -\int\sum_i q_iA_{\alpha}(t,\mathbf x_i)dx^{\alpha}
\\ &= -\int \sum_i q_iA_{\alpha}(t,\mathbf{x})\delta(\mathbf x-\mathbf x_i) dVdx^{\alpha}
\\ &= \int \mathscr L_{pf} d\Omega dt
\end{align*}</script><p>在进行下一步之前需要说明，这里的$S_{pf}$是场与所有粒子的耦合项的作用量，求和的每一项中$A_{\alpha}$采用的是在粒子的位置上的值。其原因是电磁场的作用是局域的，即$A_{\alpha}$只有沿着粒子的运动轨迹取值才会对运动方程有贡献。</p>
<p>我们可以定义电荷密度：</p>
<script type="math/tex; mode=display">\rho(t,\mathbf x)=\sum_i q_i\delta(\mathbf x-\mathbf x_i)</script><p>注意到$\int \rho dV=Q$，为系统中电荷总量，是洛伦兹不变量。这说明$\rho$与体积微元$dV$相乘为洛伦兹不变量，即它可以作为某个4-矢量的时间分量。再考虑$S_{pf}$：</p>
<script type="math/tex; mode=display">
\begin{align*}
S_{pf} &= -\int \rho A_{\alpha} dx^{\alpha}dV
\\ &= -\int \rho A_{\alpha}\frac{dx^{\alpha}}{dt}\frac 1 c d\Omega dt 
\end{align*}</script><p>对比上面的$\mathscr L_{pf}$定义，我们有：</p>
<script type="math/tex; mode=display">\mathscr L_{pf} = -\frac 1 c \rho A_{\alpha}\frac{dx^{\alpha}}{dt} = -\frac 1 c A_{\alpha}j^{\alpha}</script><p>其中</p>
<script type="math/tex; mode=display">j^{\alpha}=\rho\frac{dx^{\alpha}}{dt} = (\rho c,\mathbf j)</script><p>为四维电流密度矢量。由于$\rho$与时间具有相同变换规则，因此从其定义式可以得知四维电流密度矢量的确是一个4-矢量。其空间分量为$\mathbf j=\rho \mathbf v$，其物理意义为单位时间内通过单位截面的电荷量，即电流密度。需要说明的是，这里的速度$\mathbf v$并不是一定是某个单一粒子的速度，因为这里用的是点粒子的模型，并不阻止有多于一个粒子处在相同的位置而具有不同的速度。下面的推导可以说明$\mathbf v$的物理意义：</p>
<script type="math/tex; mode=display">
\begin{align*}
\rho \mathbf v &= \sum_i q_i\delta(\mathbf x-\mathbf x_i)\mathbf v
\\ &= \sum_i q_i\delta(\mathbf x-\mathbf x_i)\mathbf v_i
\\ &= \rho \frac{\sum q_i\delta(\mathbf x-\mathbf x_i)\mathbf v_i}{\sum q_i\delta(\mathbf x-\mathbf x_i)}
\\ &= \rho \frac{\sum q_i\mathbf v_i}{\sum q_i} \tag{on one point}
\end{align*}</script><p>这表明，$\mathbf v(\mathbf x_i)$实际上是这一点上速度关于电荷的加权平均。当然，实际上的粒子并不是点电荷，我们实际上是近似地取一个宏观小、微观大的邻域，在其中做加权平均。</p>
<h2 id="3-2-电磁场方程"><a href="#3-2-电磁场方程" class="headerlink" title="3.2 电磁场方程"></a>3.2 电磁场方程</h2><p>我们有了电磁场的拉氏量密度：</p>
<script type="math/tex; mode=display">\mathscr L = \mathscr L_f + \mathscr L_{pf} = -\frac 1 {4\mu_0c}F_{\alpha\beta}F^{\alpha\beta} - \frac 1 c j^{\alpha}A_{\alpha}</script><p>带入E-L方程，得到电磁场方程为：</p>
<script type="math/tex; mode=display">\frac{\partial F_{\mu\nu}}{\partial x_{\mu}} = \mu_0 j_{\nu}</script><p>（也可以像前两节一样用变分导出，结果是一样的）</p>
<p>利用电磁场张量的定义：</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial F_{\mu\nu}}{\partial x_{\mu}} &=\partial^{\mu}(\partial_{\nu}A_{\mu}-\partial_{\mu}A_{\nu})
\\ &= \partial_{\nu}\partial^{\mu}A_{\mu}-\partial^{\mu}\partial_{\mu}A_{\nu}
\\ &= -\partial^{\mu}\partial_{\mu}A_{\nu} =\mu_0 j_{\nu}
\end{align*}</script><p>（使用了洛伦兹规范）写成分量的形式：</p>
<script type="math/tex; mode=display">
\left(\frac 1 {c^2} \frac{\partial^2}{\partial t^2} - \nabla^2 \right)\phi = \frac{\rho}{\epsilon_0}
\\ \left(\frac 1 {c^2} \frac{\partial^2}{\partial t^2} - \nabla^2 \right)\mathbf A = \mu_0\mathbf j</script><p>用电场和磁场的表示为：</p>
<script type="math/tex; mode=display">
\nabla\cdot\mathbf E = \frac{\rho}{\epsilon_0}
\\ \nabla\times\mathbf B = \frac 1 {c^2}\frac{\partial \mathbf E}{\partial t} + \mu_0\mathbf j</script><p>至此，我们得到了麦克斯韦方程组中的全部方程。</p>
<h2 id="3-3-电荷连续性方程"><a href="#3-3-电荷连续性方程" class="headerlink" title="3.3 电荷连续性方程"></a>3.3 电荷连续性方程</h2><p>考虑电荷密度的定义：</p>
<script type="math/tex; mode=display">\rho = \sum_i q_i\delta(\mathbf x-\mathbf x_i(t))</script><p>我们有：</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \rho}{\partial t} &= \sum_i q_i \cdot -\frac{\partial \delta(\mathbf x-\mathbf x_i)}{\partial (\mathbf x-\mathbf x_i)}\frac{\partial \mathbf x}{\partial t}
\\ &= -\sum_i q_i \nabla\delta(\mathbf x-\mathbf x_i) \mathbf v_i
\\ &= -\nabla\left(\sum_i q_i\delta(\mathbf x-\mathbf x_i)\right)
\\ &= -\nabla\cdot\mathbf j
\end{align*}</script><p>即：</p>
<script type="math/tex; mode=display">\frac{\partial \rho}{\partial t} + \nabla\cdot\mathbf j = 0</script><p>这就是<strong>电荷连续性方程</strong>。它有明确的物理意义：<br>在一个小的区域$\Delta V$内，电荷量的变化率等于单位时间流入的电荷，即:</p>
<script type="math/tex; mode=display">\frac{dQ}{dt} = \int \frac{\partial \rho}{\partial t} dV = -\oint \mathbf j \cdot d\mathbf S = \int \nabla\cdot\mathbf j dV</script><p>满足电荷连续性方程表明电荷是守恒的，不会凭空出现或消失。</p>
<p>一般情况下，物理量$A$不一定守恒，其连续性方程为：</p>
<script type="math/tex; mode=display">\frac{\partial \rho_A}{\partial t} + \nabla\cdot\mathbf F_A = S_A</script><p>等式右边的$S_A$项表示$A$的源，即单位时间内产生的量。对矢量$\mathbf g$，则为：</p>
<script type="math/tex; mode=display">\frac{\partial \mathbf g}{\partial t} + \nabla\cdot\mathsf G = \mathbf{S_g}</script><p>此时矢量的通量$\mathsf G = \mathbf{vg}$为一个二阶张量。</p>
<h1 id="4-电磁场的能量和动量"><a href="#4-电磁场的能量和动量" class="headerlink" title="4.电磁场的能量和动量"></a>4.电磁场的能量和动量</h1><p>可以根据拉氏量密度，由诺特定理直接推出电磁场能量密度和动量密度，但是这里使用另一种方法。由能量守恒和动量守恒，电磁场的能量和动量的源就等于负的在电磁场中运动的粒子的能量和动量变化，由3.3节给出的连续性方程的一般形式，也可以得到能量和动量的表达式。</p>
<h2 id="4-1-能量密度与能流密度"><a href="#4-1-能量密度与能流密度" class="headerlink" title="4.1 能量密度与能流密度"></a>4.1 能量密度与能流密度</h2><p>在$\Delta V$区域内粒子的能量：</p>
<script type="math/tex; mode=display">\frac{dE}{dt} = \rho \Delta V(\mathbf E\cdot \mathbf v) = (\mathbf E\cdot \mathbf j)\Delta V</script><p>从而对电磁场：</p>
<script type="math/tex; mode=display">\frac{d\epsilon}{dt} + \nabla\cdot\mathbf P = -\mathbf E\cdot \mathbf j</script><p>而由麦克斯韦方程，</p>
<script type="math/tex; mode=display">\mathbf j = \frac 1 {\mu_0}\nabla\times\mathbf B - \epsilon_0\frac{\partial \mathbf E}{\partial t}</script><p>有：</p>
<script type="math/tex; mode=display">
\begin{align*}
-\mathbf E\cdot \mathbf j &= -\frac 1 {\mu_0}[\mathbf B\cdot(\nabla\times\mathbf E) - \nabla\cdot(\mathbf E\times\mathbf B)] + \frac 1 2 \epsilon_0\frac{\partial E^2}{\partial t}
\\ &= \frac 1 {\mu_0}\nabla\cdot(\mathbf E\times\mathbf B) + \frac 1 2 \epsilon_0\frac{\partial E^2}{\partial t} + \frac 1 {2\mu_0}\frac{\partial B^2}{\partial t}
\\ &= \frac{d\epsilon}{dt} + \nabla\cdot\mathbf P
\end{align*}</script><p>从而，电磁场的能量密度和能量通量（能流密度）为：</p>
<script type="math/tex; mode=display">
\epsilon = \frac 1 2 \epsilon_0 E^2 + \frac 1 {2\mu_0}B^2
\\ \mathbf P = \frac 1 {\mu_0} \mathbf E\times\mathbf B</script><h2 id="4-2-动量密度与应力张量"><a href="#4-2-动量密度与应力张量" class="headerlink" title="4.2 动量密度与应力张量"></a>4.2 动量密度与应力张量</h2><p>粒子的动量变化率即为其在电磁场中受的力，为：</p>
<script type="math/tex; mode=display">\frac{d\mathbf p}{dt} = (\rho\mathbf E + \rho\mathbf v\times\mathbf B)\Delta V = (\rho\mathbf E + \mathbf j\times\mathbf B)\Delta V</script><p>从而有：</p>
<script type="math/tex; mode=display">\frac{\partial \mathbf g}{\partial t} + \nabla\cdot\mathsf G = -(\rho\mathbf E + \mathbf j\times\mathbf B)</script><p>经过类似的推导，可以得到：</p>
<script type="math/tex; mode=display">
\mathbf g = \epsilon_0\mathbf E\times\mathbf B
\\ \mathsf G = -\mathsf T = -(\epsilon_0\mathbf E\mathbf E+\frac 1 {\mu_0}\mathbf B\mathbf B - \frac 1 2(\epsilon_0 E^2 + \frac 1 {\mu_0}B^2)\mathsf I)</script><p>（其中$\mathsf I$为单位张量）$\mathsf T$称为麦克斯韦应力张量。</p>
<p>我们可以考虑一下$\mathsf G$的物理意义：它表示电磁场的动量通量，即单位时间内通过单位面积的动量大小。而动量在时间上的变化率正是力，也就是说它可以被理解为作用在各方向的单位面积上的力，即压强和切向应力。<br><br>对稳恒电磁场，$\frac{\partial \mathbf g}{\partial t}=0$，则一个区域内带电粒子的受力（动量变化率）即为流入该区域的动量流，为：</p>
<script type="math/tex; mode=display">\mathbf F = -\int \nabla\cdot\mathsf G dV = \oint \mathsf T\cdot d\mathbf S</script><p>这一公式也可以用来计算电磁场之中的粒子的受力——前提是稳恒电磁场，且粒子并非是测试粒子，其自身产生的电磁场也必须计入考虑。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>电动力学笔记</category>
      </categories>
      <tags>
        <tag>物理</tag>
      </tags>
  </entry>
  <entry>
    <title>基于NoneBot的NG词语游戏插件</title>
    <url>/2019/07/07/NGWordGame-with-Nonebot/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h1 id="NoneBot"><a href="#NoneBot" class="headerlink" title="NoneBot"></a>NoneBot</h1><p>NoneBot是基于酷Q的一个QQ机器人框架，其基本介绍和使用参见其<a href="https://none.rclab.tk/">文档</a>。本段旨在补充一些目前在文档中还未点出的有关NoneBot的一些性质，它们在NG词语游戏插件的编写中是不可或缺的。</p>
<p>当QQ机器人接收到一条消息时，它会首先对消息进行parsing，解析出当前消息对应的指令和参数。随后，它会根据上下文——即CoolQ HTTP API中<a href="https://cqhttp.cc/docs/4.10/#/Post?id=%E4%BA%8B%E4%BB%B6%E5%88%97%E8%A1%A8">事件上报</a>的数据的字典，包含消息和发信人的信息——中的发信人信息来生成一个唯一的<code>ctx_id</code>。这个<code>ctx_id</code>的作用是标记仍然有效的命令会话（如果是开始运行收到的第一条信息，那么不会有可用的命令会话）。NoneBot指令是要通过命令会话和用户进行数据交互的，而这里的意义是让同一个命令会话只响应<code>ctx_id</code>相同的用户的输入，也就是说两个<code>ctx_id</code>不同的用户调用同一条指令的时候会产生两个命令会话分别根据他们输入的参数实现不同的操作，从而不会互相干扰。默认的<code>ctx_id</code>是对每个用户都唯一的，这显然不利于我们的实现——我们希望多个玩家参与到这个游戏中来，要让同一个命令会话响应所有人发出的消息。好在<code>ctx_id</code>的实现中允许我们给来自同一个群的所有消息赋予同样的<code>ctx_id</code>，这需要更改NoneBot的源码，将<code>nonebot\command\__init__.py</code>中525行：<br></p><figure class="highlight ini"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">ctx_id</span> = context_id(ctx)</span><br></pre></td></tr></tbody></table></figure><br>改为：<br><figure class="highlight reasonml"><table><tbody><tr><td class="code"><pre><span class="line">ctx_id = context<span class="constructor">_id(<span class="params">ctx</span>, <span class="params">mode</span>='<span class="params">group</span>')</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>如果没有获取到可用的命令会话，并且解析出来了消息对应的指令的话，那么将会创建一个新的命令会话，然后进行处理。至此我们可以暂时离开消息的解析和响应的层面，在处理命令的层面考虑机器人的逻辑。对于一个已经被正确识别的命令，命令会话将首先进入参数解析器arg_parser（没有arg_parser也可以），然后进入命令处理器。命令会话类<code>CommandSession</code>有几个属性和方法是需要用到的：</p>
<ul>
<li><code>_current_arg_text</code>：字符串，消息的纯文本部分，剥离了命令部分并去除前部分空格的消息。</li>
<li><code>_state</code>：字典类型，用于存储希望被保存在会话中的局部变量。</li>
<li><code>send()</code>：文档中也介绍过，向当前会话发送信息（群聊或私聊），传入参数<code>at_sender=True</code>可以在消息首部@发送者。</li>
<li><code>pause()</code>：正常情况下一个命令会话会在响应完用户的一条消息后就过期，但是如果调用了<code>pause()</code>，那么命令会话会被暂停并保存，接收到下一条<code>ctx_id</code>相同的用户（考虑到上一段的修改，即同一个群里的下一条消息或来自同一个人的私聊）时会被重新运行一次。</li>
<li><code>is_first_run</code>：bool类型，如果会话是第一次创建则为<code>True</code>，如果会话是调用了<code>pause()</code>被重新调起则为<code>False</code>。</li>
</ul>
<p>以上并非是<code>CommandSession</code>提供的全部接口，但是对于实现NG词语游戏的插件已足够。</p>
<h1 id="NG词语游戏的实现——基于状态机"><a href="#NG词语游戏的实现——基于状态机" class="headerlink" title="NG词语游戏的实现——基于状态机"></a>NG词语游戏的实现——基于状态机</h1><p>NG词语游戏出自漫画《辉夜大小姐想让我告白～天才们的恋爱头脑战～》，规则为参与游戏的每个玩家为下一个玩家设置一个“NG词”， 设置完成后展示之，使得除了自己的每个人都能知道自己的NG词。之后所有玩家进行自由谈话，说出自己的NG词的玩家判负，退场。直至只剩一人为止。</p>
<p>在命令会话中实现的操作是获取局部变量-&gt;根据不同的游戏进程对用户的输入做出不同的回应-&gt;写回局部变量，这很容易让人联想到状态机，而NoneBot提供的框架对于基于状态机的实现也是很方便的，因此我们选择基于状态机实现。</p>
<p>游戏状态有三个：玩家注册状态，设置NG词状态，监听状态；状态跳转也是很简单的注册-&gt;设置-&gt;监听。状态机类<code>NGFSM</code>存储所有玩家的列表，每次接收发送者的信息，然后把要向会话（也就是群聊）和要私聊发送的信息返回给命令处理器。最初我是把状态机直接写在了命令处理器里，相比之下这样的交互方式可能有些冗杂，但是我认为游戏的逻辑实现部分和更底层一些的通信部分不应该耦合在一起，因此花了一些功夫把状态机单独提出来一个类。下面介绍每个状态的实现：</p>
<h2 id="注册状态"><a href="#注册状态" class="headerlink" title="注册状态"></a>注册状态</h2><p>这个状态要接收每个希望参与游戏的玩家的注册，规定注册需要回复<code>sign in</code>，响应所有注册的用户的回复，根据上下文记录QQ号、称呼信息，加到玩家列表中。另外，响应超级用户发出的<code>stop signing</code>，结束注册，状态跳到设置状态。</p>
<h2 id="设置状态"><a href="#设置状态" class="headerlink" title="设置状态"></a>设置状态</h2><p>由于游戏性质，设置NG词不能在群聊中进行，而是要和机器人私聊设置。这为实现带来了一个难点——设置NG词的命令会话和游戏的会话不能是一个，那么它们之间该如何通信呢？我的解决方法是单独设置另外一个命令用于设置NG词，这个命令响应玩家的设置之后将NG词存储在磁盘上，当所有玩家设置完成之后，由超级用户手动在群聊中发出<code>check</code>指令通知游戏会话已设置完毕，然后从磁盘中读取设置的数据，从而实现IO的同步。当然，这一过程可以足够用户友好——只要在进入设置状态前把群聊的号码记录到磁盘上，就可以在所有玩家都设置完之后主动调用CQHTTP API，自动向群聊里发送一条提醒消息。<code>check</code>之后，读出所有玩家的NG词，进入监听状态。</p>
<h2 id="监听状态"><a href="#监听状态" class="headerlink" title="监听状态"></a>监听状态</h2><p>这一状态中只需要监听玩家发出的消息，只要有人的消息中包含自己的NG词就向会话发出提醒信息，判该玩家出局，然后继续监听，直至只剩一人。</p>
<p>项目代码已上传到GitHub仓库<a href="https://github.com/Li-mz/NGWordGame">NGWordGame</a>。</p>
</body></html>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>为什么我们不该相信阴谋论</title>
    <url>/2020/02/08/bayes-theorem-and-occams-razor/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>最近在B站偶然看到了一个介绍地平论的视频，这倒不是什么新鲜事，地平论也不是我第一次听说，不过下面称赞他们的独立思考能力和质疑精神的评论还是让我惊掉了下巴。地平论，顾名思义，主张地球不是个球体而是个圆盘，“地盘”的中心是北极，而南极洲是环绕圆盘外围的一圈冰墙。日月是在地盘上面绕转的两道光束，万有引力也不存在，地球在以$9.8m/s^2$的加速度向上加速运动，重力其实是地球系中的惯性力（草）。至于那些地球的照片等等，也都是伪造出来的。至于各国政府为什么要这么做，这大概隐藏着不可告人的惊 天 阴 谋吧（大草原）。</p>
<p><img src="Flat_earth.png" alt="“地盘”图示"></p>
<div align="center">     
    所谓“地盘”
</div>

<p>当然这种not even wrong的东西倒并不值得太认真对待，不过我们可以带着些“质疑精神”，试试仅凭自己的眼睛能不能反驳地平论。答案是可以的。我们知道不同纬度处看到的北极星的高度角是不同的，且高度角就等于地理纬度。（当然，这要基于地球是个球）</p>
<p><img src="polaris_altitude.png" alt="北极星高度角图示"></p>
<div align="center">     
    遥远的星光可近似看作平行光，北极星处于天北极附近，根据简单的几何推导就能看出北极星的高度角和地理纬度l相等
    <br><br>
</div>

<p>地平论无法解释为什么不同纬度看到的星空是不一样的。就算他们可以声称星星其实离我们非常近，以至于在地盘上不同位置观测就会有不同的高度角，但在有限大小的地盘上高度角一定有一个大于零的最小值。换言之，只要地平论者愿意花钱去赤道看看高度角为零的北极星，他这套理论自然会不攻自破。</p>
<p><img src="flat_earth_polaris.png" alt="地盘上北极星的高度角"></p>
<div align="center">     
    在地盘上的任何地点观测北极星，其高度角都不可能为零
    <br><br>
</div>

<p>当然反驳地平论本身并不是这篇文章主要要说的事。我们的确有方法仅凭自己的观测的推理证实地球是圆的，但真的有必要持怀疑精神到这种程度吗？或者说，即使我们没法靠自己证实地球是圆的，在拥有相同的信息的前提下，我们是否有依据选择一种理论而排斥另一种呢？</p>
<p>我们先来复习一下概率论。条件概率$P(A|B)$指的是事件B发生的前提下A发生的概率。显然我们有A和B同时发生和“B发生且B发生的前提下A发生”是一个意思，那么我们有：</p>
<script type="math/tex; mode=display">P(A|B)P(B)=P(AB)=P(B|A)P(A)</script><p>稍微变换一下就有<strong>贝叶斯定理</strong>：</p>
<script type="math/tex; mode=display">P(A|B)=\frac{P(B|A)P(A)}{P(B)}</script><p>我们把它写得物理一点：</p>
<script type="math/tex; mode=display">P(M|D)=\frac{P(D|M)P(M)}{P(D)}</script><p>$M$代表模型，而$D$代表观测到的数据。这时贝叶斯公式中各项的意义就明了了：  </p>
<ul>
<li>左边的$P(M|D)$称作<strong>后验</strong>(posterior)，表示在分析了观测数据后我们得出的模型$M$正确的概率</li>
<li>$P(D|M)$称作<strong>似然</strong>(likelihood)，代表模型$M$下预测的观测数据的分布</li>
<li>$P(M)$称作<strong>先验</strong>(prior)，代表我们在观测之前已有的对模型的知识</li>
<li>$P(D)$称作evidence，描述的是观测到数据$D$的概率，这一项作为归一化系数出现，在贝叶斯分析中通常不被考虑（因为我们感兴趣的是不同模型的后验，这时evidence总是个常数）。</li>
</ul>
<p>一般情况下贝叶斯公式会被用作估计模型的参数的后验分布$P(M,\boldsymbol{\theta}|D)$，这时上面的$P(M)$可以看做$P(M,\boldsymbol{\theta})$把参数$\boldsymbol{\theta}$积分掉的边缘分布。</p>
<p>现在我们假设有了数据$D$，模型$M_1$和$M_2$都可以用于解释它。对$M_1$和$M_2$我们没有主观的偏好，因此取相同的先验$P(M_1)=P(M_2)$。它们的<strong>概率比</strong>(odds ratio)就成为：</p>
<script type="math/tex; mode=display">O_{21}=\frac{P(M_2|D)}{P(M_1|D)}=\frac{P(D|M_2)}{P(D|M_1)}</script><p>如果模型$M_1$只有一个参数$\mu$，可以取$\mu$的先验为在$-\Delta_{\mu}/2$到$\Delta_{\mu}/2$之间的均匀分布。假设似然函数可以用中心为使似然取最大值的$\mu=\mu^0$，方差为$\sigma_\mu^2$的高斯分布来描述。一般情况下先验只能给出一个大致的范围，而数据能告诉我们更多关于参数的信息，也就是说$\sigma_{\mu}\ll\Delta_{\mu}$。我们就有：</p>
<script type="math/tex; mode=display">P(D|M_1)=\int P(D|M_1,\mu)p(\mu) \mathrm{d}\mu \sim L^0(M_1)\frac{\sigma_\mu}{\Delta_\mu}</script><p>这里$L^0(M_1)=\max(P(D|M_1,\mu))$。</p>
<p>注意到$\sigma_\mu/\Delta_\mu \ll 1$，这表明我们<strong>每在模型中增加一个独立参数，都会在$P(D|M)$中乘上一个远小于1的系数</strong>。如果$M_2$有两个独立参数$p$和$q$，那么：</p>
<script type="math/tex; mode=display">O_{21} \sim \frac{L^0(M_2)}{L^0(M_1)}\frac{(\sigma_p/\Delta_p)(\sigma_q/\Delta_q)}{\sigma_\mu/\Delta_\mu}</script><p>如果$M_1$和$M_2$对数据的解释能力相近，即$L^0(M_1)\sim L^0(M_2)$，那么就有$O_{21}\ll 1$，我们就有很大把握选择$M_1$而拒绝$M_2$。</p>
<p>这一原则可以被简单地概括为，<strong>对同样能解释观测到的现象的模型，我们总是选择所作的假设更少的的那个</strong>。或者说，“若非必要，勿增实体”——没错，这正是大名鼎鼎的<strong>奥卡姆剃刀</strong>。</p>
<p>现在回到标题，为什么我们不该相信阴谋论？答案不证自明——阴谋论并没有提供更符合的解释，却凭空多出了相当多的假设，这也就使它的后验概率变得低得多。阴谋论最多做到自圆其说，但这并不是终点，为了质疑而产生的质疑也不会更能解释问题。</p>
</body></html>]]></content>
      <categories>
        <category>科普</category>
      </categories>
      <tags>
        <tag>科普</tag>
      </tags>
  </entry>
  <entry>
    <title>如何部署一个转推bot</title>
    <url>/2021/08/24/deploy-t2b-bot/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>经过一段时间的运行和升级，转推bot目前已经达到较为平稳的状态。虽然还没有打包上PyPI的勇气，不过至少拿来直接用应该是没问题了。本教程针对有想法自己部署一个转推bot（将你关注的推特自动转发到B站动态）的人给出具体的操作指导。</p>
<h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><p>为了使转推bot能够工作，你需要有：</p>
<ul>
<li><strong>一个可以正常发动态的B站账号</strong>：不会有人没有吧</li>
<li><strong>一个推特开发者账号</strong>：只要你有推特账号，就可以去推特的开发者平台申请成为开发者账号以获得调用推特API的权限。具体的申请流程和注意事项网上有很多教程，这里就不赘述了。需要强调的是推特开发者账号的申请是要经过人工审核的，且申请失败就不能再申请了，因此务必要慎重。</li>
<li><strong>一个可以访问到不存在网站的神奇主机</strong>：懂的都懂。需要配置好Python3.7+环境。</li>
</ul>
<h2 id="部署流程"><a href="#部署流程" class="headerlink" title="部署流程"></a>部署流程</h2><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><p>首先将twitter2bilibili代码clone到本地：<br></p><figure class="highlight crmsh"><table><tbody><tr><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">git</span>@github.com:MichiyamaKaren/twitter2bilibili.git</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>进入twitter2bilibili目录，安装依赖的Python库：<br></p><figure class="highlight cmake"><table><tbody><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> -r requirements.txt</span><br></pre></td></tr></tbody></table></figure><p></p>
<h3 id="填写配置项"><a href="#填写配置项" class="headerlink" title="填写配置项"></a>填写配置项</h3><p>创建<code>config.py</code>文件，这是整个项目的配置文件。需要填写的配置项可以参照<code>config_example.py</code>文件</p>
<p><img src="config-example.png" alt="config_example.py的截图"></p>
<p>其中以BILI开头的三项为调用B站API所需要的身份认证信息，你可以在<a href="https://www.moyu.moe/bilibili-api/#/get-credential">bilibili-api的文档</a>中看到如何获取。</p>
<p><strong>须知</strong>：bilibili-api所要求的这三个key是长期有效，但不是永久有效的。在网页端退出登录后，身份认证将会过期（直接关闭网页则不会），此时如果继续使用旧的key则会出错，会由接口返回错误代码-6。</p>
<p><code>TWITTER_BEARER_TOKEN</code>是推特开发者账号的Bearer Token，在开发者平台上创建应用即可获取。</p>
<p><code>subscribe_users</code>记录了要转推的推特账号，每一项代表一名用户，<code>username</code>为推特用户名（不是昵称），<code>name</code>为转推bot要显示的名字。</p>
<p>最后，<code>display_timezone</code>是转推bot要显示时间的时区，其应为<code>pytz</code>库所接受的时区格式。</p>
<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>运行<code>main.py</code>文件，即可使转推bot开始运行。日志将会保存到<code>t2b.log</code>文件中。</p>
<h2 id="个性化调整"><a href="#个性化调整" class="headerlink" title="个性化调整"></a>个性化调整</h2><p>如果你熟悉Python，你可以通过继承<code>T2BForwarder</code>类对转推bot的行为进行一些个性化修改。</p>
<h3 id="T2BForwarder类介绍"><a href="#T2BForwarder类介绍" class="headerlink" title="T2BForwarder类介绍"></a><code>T2BForwarder</code>类介绍</h3><p><code>T2BForwarder</code>类负责处理接收到的推文（定义在<code>tweet.py</code>中<code>Tweet</code>对象），将其发送到B站动态。具体地说，其中包含了一个<code>TwitterListener</code>对象，负责通过推特API获取关注的推特用户的推文。而其<code>handler</code>方法就作为这个listener的回调函数，每当listener收到一条推文，它就会创建一个<code>Tweet</code>对象，交由<code>handler</code>处理。</p>
<p>不过事实上，处理推文的逻辑并不在<code>handler</code>方法之中。B站动态区的操作有三种形式：发动态、转发动态、发评论，因此<code>handler</code>会调用<code>get_forward_action</code>方法，这会根据接收到的<code>Tweet</code>对象内容判断要进行的行为，然后调用<code>on_send_dynamic</code>、<code>on_repost</code>或<code>on_comment</code>方法。发动态、转发动态或发评论的具体行为就在其中实现。</p>
<p>因此，如果要改变转推行为，那么应该重载的就是<code>get_forward_action</code>、<code>on_send_dynamic</code>、<code>on_repost</code>和<code>on_comment</code>方法。查看项目代码可以发现<code>get_forward_action</code>返回的不仅有行为（action，字符串），也有一个<code>dynamic_id</code>，而后三个方法接收的参数都是<code>tweet</code>和<code>dynamic_id</code>。这个<code>dynamic_id</code>参数就是用来实现B站动态的转发和评论，以及通过链接对动态进行引用的。如果需要更改接口，那<code>handler</code>方法也要被重载。</p>
<p>另外可重载的是<code>query</code>属性（通过<code>@property</code>装饰器定义），这是发送给推特Filtered Stream的query内容，描述了要请求的<code>Tweet</code>对象的哪些域。如果你的新功能需要请求不同的域，那么你会需要修改query。query的具体格式和含义见推特开发者文档。</p>
<hr>
<p>如果你真的按照这篇教程用我的代码成功部署了自己的转推bot，请标注出<a href="https://github.com/MichiyamaKaren/twitter2bilibili">项目地址</a>。另外也请顺手给这个仓库点个star，这对我不是很重要，但还是求求你了。</p>
</body></html>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>宇宙距离阶梯</title>
    <url>/2019/05/06/distance-ladder/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><blockquote>
<p>本文来自<strong>初光天文科普工作室</strong>，作者为本人。<a href="https://mp.weixin.qq.com/s?__biz=Mzg3NTE1NjczNg==&amp;mid=2247483829&amp;idx=1&amp;sn=713804a7121f7f3656f1eb27e8358855&amp;chksm=cec485daf9b30ccca0cfcac3c73ab087368147ec69d4fe0c08ca8dc03aa2848b4b800dd142c8&amp;scene=0&amp;xtrack=1&amp;key=12a4c5f4665589b6e94ca0c1c30d7798ef98e5d9aa61bffff2f38ba93fef7b48b1606a877f6743898afe0350aa3e43f5ac555cb2870f1ce457c96d63817247fefaabbc6e908c7a5e78ee6d40bc6a4163&amp;ascene=1&amp;uin=OTI2NzcxMjE5&amp;devicetype=Windows+10&amp;version=62060739&amp;lang=zh_CN&amp;pass_ticket=B%2FUHcekpUTBQzDCkBv2i%2FYkVx4%2FTgAii0dVcQfh2%2B%2BkHOXsbJuQgAaa7HfEWpoVC">原文链接</a><br><img src="firstlight.jpg" alt="微信公众号Firstlight_USTC"></p>
</blockquote>
<p>即使没有亲眼见过满天繁星，你可能也听说过这样一个事实：即使是太阳系外离我们最近的恒星，与我们的距离也有4光年之遥（一光年定义为光传播一年走过的距离），而我们肉眼所见的很多恒星与我们的距离都可以达到数千光年。银河系外的星系的距离则又更上一层楼，人们甚至可以探测到数百亿光年远的星系发来的光。</p>
<p>在感叹于宇宙的辽阔的同时，你有没有想过我们是如何确定遥远的天体与我们之间的距离的呢？这并不是一个简单的问题——我们没法制造出来一个巨大的尺，把天体和地球放在它的两端；也不能向天体发射一束激光，测量它反射回地球需要多长时间（不过对于太阳系内的行星，这一操作是可行的）。事实上，我们从天体接收到的信息也几乎只有它发出的光。下面，让我们看看天文学家利用了哪些方法来测量天体的距离。</p>
<h1 id="三角视差法"><a href="#三角视差法" class="headerlink" title="三角视差法"></a>三角视差法</h1><p>如下图所示，一个位置固定的物体，我们从不同的位置向它看去，视线方向也会不同，这种现象被称为<strong>视差</strong>。</p>
<p><img src="parallax_1.png" alt="视差图示"></p>
<div align="center">     
    视线方向的差异称为视差
</div>

<p> 那么视差和天体距离又有什么关系呢？我们知道，地球是绕太阳运动的，因此在一年之中的不同时刻观测同一颗恒星也会有视差现象，称为<strong>周年视差</strong>。参考下图，我们可以近似地得到周年视差$\theta$与距离的关系：</p>
<script type="math/tex; mode=display">\theta = \frac{1AU}{D}</script><p> 其中$1AU$是一天文单位，约等于$1.5\times 10^{11}m$，它代表者地球与太阳的平均距离。</p>
<p> <img src="parallax_2.png" alt="周年视差"><br> </p><div align="center">  
     周年视差示意图
 </div><p></p>
<p>这就告诉了我们一种测量距离的方法。</p>
<p>基于上面的讨论，我们可以定义一个新的距离单位——秒差距(parsec, 简记为pc)。距离我们1秒差距的恒星的周年视差为1角秒，它等于1度的1/3600。经过简单的计算可以得出，1秒差距约等于3.26光年。在天文学中，秒差距是一个比较常用的距离单位。</p>
<h1 id="标准烛光"><a href="#标准烛光" class="headerlink" title="标准烛光"></a>标准烛光</h1><p>上面介绍的三角视差法可以较为精确地确定恒星离我们的距离，但是这并不是这个问题的全部答案。我们从上面的讨论中也可以看见，天体距离我们越远，它的周年视差就越小。那么对于远到一定程度的天体，我们将无法分辨出来它们的周年视差，自然三角视差法也就不能用于测量距离了。事实上，目前用三角视差法测距，一般几百pc就是极限了。那么对于更远的天体，我们该怎么确定它的距离呢？</p>
<p>在了解下面要介绍的方法之前，让我们先来考虑这样一个问题。在日常生活中，很多人应该都会有这样的经验，一个发光的物体，比如蜡烛，在它离我们比较近的时候会感觉比离我们远的时候更亮。这是因为当它单位时间内辐射的能量（称为<strong>光度</strong>）是一定的，离我们更远时，光会分散到更广的面积上，那么平均下来各处的亮度就会变弱。经过定量的分析和计算，我们发现<strong>观测到的亮度和距离的平方成反比</strong>。</p>
<p><img src="mag_and_distance.png" alt="从恒星发出的光向四面八方传播"></p>
<div align="center">
    从恒星发出的光向四面八方传播
</div>

<p>你可能已经知道了为什么要特意进行上面的讨论了。我们可以测量出到达望远镜的星光的亮度，如果通过其他手段可以确定恒星的光度，那么我们就可以计算出恒星的距离。已知其光度的天体，我们称之为“<strong>标准烛光</strong>”。</p>
<p>有很多种标准烛光用于距离测量。其中一种是造父变星，这是一种亮度周期性变化的恒星，在对这一类天体的观测和研究中，我们发现它<strong>亮度变化的周期的对数是和它的光度的对数成正比的</strong>，因此我们可以通过观测一个星系中的造父变星来确定这个星系距离我们的位置。我们所熟知的北极星其实就是一颗造父变星。其他的，比如天琴座RR变星，Ia型超新星等，也被作为标准烛光来确定或近或远的距离，这里就不一一介绍了。</p>
<p><img src="plrelnceph.png" alt="周光关系"></p>
<div align="center">
    第一型，第二型造父变星和天琴座RR变星的周光关系，注意图中是对数坐标。
    图源：http://www.atnf.csiro.au/outreach/education/senior/astrophysics/variable_cepheids.html
</div>

<h1 id="宇宙学红移"><a href="#宇宙学红移" class="headerlink" title="宇宙学红移"></a>宇宙学红移</h1><p>在上世纪初，哈勃通过分析河外星系的光谱发现，大多数河外星系的光谱都是有红移的，即接收到的谱线的波长比本来的波长更长。如果把这种红移当做是星系在远离我们运动的多普勒效应导致的结果的话，推算出星系远离我们的速度大致与距离成正比，这被称做哈勃关系，他计算的结果如下图所示：</p>
<p><img src="cosmological_redshift.jpg" alt="哈勃关系"></p>
<div align="center">
    哈勃关系 | 图源： A relation between distance and radial velocity among extra-galactic nebulae, E. P. Hubble
</div>

<p>现在的宇宙学告诉我们，这种红移并非是由于普通意义上星系在远离我们运动，而是由于<strong>宇宙膨胀</strong>导致的。根据广义相对论的计算，我们可以得到宇宙学红移的表达式。在近距离内，它可以近似成哈勃观测得到的正比关系。对于很远的星系，宇宙学红移也是一种测量距离的手段。</p>
<h1 id="结语——宇宙距离阶梯"><a href="#结语——宇宙距离阶梯" class="headerlink" title="结语——宇宙距离阶梯"></a>结语——宇宙距离阶梯</h1><p>上面简单地介绍了三种不同的距离测量方式，但也只是讨论了最基本的概念，实际上的距离测量方法细化来看也各有其不同的原理，只是无法在本文中一一介绍了。</p>
<p><img src="distance_ladder.JPG" alt="宇宙距离阶梯"></p>
<div align="center">
    宇宙距离阶梯 | 图源：向守平《天体物理概论》
</div>

<p>你也许会困惑，上面介绍的一些方法中，确定这个方法的有效性的过程中本来就利用了距离（比如，确定造父变星的周光关系时，我们不能直接得到它的光度，而是要根据观测到的亮度和距离推算光度），如果本来就知道距离的话为什么还要发展一个新的方法呢？事实上，各种测量方法都有其适用范围和限制，我们通过一个近距离上可用的方法来发现和确定下一个在更远的距离上可用的方法，如此一级一级推下去，这一系列方法有个形象的名字——<strong>宇宙距离阶梯</strong>。</p>
<p>在这或简单或复杂的阶梯上一层层攀登的过程，也恰似人类认知自身所处的宇宙的过程。我们可能一生都局限在地球这一微不足道的行星之上，但是仍可以用科学的方法去探索浩瀚的宇宙。</p>
</body></html>]]></content>
      <categories>
        <category>科普</category>
      </categories>
      <tags>
        <tag>科普</tag>
        <tag>天文</tag>
      </tags>
  </entry>
  <entry>
    <title>使用selenium下载eplus直播存档视频</title>
    <url>/2021/08/05/download-eplus-video/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>近日看了少歌#3的线上配信，想把留档的视频文件保存下来方便日后再演，奈何家里的宽带实在拉胯，录屏是没可能了，于是只能想办法把视频文件爬下来。</p>
<p>Eplus的反爬措施比较严格，每次建立会话时会生成两个key放在请求的cookie里，另外每隔一段时间会话的key就会失效，因此手动复制cookie的方法也不可行。无力分析混淆js代码的我最终还是选择了笨方法——直接用selenium下载。</p>
<p><img src="selenium-yyds.png" alt=""></p>
<p>在开始下载之前，我们还需要做一些准备工作：</p>
<h2 id="视频作为流媒体"><a href="#视频作为流媒体" class="headerlink" title="视频作为流媒体"></a>视频作为流媒体</h2><p>和众多流媒体平台一样，eplus传输视频文件的方式是将整个视频分割成多个小片段，加载视频时不断从服务器下载这些片段文件。片段文件的后缀名为ts，在这里就是一些长度只有几秒的短视频。所有这些片段文件的路径被存储在一个m3u8文件中。因此，我们首先需要找到网站加载视频所使用的m3u8文件：</p>
<p><img src="all-m3u8.png" alt=""></p>
<p>使用F12开发者工具查看网站发出的网络请求，并筛选出所有m3u8文件，可以看到这里有不止一个文件。查看第一个m3u8文件的内容，发现其记录的是不同清晰度的m3u8文件的路径。为了保存用自然是要下载清晰度最高的1080p，查看下面对1080p的m3u8的请求。由于是get，直接把url复制出来新开个标签页就可以下载了。</p>
<p><img src="1080p-m3u8.png" alt=""></p>
<p>保存下来m3u8文件之后可以看到里面存储的ts文件的路径都是相对路径，为了找到下载的url，再在开发者工具中查看对ts文件的请求，把url复制下来即可。</p>
<p><img src="all-ts.png" alt=""></p>
<h2 id="下载ts文件"><a href="#下载ts文件" class="headerlink" title="下载ts文件"></a>下载ts文件</h2><p>这一部分比较简单（selenium做了所有复杂的部分），因为eplus回放甚至连登陆都不需要，只需要请求播放url后再挨个get每个ts文件的地址就可以了。不过缺点在于由于eplus不支持同时建立多个连接，因此没法进行多进程下载。另外需要说明的是我下载的时候隔一段时间就会报timeout的错，不知道是网络问题还是反爬虫机制的作用。好在分段传输方式天然地支持了断点续传，因此只需要重启一下就可以了，我们一直以来的努力不会全部木大。</p>
<p>这一部分的代码在下面：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_m3u8</span>(<span class="params">filename</span>):</span></span><br><span class="line">    ts_paths = []</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">            line = line.strip()</span><br><span class="line">            <span class="keyword">if</span> line.endswith(<span class="string">'.ts'</span>):</span><br><span class="line">                ts_paths.append(line)</span><br><span class="line">    <span class="keyword">return</span> ts_paths</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">outdir = <span class="string">'ts_video'</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(outdir):</span><br><span class="line">    os.mkdir(outdir)</span><br><span class="line"></span><br><span class="line">ts_paths = parse_m3u8(<span class="string">'video.m3u8'</span>)</span><br><span class="line">view_url = <span class="string">'https://live.eplus.jp/ex/player?ib=xxx'</span>    <span class="comment"># eplus的视听url</span></span><br><span class="line">ts_host_url = <span class="string">'https://vod.live.eplus.jp/out/v1/xxx/'</span>  <span class="comment"># 下载ts文件的url</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_ts</span>(<span class="params">driver:webdriver.Chrome, ts_path</span>):</span></span><br><span class="line">    path = os.path.join(outdir, ts_path)</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(path):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    driver.get(ts_host_url+ts_path)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    options = webdriver.ChromeOptions()</span><br><span class="line">    prefs = {<span class="string">'profile.default_content_settings.popups'</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">'download.default_directory'</span>: os.path.abspath(outdir)}  <span class="comment"># 将chrome driver的默认下载地址设定为outdir</span></span><br><span class="line">    options.add_experimental_option(<span class="string">'prefs'</span>, prefs)</span><br><span class="line">    options.add_argument(<span class="string">'--headless'</span>)    <span class="comment"># 不显示图形界面</span></span><br><span class="line"></span><br><span class="line">    driver = webdriver.Chrome(</span><br><span class="line">        executable_path=<span class="string">'chromedriver.exe'</span>, chrome_options=options)</span><br><span class="line">    driver.get(view_url)</span><br><span class="line"></span><br><span class="line">    downloading = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> path <span class="keyword">in</span> tqdm(ts_paths):</span><br><span class="line">        <span class="keyword">if</span> download_ts(path):</span><br><span class="line">            downloading += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> downloading == <span class="number">10</span>:</span><br><span class="line">            sleep(<span class="number">60</span>)</span><br><span class="line">            downloading = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        main()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f'Exception <span class="subst">{e}</span> occured, restarting...'</span>)</span><br><span class="line">        os.system(<span class="string">'del *.crdownload'</span>)  <span class="comment"># 删除chrome临时下载文件</span></span><br><span class="line">        sleep(<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="后处理"><a href="#后处理" class="headerlink" title="后处理"></a>后处理</h2><p>下载完所有ts文件之后，还需要将其拼接成一整个文件。在Windows下，只需进入下载ts文件的目录（即上面代码中的<code>outdir</code>），并执行命令：</p>
<figure class="highlight vim"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">copy</span> /<span class="keyword">b</span> *.<span class="keyword">ts</span> total.<span class="keyword">ts</span></span><br></pre></td></tr></tbody></table></figure>
<p>再使用ffmpeg转码为mp4：</p>
<figure class="highlight stata"><table><tbody><tr><td class="code"><pre><span class="line">ffmpeg -i <span class="keyword">total</span>.ts -vcodec <span class="keyword">copy</span> -acodec <span class="keyword">copy</span> <span class="keyword">total</span>.mp4</span><br></pre></td></tr></tbody></table></figure>
<p>即可得到mp4格式的完整视频文件。</p>
</body></html>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>Fisher矩阵在引力波天文学中的应用</title>
    <url>/2021/04/15/fisher-matrix-in-gw-astronomy/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h2 id="Fisher矩阵的导出"><a href="#Fisher矩阵的导出" class="headerlink" title="Fisher矩阵的导出"></a>Fisher矩阵的导出</h2><p>对一次引力波事件，引力波探测器给出的strain data $s$包括真实引力波信号$h_0$和噪声$n$，即$s=h_0+n$。</p>
<p>认为<strong>噪声是高斯的</strong>，即其概率分布</p>
<script type="math/tex; mode=display">p(n) \propto e^{-\frac{1}{2}(n,n)}</script><p>其中内积定义为</p>
<script type="math/tex; mode=display">(h,g) = 4\mathrm{Re} \int \frac{h(f)g^*(f)}{S_n(f)}\mathrm{d}f</script><p>$S_n(f)$是探测器噪声的功率谱，$\left&lt; n(f)n(f’)\right&gt; = \frac{1}{2}S_n(f)\delta(f-f’)$。</p>
<p>从而可以写出似然函数：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    L(s|\boldsymbol{\theta}) &\propto e^{-\frac{1}{2}(s-h(\boldsymbol{\theta}), s-h(\boldsymbol{\theta}))}
    \\&= \exp\left\{-\frac{1}{2} \left[(h_0-h(\boldsymbol{\theta}),h_0-h(\boldsymbol{\theta})) +2(h_0-h(\boldsymbol{\theta}),n) + (n,n) \right] \right\}
    \\&\approx \exp\left\{-\frac{1}{2} (h_0-h(\boldsymbol{\theta}),h_0-h(\boldsymbol{\theta})) \right\}
\end{aligned}</script><p>最后一步取了高SNR近似，即认为$n\ll h$。</p>
<p>在真实参数的附近展开$h(\boldsymbol{\theta})$，</p>
<script type="math/tex; mode=display">h(\boldsymbol{\theta}) = h_0 + \frac{\partial h}{\partial \theta_i} \Delta\theta_i + o(\Delta \theta_i)</script><p>从而似然函数</p>
<script type="math/tex; mode=display">
\begin{aligned}
    L(s|\boldsymbol{\theta}) &\propto \exp\left\{-\frac{1}{2} (h_0-h(\boldsymbol{\theta}),h_0-h(\boldsymbol{\theta})) \right\}
    \\&= \exp\left\{-\frac{1}{2} \left(\frac{\partial h}{\partial \theta_i},\frac{\partial h}{\partial \theta_j}\right) \Delta\theta_i\Delta\theta_j \right\}
\end{aligned}</script><p>将</p>
<script type="math/tex; mode=display">\Gamma_{ij} = \left(\frac{\partial h}{\partial \theta_i},\frac{\partial h}{\partial \theta_j}\right)</script><p>定义为<strong>Fisher矩阵</strong>。</p>
<p>从而$L(s|\boldsymbol{\theta}) \propto \exp\left{-\frac{1}{2} \Gamma_{ij} \Delta\theta_i\Delta\theta_j \right}$，是协方差矩阵为$\Gamma^{-1}$的正态分布。如果选定先验分布为均匀分布，使用贝叶斯方法估计出的参数的后验分布也就是协方差矩阵为$\Gamma^{-1}$的正态分布。</p>
<p>上面的推导给出了估计根据探测器接收到的引力波信号对参数进行限制的能力的方法：计算波形对参数的微分，得到Fisher矩阵，而对齐求逆就得到近似的参数的协方差矩阵。并且我们知道，在真实波形的参数附近，参数的概率分布近似为正态分布。对多个探测器组成的探测器网络，Fisher矩阵为每个探测器的Fisher矩阵的和。</p>
<p>关于Fisher矩阵的推导和含义，更严谨的讨论见<a href="https://arxiv.org/abs/gr-qc/9209010">gr-qc/9209010</a>（Fisher矩阵给出频率论视角的方差的推导，即由于不同的噪声，最大似然估计的参数的变化）和<a href="https://arxiv.org/abs/gr-qc/0703086">gr-qc/0703086</a>（以三种不同的方式给出Fisher矩阵的结果，并讨论了其可应用的范围及需要注意之处）。</p>
<h2 id="推导定位天区面积公式"><a href="#推导定位天区面积公式" class="headerlink" title="推导定位天区面积公式"></a>推导定位天区面积公式</h2><p>对单个参数，协方差矩阵$C=\Gamma^{-1}$可以简单地给出参数$\theta_i$的误差（标准差）$\sigma_{\theta_i} = \sqrt{C_{ii}}$。</p>
<p>一个重要的量是对波源定位的天区的大小，这可以由两个位置参数（如赤经、赤纬）的分布给出。方便起见，我们取参数$x=\cos\theta_0-\cos\theta, y=\phi-\phi_0$，$\theta$和$\phi$是球坐标，$\theta_0$和$\phi_0$是注入波形采取的波源的位置。则立体角就是$\mathrm{d}\Omega=\mathrm{d}x\mathrm{d}y$。由上节，将与位置无关的参数积掉，$x,y$的边缘分布就是均值为零的二维正态分布</p>
<script type="math/tex; mode=display">p(x,y) = \frac{1}{2\pi |\det C|^{1/2}} e^{-\frac{1}{2}(C^{-1}_{11}x^2+C^{-1}_{22}y^2+2C^{-1}_{12}xy)}</script><p>这里的$C$是$x$和$y$的协方差矩阵，其元素为Fisher矩阵的逆的$x$和$y$对应行列的元素。</p>
<p>概率$P$的定位天区面积$\Delta\Omega_P$为根据波源位置的后验分布，波源处在其中的概率为$P$的天区的面积。当然给定面积对应的天区并不唯一，具体地说，这里的区域是误差椭圆，即$xy$平面上等概率密度线内的区域。</p>
<p>通过配方换元，$u^2+v^2=\frac{1}{2}(C^{-1}_{11}x^2+C^{-1}_{22}y^2+2C^{-1}_{12}xy)$，可以求出</p>
<script type="math/tex; mode=display">\left|\frac{\partial(x,y)}{\partial(u,v)}\right| = 2\sqrt{\det C}</script><p>误差椭圆就是$u^2+v^2\le R^2$，其对应的概率为</p>
<script type="math/tex; mode=display">
\begin{aligned}
    P &= \iint_{u^2+v^2\le R^2} p(u,v)\left|\frac{\partial(x,y)}{\partial(u,v)}\right|\mathrm{d}u\mathrm{d}v
    \\&= \frac{1}{\pi} \iint_{u^2+v^2\le R^2} e^{-(u^2+v^2)} \mathrm{d}u\mathrm{d}v
    \\&= 1-e^{-R^2}
\end{aligned}</script><p>对应的天区面积</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \Delta\Omega_P &= \iint_{u^2+v^2\le R^2} \mathrm{d}x\mathrm{d}y = \iint_{u^2+v^2\le R^2} \left|\frac{\partial(x,y)}{\partial(u,v)}\right|\mathrm{d}u\mathrm{d}v
    \\&= 2\pi R^2 \sqrt{\det C}
\end{aligned}</script><p>记</p>
<script type="math/tex; mode=display">\Delta\Omega_S = 2\pi \sqrt{\det C}</script><p>则</p>
<script type="math/tex; mode=display">1-P = e^{-\Delta\Omega_P/\Delta\Omega_S}</script><p>$\Delta\Omega_S$即是一个定位天区的特征面积。考虑协方差矩阵的定义，可以写成</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \Delta\Omega_S &= 2\pi\sqrt{\left<(\Delta \cos\theta)^2\right>\left<\Delta \phi^2\right> - \left<\Delta \cos\theta \Delta \phi\right>^2}
    \\&\approx 2\pi |\sin\theta| \sqrt{\left<\Delta \theta^2\right>\left<\Delta \phi^2\right> - \left<\Delta \theta \Delta \phi\right>^2}
\end{aligned}</script></body></html>]]></content>
      <categories>
        <category>引力波</category>
      </categories>
      <tags>
        <tag>物理</tag>
        <tag>天文</tag>
        <tag>引力波</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10上安装openpose的一些坑</title>
    <url>/2020/12/08/install-openpose-on-win10/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>我安装openpose的过程主要参考了以下两篇文章：<br><a href="https://blog.csdn.net/qq_18840365/article/details/102677183">win10下openpose安装与使用</a><br><a href="https://blog.csdn.net/Cheungleilei/article/details/102947875">Win10+Tensorflow+OpenPose超超超详细安装及各种遇到的问题解决</a></p>
<p>其中第二篇文章记录了大部分可能遇到的问题，不过我安装时还遇到了一些额外的问题，记录如下：</p>
<h3 id="TensorFlow和CUDA"><a href="#TensorFlow和CUDA" class="headerlink" title="TensorFlow和CUDA"></a>TensorFlow和CUDA</h3><p>关于tensorflow的版本的问题比较多，首先openpose是依赖tensorflow的1.x版本的，和tensorflow 2.x版本不能兼容，所以安装tensorflow时要注意只能安装tensorflow 1.x版本。</p>
<p>另外，CUDA和tensorflow-gpu的版本要求对应的很严格，可能差几个版本号就没法正常运行了。这里可以参照tensorflow官网的<a href="https://tensorflow.google.cn/install/source_windows#gpu">对应表</a>。</p>
<p><img src="CUDA-tensorflow-version.png" alt=""></p>
<p>按照上面的对应表，CUDA 10.0以上的版本就没有测试过tensorflow 1.x了，但我意识到这个问题时已经装好了CUDA 10.1，试了一下别的教程中用过的配置，发现CUDA 10.1也是可以用的。最终我的成功配置是CUDA 10.1+cuDNN 8.0.5+python 3.6.8+tensorflow-gpu 1.15.0。</p>
<h3 id="pycocotools"><a href="#pycocotools" class="headerlink" title="pycocotools"></a>pycocotools</h3><p>安装依赖包的pycocotools时，在conda环境中使用<code>pip install pycocotools</code>是会报错，提示需要安装Microsoft Visual C++ 14.0。我安装了VC 14.0之后还是报相同的错，但是退出conda环境之后就可以安装了。这个有点玄学，我也没查到编译python库是要依赖哪个环境变量，于是后面的操作都是关闭conda环境进行的。</p>
<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>最后在使用<code>python setup.py build_ext --inplace</code>安装openpose时，报错：</p>
<figure class="highlight subunit"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">error: </span>Error executing cmd /u /c C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat x86_amd64 &amp;&amp; set</span><br></pre></td></tr></tbody></table></figure>
<p>直接查这个报错信息没查出来怎么解决，可以看到错误是在执行<code>vcvarsall.bat</code>时出现的，单独运行一下这个脚本，会出现报错：</p>
<p><img src="vcvarsall-error.png" alt="此时不应有 \Microsoft。"></p>
<p>查一下这个报错信息，发现了<a href="https://www.cnblogs.com/happykoukou/p/6986350.html">这篇文章</a>。按照其中的解决方法，找出来环境变量中所有带双引号的变量（不只是<code>PATH</code>，我的情况是变量<code>LIB</code>和<code>INCLUDE</code>带了双引号），把双引号去掉，就可以正常编译安装了。</p>
</body></html>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>电磁场中运动的粒子</title>
    <url>/2019/03/30/motion-in-EM-field/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h1 id="1-电磁场-粒子耦合作用量"><a href="#1-电磁场-粒子耦合作用量" class="headerlink" title="1.电磁场-粒子耦合作用量"></a>1.电磁场-粒子耦合作用量</h1><p><del>（目前还不存在的）</del>上一节告诉我们，闵氏时空中的自由粒子的作用量为：</p>
<script type="math/tex; mode=display">S_p=\int mc^2\mathbf d\tau=\int \frac {mc^2} {\gamma} \mathbf dt</script><p>要描述一个在电磁场中运动的粒子，其作用量应再加上一项粒子与场的耦合项$S_{pf}$，即$S=S_p+S_{pf}$。</p>
<p>实验告诉我们，应该使用一个4-矢量$A^{\alpha}=(\phi/c,\mathbf A)$描述电磁场，我们会在后面看到$A^{\alpha}$的时间、空间分量的物理意义。另外，作用量应为标量。因此我们猜测$S_{pf}$的形式为：</p>
<script type="math/tex; mode=display">S_{pf}=-q\int A_{\alpha}\mathbf dx^{\alpha}</script><p>其中$q$也是一个标量，它表示了粒子与电磁场耦合的强度。<br>从而，粒子的作用量：</p>
<script type="math/tex; mode=display">
\begin{align*}
S &=\int \frac m {\gamma} \mathbf dt - qA_{\alpha}\mathbf dx^{\alpha}
\\&= \int dt\left(\frac {mc^2}{\gamma} + q\phi - q\mathbf A\cdot\frac{d\mathbf x}{dt}\right)
\\&= \int \left(mc^2\sqrt{1-\frac{v^2}{c^2}} - q(\mathbf A\cdot \mathbf v - \phi)\right)dt
\end{align*}</script><h1 id="2-粒子的运动方程"><a href="#2-粒子的运动方程" class="headerlink" title="2.粒子的运动方程"></a>2.粒子的运动方程</h1><p>得到作用量后，通过喜闻乐见的欧拉-拉格朗日方程推出运动方程：</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial L}{\partial v} &= -m\gamma\mathbf v -q\mathbf A = -\mathbf p - q\mathbf A
\\ \frac{\partial L}{\partial \mathbf r} &= -q\nabla(\mathbf A\cdot\mathbf v-\phi)
\\&= -q((\mathbf v\cdot\nabla)\mathbf A + \mathbf v\times(\nabla\times\mathbf A) - \nabla\phi)
\end{align*}</script><p>从而：</p>
<script type="math/tex; mode=display">d\frac{\mathbf{p}}{dt} = q\left( -\frac{d\mathbf{A}}{dt} + (\mathbf v\cdot\nabla)\mathbf A + \mathbf v\times(\nabla\times\mathbf A) - \nabla\phi \right)</script><p>注意到：</p>
<script type="math/tex; mode=display">
\frac{d\mathbf{A}}{dt} = \frac{\partial\mathbf A}{\partial t} + \frac{\partial\mathbf A}{\partial x^i}\frac{\partial x^i}{\partial t} = \frac{\partial\mathbf A}{\partial t} + (\mathbf v\cdot\nabla)\mathbf A</script><p>故有：</p>
<script type="math/tex; mode=display">\frac{d\mathbf{p}}{dt} = q\left( -\frac{\partial\mathbf{A}}{\partial t} - \nabla\phi + \mathbf v\times(\nabla\times\mathbf A) \right)</script><p>前两项与$\mathbf v$无关，最后一项则与$\mathbf v$有关。因此，我们可以定义：</p>
<script type="math/tex; mode=display">
\mathbf E = -\frac{\partial\mathbf{A}}{\partial t} - \nabla\phi
\\ \mathbf B = \nabla\times\mathbf A</script><p>$\mathbf E$为电场强度，$\mathbf B$为磁感应强度。<br>从而粒子的运动方程为：</p>
<script type="math/tex; mode=display">\frac{\mathbf{dp}}{\mathbf dt} = q\mathbf E + q\mathbf v\times\mathbf B</script><p>这和我们所了解的电磁学中粒子在电磁场中的运动方程相同。</p>
<p>另外，根据上面的定义，我们有：</p>
<script type="math/tex; mode=display">
\nabla\times\mathbf E = -\frac{\partial\nabla\times\mathbf A }{\partial t} - \nabla\times\nabla\phi = -\frac{\partial\mathbf B}{\partial t}
\\ \nabla\cdot\mathbf B = \nabla\cdot\nabla\times\mathbf A = 0</script><p>这是麦克斯韦方程组中的两个方程。</p>
<h1 id="3-规范不变性"><a href="#3-规范不变性" class="headerlink" title="3.规范不变性"></a>3.规范不变性</h1><p>我们知道，拉氏量增加一个函数对时间的全导数不会改变运动方程，即：</p>
<script type="math/tex; mode=display">
L'=-q(\phi-\mathbf A\cdot \mathbf v)+q\frac{df}{dt} = -q\left[ \left(\phi-\frac{\partial f}{\partial t}\right) + (\mathbf A+\nabla f)\cdot \mathbf v \right]</script><p>和拉氏量$L=qA_{\alpha}x^{\alpha}$给出完全相同的运动方程。这即是说$A^{\alpha}$经过变换：</p>
<script type="math/tex; mode=display">
\phi' = \phi - \frac{\partial f}{\partial t}
\\ \mathbf A' = \mathbf A+\nabla f</script><p>后给出相同的运动方程。这种不变性称作<strong>规范不变性</strong>，上面的变换式称作<strong>规范变换</strong>。</p>
<p>规范不变性告诉我们，描述电磁场的矢量$A^{\alpha}$具有一个额外的自由度。因此我们可以人为地选定一种规范以简化问题。比如，<strong>库仑规范</strong>：</p>
<script type="math/tex; mode=display">\nabla\cdot\mathbf A = 0</script><p>另外一种规范被称作<strong>洛伦兹规范(Lorenz Gauge)</strong>：</p>
<script type="math/tex; mode=display">\nabla\cdot\mathbf A+\frac 1 {c^2}\frac{\partial \phi}{\partial t}=0</script><p>写成四维形式：</p>
<script type="math/tex; mode=display">\frac{\partial A^{\alpha}}{\partial x^{\alpha}}=0</script><p>可见洛伦兹规范满足洛伦兹不变性，这一规范在后面也会被用到。</p>
<h1 id="4-协变形式的运动方程"><a href="#4-协变形式的运动方程" class="headerlink" title="4.协变形式的运动方程"></a>4.协变形式的运动方程</h1><p>在上一节中我们已经求出的$S_p$的变分：</p>
<script type="math/tex; mode=display">\delta S_p = m\int \frac{du_{\alpha}}{d\tau}\delta x^{\alpha} d\tau</script><p>现在再来看$S_{pf}$，其协变形式为：</p>
<script type="math/tex; mode=display">S_{pf} = -\int qA_{\alpha} dx_{\alpha}</script><p>对其做变分：</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta S_{pf} &= -q\int \delta A_{\alpha}dx_{\alpha} + A_{\alpha}\delta dx_{\alpha}
\\ &= -q\int \frac{\partial A_{\alpha}}{\partial x^{\beta}}\delta x^{\beta} dx_{\alpha} + A_{\alpha}\delta dx_{\alpha}
\\ &= -q\int \frac{\partial A_{\alpha}}{\partial x^{\beta}}\delta x^{\beta} dx_{\alpha} - \delta x_{\alpha} dA_{\alpha}
\\ &= -q\int \left(\frac{\partial A_{\beta}}{\partial x^{\alpha}} - \frac{\partial A_{\alpha}}{\partial x^{\beta}} \right) \delta x^{\alpha}dx^{\beta}
\\ &= -q\int F_{\alpha\beta} \delta x^{\alpha}dx^{\beta}
\end{align*}</script><p>其中：</p>
<script type="math/tex; mode=display">F_{\alpha\beta}=\frac{\partial A_{\beta}}{\partial x^{\alpha}}-\frac{\partial A_{\alpha}}{\partial x^{\beta}}</script><p>定义为<strong>电磁场张量</strong>。</p>
<p>那么粒子的作用量的变分即为：</p>
<script type="math/tex; mode=display">
\delta S=\int \left(m\frac{du_{\alpha}}{d\tau} - F_{\alpha\beta}u^{\beta} \right)\delta x^{\alpha}d\tau</script><p>从而得到粒子的运动方程：</p>
<script type="math/tex; mode=display">m\frac{du_{\alpha}}{d\tau} = F_{\alpha\beta}u^{\beta}</script><p>另外，根据上面2节中的$\mathbf E,\mathbf B$的定义，电磁场张量的分量形式为：</p>
<script type="math/tex; mode=display">
F_{\alpha\beta} = 
\begin{pmatrix}
0 & E_x/c & E_y/c & E_z/c
\\ -E_x/c & 0 & -B_z & B_y
\\ -E_y/c & B_z & 0 & -B_x
\\ -E_z/c & -B_y & B_x & 0
\end{pmatrix}</script><h1 id="5-电磁场的洛伦兹变换"><a href="#5-电磁场的洛伦兹变换" class="headerlink" title="5.电磁场的洛伦兹变换"></a>5.电磁场的洛伦兹变换</h1><h2 id="5-1-电场和磁场的变换式"><a href="#5-1-电场和磁场的变换式" class="headerlink" title="5.1 电场和磁场的变换式"></a>5.1 电场和磁场的变换式</h2><p>电场和磁场可看作电磁场张量的分量，可以简单的由张量的洛伦兹变换给出其在不同惯性系中的变换式：</p>
<script type="math/tex; mode=display">
E_x=E_x',\ E_y = \frac{E_y'+VB_z'}{\sqrt{1-V^2/c^2}},\ E_z=\frac{E_z'-VB_y'}{\sqrt{1-V^2/c^2}}
\\B_x=B_x',\ B_y = \frac{B_y'-VE_z'}{\sqrt{1-V^2/c^2}},\ E_z=\frac{B_z'+VE_y'}{\sqrt{1-V^2/c^2}}</script><p>在低速近似$V&lt;&lt;1$下，上式化为：</p>
<script type="math/tex; mode=display">
\mathbf E = \mathbf E' + \mathbf B'\times \mathbf V
\\ \mathbf B = \mathbf B' - \frac 1 {c^2}\mathbf E' \times \mathbf V</script><h2 id="5-2-电磁场的洛伦兹不变量"><a href="#5-2-电磁场的洛伦兹不变量" class="headerlink" title="5.2 电磁场的洛伦兹不变量"></a>5.2 电磁场的洛伦兹不变量</h2><p>寻找洛伦兹不变量，即寻找标量。我们可以通过构造上下指标互相匹配，即不含自由指标的表达式来构造张量。</p>
<p>一个洛伦兹不变量为：</p>
<script type="math/tex; mode=display">\frac {c^2} 2 F_{\alpha\beta}F^{\alpha\beta} = c^2B^2-E^2</script><p>在给出第二个洛伦兹不变量前，先说明四阶单位反对称张量$e^{\alpha\beta\mu\nu}$的定义：<br>和Levi-Civita算符$\epsilon_{ijk}$类似，若$\alpha,\beta,\mu,\nu$任意两个指标相同，则$ e^{\alpha\beta\mu\nu} = 0 $；规定$ e^{0123}=1 $，交换任意两个指标后的结果为交换前的相反数。可以证明$e^{\alpha\beta\mu\nu}$在归一化的坐标变换（变换矩阵行列式为1）下分量的值不变，而洛伦兹变换正是归一化的。从而有洛伦兹不变量：</p>
<script type="math/tex; mode=display">-\frac 1 2 F_{\beta\alpha}e^{\alpha\beta\mu\nu}F^{\nu\mu} = \mathbf E\cdot\mathbf B</script><p>可以由这两个洛伦兹不变量得出一些简单的性质：</p>
<ol>
<li>若在惯性系K中有$E&gt;cB$，则$E&gt;cB$在任意惯性系中都成立。反之亦然。</li>
<li>若在惯性系K中$\mathbf E\perp\ \mathbf B$，则$\mathbf E\perp\ \mathbf B$在任意惯性系中都成立，并且可以找到惯性系K’使得其中$\mathbf B=0$（当$E&gt;cB$）或$\mathbf E=0$（当$cB&gt;E$）。</li>
</ol>
<h2 id="5-3-匀速运动电荷的电场"><a href="#5-3-匀速运动电荷的电场" class="headerlink" title="5.3 匀速运动电荷的电场"></a>5.3 匀速运动电荷的电场</h2><p>下面用两种方法给出在惯性系K中以速度$V\mathbf e_x$匀速运动的电荷产生的电磁场。</p>
<p>在相对K以$V\mathbf e_x$速度运动的惯性系K’中。K’中的电磁场由静电荷激发，其形式已知。从而我们有：</p>
<script type="math/tex; mode=display">
-\nabla\cdot\phi' = \frac 1 {4\pi\epsilon_0}\frac q {r'^2}\hat{\mathbf r}
\\ \nabla\times\mathbf A'=0</script><p>从而可以选取</p>
<script type="math/tex; mode=display">\phi'=\frac q {4\pi\epsilon_0}\frac 1 {r'},\mathbf A'=0</script><p>变换到K系：</p>
<script type="math/tex; mode=display">
\phi = \gamma(\phi'+VA_x') = \gamma\frac q {4\pi\epsilon_0}\frac 1 {r'}
\\ A_x = \gamma(A_x'+V\phi') = \gamma V \frac q {4\pi\epsilon_0}\frac 1 {r'}
\\ A_y=A_z=0</script><p>其中，</p>
<script type="math/tex; mode=display">
\begin{align*}
r' &= \sqrt{\gamma^2(x-Vt)^2+y^2+z^2}
\\ &= R\sqrt{\gamma^2\cos^2\theta+\sin^2\theta}
\end{align*}</script><p>其中$\mathbf R$为电荷指向场点的矢量，$\theta$为$\mathbf R$与$x$方向的夹角。<br>从而电场：</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathbf E &= -\frac{\partial\mathbf{A}}{\partial t} - \nabla\phi
\\ &=  \frac q {4\pi\epsilon_0} \left(-\gamma V \frac{\gamma^2(x-Vt)V}{r'^3}\mathbf e_x + \gamma \frac{\gamma^2(x-Vt)\mathbf e_x+y\mathbf e_y+z\mathbf e_z}{r'^3} \right)
\\ &= \frac q {4\pi\epsilon_0}\frac 1 {r'^3} \left( \gamma(x-Vt) \mathbf e_x + \gamma y\mathbf e_y + \gamma z\mathbf e_z \right)
\\ &= \frac q {4\pi\epsilon_0}\frac 1 {R^2}\frac{\gamma}{(\gamma^2\cos^2\theta+\sin^2\theta)^{3/2}}\hat{\mathbf R}
\end{align*}</script><p>可见，运动电荷的电场和静电场相比，在运动方向（$\theta=0$）上衰减了$\frac 1 {\gamma^2}$倍，在垂直方向（$\theta=\frac {\pi} 2 $）上增大了$\gamma$倍。</p>
<p>另一种方法是通过5.1中的电场的洛伦兹变换求出运动电荷的电场：</p>
<script type="math/tex; mode=display">
E_x = E_x',E_y=\gamma E_y',E_z=\gamma E_z'</script><p>这看起来与上面的结果是矛盾的：上面的推导给出在运动方向上电场强度衰减了$\frac 1 {\gamma^2}$倍，而这里$x$方向上电场强度的大小在K和K’系中相等。事实上，两个结果并不矛盾，因为$\mathbf E$是空间的函数，而同一点在不同惯性系中的坐标也不相同。例如，考虑$t=0$时刻的电场，我们有：</p>
<script type="math/tex; mode=display">
E_x(x)=E_x'(x')=E_x'(\gamma x)=\frac 1 {\gamma^2}E_x'(x)</script><p>$y,z$方向同理，因此两种方法给出相同的结果。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>电动力学笔记</category>
      </categories>
      <tags>
        <tag>物理</tag>
      </tags>
  </entry>
  <entry>
    <title>n维正态分布的似然估计</title>
    <url>/2019/04/08/n-dim-normal-distribution/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>$n$维向量$\mathbf x=(x_1,\cdots,x_n)$满足正态分布，概率密度函数为：</p>
<script type="math/tex; mode=display">p(\mathbf x) = \frac{1}{(2\pi)^{n/2}|\mathbf C|^{1/2}} \exp\left( -\frac 1 2 \sum_{i,j=1}^n (x_i-m_i)C_{ij}^{-1}(x_j-m_j) \right)</script><p>均值$\mathbf m$和协方差矩阵$\mathbf C$的定义为：</p>
<script type="math/tex; mode=display">
\mathbf m = E(\mathbf x)
\\ \mathbf C = E\left((\mathbf x-\mathbf m)(\mathbf x-\mathbf m)^T\right)</script><p>现有$N$个样本$\mathbf x_1,\cdots,\mathbf x_N$，使用极大似然估计来估计$\mathbf m$和$\mathbf C$。似然函数为：</p>
<script type="math/tex; mode=display">
\begin{aligned}
H(\mathbf m, \mathbf C) &= \sum_{k=1}^N \ln p(\mathbf x_k)
\\&= -\frac 1 2 \sum_{k=1}^N\sum_{i,j=1}^n (x_{ki}-m_i)C^{-1}_{ij}(x_{kj}-m_j) -\frac N 2 \ln |\mathbf C| -\frac{nN}2\ln 2\pi
\end{aligned}</script><p>估计的参数应使$H$取极值。</p>
<p>对$\mathbf m$：</p>
<script type="math/tex; mode=display">
\begin{aligned}
\frac{\partial H}{\partial m_l} &= \frac 1 2 \sum_{k=1}^N\sum_{i,j=1}^n C^{-1}_{ij}[\delta_{li}(x_{kj}-m_j)+\delta_{lj}(x_{ki}-m_i)]
\\&= \frac 1 2\sum_{k=1}^N[\sum_{j=1}^n C^{-1}_{lj}(x_{kj}-m_j)+\sum_{i=1}^n C^{-1}_{il}(x_{ki}-m_i)]
\\&= \sum_{k=1}^N\sum_{i=1}^n C^{-1}_{il}(x_{ki}-m_i) = 0
\end{aligned}</script><p>最后一步是因为$\mathbf C$是对称矩阵（由定义显然）。从而有：</p>
<script type="math/tex; mode=display">\sum_{i=1}^nC^{-1}_{il}(\sum_{k=1}^N x_{ki} - Nm_i) =0</script><p>对$l=0,\cdots,n$成立。写成矩阵形式，即为：</p>
<script type="math/tex; mode=display">\mathbf C^{-1} (\sum_{k=1}^N \mathbf x_k - N\mathbf m) =0</script><p>由于$\mathbf C^{-1}$是可逆矩阵，要使上式成立，应有：</p>
<script type="math/tex; mode=display">\mathbf{\hat m}=\frac 1 N \sum_{k=1}^N \mathbf x_k</script><p>即为$\mathbf m$的极大似然估计值。</p>
<p>对$\mathbf C$，首先考虑$\mathbf C^{-1}$的行列式$|\mathbf C^{-1}|$对$C^{-1}_{lm}$的偏导数$\frac{\partial |\mathbf C^{-1}|}{\partial C^{-1}_{lm}}$：<br>将$|\mathbf C^{-1}|$按第$l$行展开，有：</p>
<script type="math/tex; mode=display">|\mathbf C^{-1}|=\sum_{i=1}^n C^{-1}_{li}c_{li}</script><p>其中$c_{li}$是$C^{-1}_{li}$的代数余子式，同时也是$\mathbf C^{-1}$的伴随矩阵的$l,i$元素。对任意矩阵$\mathbf A$，其伴随矩阵$\mathbf A^* = |\mathbf A| \mathbf A^{-1} $，因此$c_{li} = |\mathbf C^{-1}|(C^{-1})^{-1}_{li} = |\mathbf C^{-1}|C_{li} $。<br>$l$行的代数余子式不显含$C^{-1}_{lm}$，从而有：</p>
<script type="math/tex; mode=display">\frac{\partial |\mathbf C^{-1}|}{\partial C^{-1}_{lm}} = c_{lm} = |\mathbf C^{-1}|C_{lm}</script><p>故：</p>
<script type="math/tex; mode=display">
\begin{aligned}
\frac{\partial H}{\partial C^{-1}_{lm}} &= -\frac 1 2 \sum_{k=1}^N (x_{kl}-m_l)(x_{km}-m_m) +\frac N {2|\mathbf C^{-1}|}\frac{\partial |\mathbf C^{-1}|}{\partial C^{-1}_{lm}}
\\&= -\frac 1 2 \sum_{k=1}^N (x_{kl}-m_l)(x_{km}-m_m)  + \frac N 2 C_{lm} =0
\end{aligned}</script><p>从而有$C_{lm}$的极大似然估计值：</p>
<script type="math/tex; mode=display">\hat{C}_{lm} = \frac 1 N \sum_{k=1}^N (x_{kl}-\hat m_l)(x_{km}-\hat m_m)</script><p>写成矩阵形式：</p>
<script type="math/tex; mode=display">\hat{\mathbf C} = \frac 1 N \sum_{k=1}^N (\mathbf x_k - \hat{\mathbf m})(\mathbf x_k - \hat{\mathbf m})^T</script></body></html>]]></content>
      <tags>
        <tag>数学</tag>
      </tags>
  </entry>
  <entry>
    <title>在Linux远程服务器上搭建Jupyter服务</title>
    <url>/2019/12/17/remote-jupyter/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h2 id="配置Anaconda和Jupyter-Notebook"><a href="#配置Anaconda和Jupyter-Notebook" class="headerlink" title="配置Anaconda和Jupyter Notebook"></a>配置Anaconda和Jupyter Notebook</h2><p>在清华tuna镜像上下载anaconda的linux安装包，上传到服务器上，使用命令：<br></p><figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">bash</span> Anaconda<span class="number">3</span>-<span class="number">2019</span>.<span class="number">10</span>-Linux-x<span class="number">86</span>_<span class="number">64</span>.sh</span><br></pre></td></tr></tbody></table></figure><br>安装。（直接用<code>./xxx.sh</code>运行会提示权限不够，但并不需要sudo）安装过程中可以指定安装到的目录，我这里指定了<code>~/data/</code>。<p></p>
<p>安装完成后还不能找到conda指令，需要运行命令：<br></p><figure class="highlight jboss-cli"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">echo</span> 'export PATH=<span class="string">"~/data/anaconda3/bin:$PATH"</span>' &gt;&gt; ~<span class="string">/.bashrc</span></span><br><span class="line">source ~<span class="string">/.bashrc</span></span><br></pre></td></tr></tbody></table></figure><br>添加环境变量。现在就可以使用conda命令了。<p></p>
<p>接下来需要配置Jupyter，生成并修改配置文件，其方法和<a href="/2019/10/22/Docker-Jupyter/" title="在Docker上部署Jupyter Notebook">在Docker上部署Jupyter Notebook</a>的第二节一样（不必用pip安装jupyter，anaconda已经含了）。</p>
<h2 id="在本地浏览器访问"><a href="#在本地浏览器访问" class="headerlink" title="在本地浏览器访问"></a>在本地浏览器访问</h2><p>配置好环境之后，让jupyter服务器端在后台运行：<br></p><figure class="highlight arcade"><table><tbody><tr><td class="code"><pre><span class="line">nohup jupyter notebook --allow-root &gt; ~<span class="regexp">/data/</span>jupyter.log</span><br></pre></td></tr></tbody></table></figure><br>如果不输出日志，可以设置为：<br><figure class="highlight arcade"><table><tbody><tr><td class="code"><pre><span class="line">nohup jupyter notebook &gt;<span class="regexp">/dev/</span><span class="literal">null</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><br><code>nohup</code>表示不挂起，在退出ssh终端后也会继续运行。jupyter的终端输出会记录在<code>~/data/jupyter.log</code>中。<p></p>
<p>在本地运行：<br><code>ssh -N -f -L localhost:8888:localhost:8888 -p 22 remote_user@remote_host</code><br>把远程主机的8888端口映射到本地的8888端口。在浏览器中输入<code>localhost:8888</code>即可访问jupyter服务。</p>
<p>（也可以使用Xshell，连接上远程主机后在文件-属性中选择类别：连接-SSH-隧道，如下添加：<br><img src="forwarding-with-Xshell.png" alt=""><br>之后在浏览器中输入<code>localhost:8888</code>访问。</p>
</body></html>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>态矢和表象</title>
    <url>/2019/11/17/sakurai-qm-01-brackets-and-representation/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h2 id="1-1-The-Stern-Gerlach-Experiment"><a href="#1-1-The-Stern-Gerlach-Experiment" class="headerlink" title="1.1 The Stern-Gerlach Experiment"></a>1.1 The Stern-Gerlach Experiment</h2><p>第一节从一个稍微不同的角度介绍了一下Stern-Gerlach实验。其基本原理如原子物理中所介绍的，银原子的唯一一个处在非满壳层的电子自旋方向不同使银原子有不同的磁矩，通过空间上均匀变化的磁场后会在变化的方向上被分成两束。</p>
<p>书中讨论了这样的sequential S-G experiment：<br><img src="sequential-sg-experiment.png" alt=""><br>在a中，连续布置两个z方向的SG装置，只让$S_z+$通过第一个装置，最后从第二个装置射出的也只有一束$S_z+$。这容易理解，因为第一个装置起了“滤掉”$S_z-$的作用。<br>在b中，第二个装置是x方向的，最后出射的原子有$S_x+$和$S_z-$两束。这似乎说明了$S_z+$的原子在x方向的磁矩也是均匀分布的，一半是$S_x+$，另一半是$S_x-$。让我们继续看第三个序列。<br>在c中，在b的后面再增加一个z方向的装置，并只让$S_x+$方向的原子进入第三个装置。而最后出射的原子中既有$S_z+$又有$S_z-$。这是个惊人的结果——$S_z-$的原子本应在第一个装置就被滤掉了，却再次出现在第三个装置的出射。这似乎是说，仅仅在中间加入一个x方向的装置，就使我们失去了对磁矩在z方向分布的信息（对比a）<del>全部木大</del>。</p>
<p>这让人想到另一个经典物理中的现象——光的偏振。我们可以让$S_x$和$S_z$对应xy方向和与xy方向夹角$45^\circ$的x’y’方向的偏振光，SG装置对应相应的偏振片，得到的就是上面的结果。而考虑我们对偏振光的描述，x’方向的偏振是x和y方向偏振的线性组合，我们推断这里原子的状态也应该由某种抽象的二维线性空间中的矢量来表示：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \left|S_x;+\right>=\frac{1}{\sqrt{2}}\left|S_z;+\right>+\frac{1}{\sqrt{2}}\left|S_z;-\right>
    \\
    \left|S_x;-\right>=-\frac{1}{\sqrt{2}}\left|S_z;+\right>+\frac{1}{\sqrt{2}}\left|S_z;-\right>
\end{aligned}</script><p>书中接下来讨论了$S_y$态的表示，它也应该是$S_z$的线性组合，且要和$S_x$区分开来。为此，书中将$S_y$对应成左旋和右旋偏振，相应的线性组合的系数则变成了$\frac{1}{\sqrt{2}}$和$ \pm\frac{i}{\sqrt{2}}$。书中进一步说明这个线性空间应该是定义在复数域上的。<em>（这里我存有一些疑问，如果是在二维空间中的话，是否就不必要引入复数了？如果在更高维的空间，是否还需要定义在其他的数域上？这只是数学巧合还是蕴含了物理上三维空间中的某种对称性？）</em></p>
<h2 id="1-2-Kets-Bras-and-Operators"><a href="#1-2-Kets-Bras-and-Operators" class="headerlink" title="1.2 Kets, Bras, and Operators"></a>1.2 Kets, Bras, and Operators</h2><p>延续上一节的思路，我们认为物理系统的状态被<strong>右矢</strong>(ket)描述，它定义在复数域上的线性空间，形如$\left|\alpha\right&gt;$。右矢空间具有线性空间的诸多性质，这里不再赘述。</p>
<p>接下来需要介绍的是<strong>左矢</strong>(bra)空间。左矢空间是右矢空间的对偶空间，它和右矢一一对应。和右矢$\left|\alpha\right&gt;$对应的左矢就记作$\left&lt;\alpha\right|$。左矢和右矢的对偶映射保留了加法。需要注意的是，$c\left|\alpha\right&gt;$对应的左矢应该是$c^*\left&lt;\alpha\right|$。</p>
<p>一个左矢和一个右矢可以定义<strong>内积</strong>：$\left&lt;\beta|\alpha\right&gt;$。内积是一个线性运算，且满足：</p>
<ul>
<li>共轭对称性：<script type="math/tex">\left<\beta|\alpha\right>=\left<\alpha|\beta\right>^*</script></li>
<li>正定性：<script type="math/tex; mode=display">\left<\alpha|\alpha\right>\geq0</script>取等号仅当$\left|\alpha\right&gt;$是右矢空间的零矢量。</li>
</ul>
<p><strong>算符</strong>是一个双线性映射，将右矢映成右矢，或将左矢映成左矢。被相同的算符作用的互相对偶的左矢和右矢通常并不对偶，而$X\left|\alpha\right&gt;$对偶的左矢是$\left&lt;\alpha\right|X^\dagger$。$X^\dagger$称为算符$X$的厄米共轭。和自己的厄米共轭相等的算符称为厄米算符。<em>（这里的描述有些不清晰，因为仅凭上面的定义，$X$作用在左矢和右矢上原则上可以完全不相关。不过事实上并非如此，参见下面的结合公理）</em></p>
<p>算符也可以定义乘法，和映射的乘法类似。显然有：</p>
<script type="math/tex; mode=display">(XY)^\dagger=Y^\dagger X^\dagger</script><p>至此我们定义了这样几种“乘法”：内积、算符作用在（“乘”）左矢或右矢，算符的乘法。再定义外积：$\left|\alpha\right&gt;\left&lt;\beta\right|$。这些“乘法”是我们会涉及到的全部合法的乘法式。</p>
<p>结合公理说的是，对于任何合法的乘法式，结合的顺序是任意的。比如：</p>
<script type="math/tex; mode=display">(\left|\alpha\right>\left<\beta\right|)\left|\gamma\right>=\left|\alpha\right>(\left<\beta|\gamma\right>)</script><p>这告诉我们，可以根据外积定义算符：</p>
<script type="math/tex; mode=display">X=\left|\alpha\right>\left<\beta\right|</script><p>根据结合公理，$X$确是将一个右矢映成另一个右矢。<em>（事实上，结合公理无非是说算符在作用于左矢和作用于右矢上时，应该满足$(\left&lt;\alpha|X)|\beta\right&gt;=\left&lt;\alpha|(X|\beta\right&gt;)）$。只是给出了这一限制，以及让外积拥有算符的性质，其他的结合律都是显然的）</em> 可以证明：</p>
<script type="math/tex; mode=display">X^\dagger= \left|\beta\right>\left<\alpha\right|</script><p>另一个常用的公式是：</p>
<script type="math/tex; mode=display">\left<\beta|X|\alpha\right>=\left<\alpha|X^\dagger|\beta\right>^*</script><h2 id="1-3-Base-Kets-and-Matrix-Representations"><a href="#1-3-Base-Kets-and-Matrix-Representations" class="headerlink" title="1.3 Base Kets and Matrix Representations"></a>1.3 Base Kets and Matrix Representations</h2><p>定义算符的本征右矢和本征值，对算符$A$，本征右矢是这样的右矢$\left|\alpha\right&gt;$，使得$A\left|\alpha\right&gt;=a’\left|\alpha\right&gt;$。其中$a’$是常数，称为本征值。书中将本征值为a’的本征右矢记为$\left|a’\right&gt;$。</p>
<p>若$A$是厄米的，我们有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \left<a''|A|a'\right>&=a'\left<a''|a'\right>
    \\ &=(\left<a'|A|a''\right>)^*=a''^*(\left<a'|a'\right>)^*
    \\ &=a''^*\left<a''|a'\right>
\end{aligned}</script><p>即：</p>
<script type="math/tex; mode=display">(a'-a''^*)\left<a''|a'\right>=0</script><p>取$a’=a’’$，有厄米算符的本征值都是实数；取$a’\neq a’’$，有厄米算符不同的本征右矢是相互正交的。</p>
<p>我们假设$A$的本征右矢是完备的，可以通过其线性组合表示右矢空间中任意的右矢：</p>
<script type="math/tex; mode=display">\left|\alpha\right>=\sum_{a'}c_{a'}\left|a'\right></script><p>考虑$\left&lt;a’\right|$和$\left|\alpha\right&gt;$的内积，我们可以得出$c_{a’}=\left&lt;a’|\alpha\right&gt;$。即：</p>
<script type="math/tex; mode=display">\left|\alpha\right>=\sum_{a'}\left|a'\right>\left<a'|\alpha\right> \tag{1.3.1}</script><p>我们的结论是，<strong>$A$的所有归一化的本征右矢构成了右矢空间中的一组单位正交完备基。</strong></p>
<p>1.3.1中也定义了<strong>完备性关系</strong>：</p>
<script type="math/tex; mode=display">\sum_{a'}\left|a'\right>\left<a'\right|=\sum_{a'}\Lambda_{a'}=1 \tag{1.3.2}</script><p>其中$\Lambda_{a’}$是<strong>投影算符</strong>，其几何意义是将右矢投影到平行于$\left|a’\right&gt;$的方向。</p>
<p>根据完备性关系，算符$X$可写为：</p>
<script type="math/tex; mode=display">X=\sum_{a''}\sum_{a'}\left|a''\right>\left<a''\right|X\left|a'\right>\left<a'\right|</script><p>我们用一个$N\times N$的矩阵来表示$X$：$X_{ij}=\left&lt; a^{(i)} \right| X \left| a^{(j)} \right&gt;$。</p>
<p>可以证明，厄米共轭对应的矩阵表示就是共轭转置，算符相乘对应的就是矩阵乘法。后者的证明如下：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    XY&=\sum_{a''}\sum_{a'}\left|a''\right>\left<a''\right|XY\left|a'\right>\left<a'\right|
    \\ &=\sum_{a''}\sum_{a'}\left|a''\right>\left(\sum_{a'''}\left<a''\right|X\left|a'''\right>\left<a'''\right|Y\left|a'\right>\right)\left<a'\right|
\end{aligned}</script><p>在中间插入一个单位算符的技巧十分常用，用相同的技巧，将左矢和右矢对应到分量组成的行矢量和列矢量，算符作用到左矢和右矢上就也成了矩阵乘法。内积和外积也同样。</p>
<h2 id="1-4-Measurements-Observables-and-the-Uncertainty-Relations"><a href="#1-4-Measurements-Observables-and-the-Uncertainty-Relations" class="headerlink" title="1.4 Measurements, Observables, and the Uncertainty Relations"></a>1.4 Measurements, Observables, and the Uncertainty Relations</h2><h3 id="测量"><a href="#测量" class="headerlink" title="测量"></a>测量</h3><p>让我们回到物理的讨论上来。右矢用于表示物理系统的状态，而算符代表的是<strong>观测量</strong>。这代表的是，对某个观测量进行测量，让系统的状态成为了对应的算符的某个本征态。我们无法确定的给出具体会变成哪个本征态，但可以给出归一化的态$\left|\alpha\right&gt;$变成本征态$\left|a’\right&gt;$的<strong>概率</strong>为$\left|\left&lt;a’|\alpha\right&gt;\right|^2$。此时测量的结果就是对应的<strong>本征值</strong>。这被称为<strong>测量公理</strong>。</p>
<p>定义态$\left|\alpha\right&gt;$下观测量的平均值：</p>
<script type="math/tex; mode=display">\left<A\right>=\left<\alpha|A|\alpha\right></script><p>可以将其写成下面的形式：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \left<A\right>&=\left<\alpha|A|\alpha\right>
    \\&=\sum_{a''}\sum_{a'}\left<\alpha|a''\right>\left<a''\right|A\left|a'\right>\left<a'|\alpha\right>
    \\&=\sum_{a'}a'\left|\left<a'|\alpha\right>\right|^2
\end{aligned}</script><p>这说明观测量平均值的物理意义即为对含有大量相同态矢的粒子进行测量，测量的结果的平均值，亦即测量结果的期望。</p>
<h3 id="1-2自旋系统"><a href="#1-2自旋系统" class="headerlink" title="1/2自旋系统"></a>1/2自旋系统</h3><p>现在再来看1.1中的SG实验，记$S_z+$的态矢为$\left|+\right&gt;$，$S_z-$的态矢为$\left|-\right&gt;$。由sequential S-G experiment的b，应该有：</p>
<script type="math/tex; mode=display">
\left|\left<+|S_x;+\right>\right|^2=\left|\left<-|S_x;+\right>\right|^2=\frac{1}{2}</script><p>对$\left|S_x;-\right&gt;$也同样，考虑到$\left|S_x;+\right&gt;$和$\left|S_x;-\right&gt;$应正交，从而有：</p>
<script type="math/tex; mode=display">
\left|S_x;\pm\right>=\frac{1}{\sqrt{2}}\left|+\right>\pm\frac{1}{\sqrt{2}}e^{i\delta_1}\left|-\right></script><p>$S_x$在本征态$\left|S_x;\pm\right&gt;$上的本征值为$\pm\hbar/2$，则可以构造算符$S_x$：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    S_x&=\frac{\hbar}{2}\left|S_x;+\right>\left<S_x;+\right|-\frac{\hbar}{2}\left|S_x;-\right>\left<S_x;-\right|
    \\ &=\frac{\hbar}{2}(e^{-i\delta_1}\left|+\right>\left<-\right|+e^{i\delta_1}\left|-\right>\left<+\right|)
\end{aligned}</script><p>在y方向也同样：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \left|S_y;\pm\right>=\frac{1}{\sqrt{2}}\left|+\right>\pm\frac{1}{\sqrt{2}}e^{i\delta_2}\left|-\right>
    \\
    S_y=\frac{\hbar}{2}(e^{-i\delta_2}\left|+\right>\left<-\right|+e^{i\delta_2}\left|-\right>\left<+\right|)
\end{aligned}</script><p>考虑到xy方向也并不相关，也应该有：</p>
<script type="math/tex; mode=display">
\left|\left<S_x;+|S_y;\pm\right>\right|^2=\left|\left<S_x;-|S_y;\pm\right>\right|^2=\frac{1}{2}</script><p>我们得到：</p>
<script type="math/tex; mode=display">\delta_2-\delta_1=\pm\frac{\pi}{2}</script><p>不妨取$\delta_1=0$（$\left|+\right&gt;$定义的任意性给出了这个自由度），$\delta_2=\pi/2$（这个自由度则由空间坐标的左手系/右手系的选取给出），这就对应了我们之前基于偏振光的猜测，也说明了三个方向上线性组合的系数不能全是实数。</p>
<p>我们有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    S_x=\frac{\hbar}{2}(\left|+\right>\left<-\right|+\left|-\right>\left<+\right|)
    \\
    S_y=\frac{\hbar}{2}(-i\left|+\right>\left<-\right|+i\left|-\right>\left<+\right|)
    \\
    S_z=\frac{\hbar}{2}(\left|+\right>\left<+\right|+\left|-\right>\left<-\right|)
\end{aligned}</script><p>得到它们的对易关系：</p>
<script type="math/tex; mode=display">[S_i,S_j]=i\epsilon_{ijk}\hbar S_k</script><p>其中对易子的定义为：$[A,B]=AB-BA$。定义$S^2=S_x^2+S_y^2+S_z^2$，也有：</p>
<script type="math/tex; mode=display">[S^2,S_i]=0</script><p>这具有角动量的对易关系的性质。</p>
<h3 id="相容观测量"><a href="#相容观测量" class="headerlink" title="相容观测量"></a>相容观测量</h3><p>对应的算符的对易子为零的两个观测量称为相容观测量。对相容观测量$A$和$B$，有：</p>
<script type="math/tex; mode=display">\left<a''\right|[A,B]\left|a'\right>=(a''-a')\left<a''\right|B\left|a'\right>=0</script><p>则应有（不考虑简并，即不同的本征右矢对应同一个本征值，因为一般来说总可以选取另外一个观测量来区分简并的右矢）：</p>
<script type="math/tex; mode=display">\left<a''\right|B\left|a'\right>=\left<a''\right|B\left|a'\right>\delta_{a'a''}</script><p>从而，</p>
<script type="math/tex; mode=display">
\begin{aligned}
    B\left|a'\right>&=\sum_{a''}\left|a''\right>\left<a''\right|B\left|a'\right>
    \\&=\left<a'\right|B\left|a'\right>\left|a'\right>
\end{aligned}</script><p>这说明$A$和$B$具有相同的本征右矢，可以将其记作$\left|a’,b’\right&gt;$。这也是“相容”的含义——对B的测量不会破坏A的信息，因为它们的本征态是相同的，先测量A再测量B，第二次测量不会改变态矢（以1的概率塌缩到原本的态）。</p>
<p>与相容观测量相反的是不相容观测量，即对易子非零的观测量。对不相容观测量，后面的测量会破坏前面的测量的信息（因为塌缩到了不同的本征态上）。</p>
<h3 id="不确定性关系"><a href="#不确定性关系" class="headerlink" title="不确定性关系"></a>不确定性关系</h3><p>对观测量$A$，定义这样一个算符：</p>
<script type="math/tex; mode=display">\Delta A=A-\left<A\right></script><p>$A$的弥散度定义为$\Delta A$的平均值：</p>
<script type="math/tex; mode=display">\left<(\Delta A)^2\right>=\left<A^2-2A\left<A\right>+\left<A\right>^2\right>=\left<A^2\right>-\left<A\right>^2</script><p>和方差类似。</p>
<p>现在我们可以证明<strong>不确定性关系</strong>：</p>
<script type="math/tex; mode=display">\left<(\Delta A)^2\right>\left<(\Delta B)^2\right>\geq \frac{1}{4}\left|\left<[A,B]\right>\right|^2</script><p>首先，需要以下引理：</p>
<ul>
<li>Schwarz不等式：<script type="math/tex; mode=display">\left<\alpha|\alpha\right>\left<\beta|\beta\right>\geq\left|\left<\alpha|\beta\right>\right|^2</script>（考虑$\left|\alpha+\lambda\beta\right&gt;$的模长的非负性）</li>
<li>厄米算符的平均值是实数</li>
<li>反厄米算符（$C=-C^\dagger$）的平均值是纯虚数</li>
</ul>
<p>对任意右矢$\left|\gamma\right&gt;$，取$\left|\alpha\right&gt;=\Delta A\left|\gamma\right&gt;,\left|\beta\right&gt;=\Delta B\left|\gamma\right&gt;$，带入Schwarz不等式，有：</p>
<script type="math/tex; mode=display">\left<(\Delta A)^2\right>\left<(\Delta B)^2\right>\geq\left|\left<\Delta A\Delta B\right>\right|^2</script><p>（其中利用到了$A$和$B$的厄米性），而$\Delta A\Delta B$可以写为厄米部分和反厄米部分之和：</p>
<script type="math/tex; mode=display">\Delta A\Delta B=\frac{1}{2}[\Delta A,\Delta B]+\frac{1}{2}\{\Delta A,\Delta B\}</script><p>对上式求平均值，第一项是实数，第二项是纯虚数。求模长则有不确定性关系。</p>
<h2 id="1-5-基的变换"><a href="#1-5-基的变换" class="headerlink" title="1.5 基的变换"></a>1.5 基的变换</h2><p>基的选取不是唯一的，这节主要讨论不同基之间的变换，或被称为<strong>表象变换</strong>。</p>
<p>首先，任意两组基${\left|a’\right&gt;}$和${\left|b’\right&gt;}$之间，都可以通过一个幺正算符联系起来：$\left|b^{(k)}\right&gt;=U\left|a^{(k)}\right&gt;$。</p>
<p>所谓幺正算符，是这样的算符$U$，$UU^\dagger=U^\dagger U=1$。这里的坐标变换算符可以这样定义：</p>
<script type="math/tex; mode=display">U=\sum_k\left|b^{(k)}\right>\left<a^{(k)}\right|</script><p>在b表象上，分量的值为：</p>
<script type="math/tex; mode=display">\left<b^{(k)}|\alpha\right>=\sum_l \left<b^{(k)}|a^{(l)}\right>\left<a^{(l)}|\alpha\right>=\sum_l \left<a^{(k)}|U^\dagger|a^{(l)}\right>\left<a^{(l)}|\alpha\right></script><p>在新表象下的分量即为$U^{\dagger}$在旧表象下的矩阵乘旧表象下的分量。</p>
<p>类似的方法可以证明，算符在新表象下的矩阵为：</p>
<script type="math/tex; mode=display">X'=U^\dagger XU</script><p>是一个相似变换。</p>
<p>不同表象下的算符的变换启发我们，如果根据算符$A$定义一个新算符$B$，它在新表象下的矩阵表示和旧表象下相同，那它应该和$A$有相同的本征值，其本征态的分量也和$A$在旧表象的分量相同。也就是说，它们的<strong>观测值之间具有相同的概率分布。</strong></p>
<p><strong>幺正等效观测量</strong>定义为：</p>
<script type="math/tex; mode=display">B=UAU^{-1}</script><p>我们有：</p>
<script type="math/tex; mode=display">UAU^{-1}(U\left|a'\right>)=B(U\left|a'\right>)=a'(U\left|a'\right>)</script><p>这符合上面的论述。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>Sakurai量子力学笔记</category>
      </categories>
      <tags>
        <tag>物理</tag>
      </tags>
  </entry>
  <entry>
    <title>位置算符、动量算符和波函数</title>
    <url>/2019/11/28/sakurai-qm-02-position-and-momentum/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h2 id="1-6-Position-Momentum-and-Translation"><a href="#1-6-Position-Momentum-and-Translation" class="headerlink" title="1.6 Position, Momentum and Translation"></a>1.6 Position, Momentum and Translation</h2><h3 id="连续谱"><a href="#连续谱" class="headerlink" title="连续谱"></a>连续谱</h3><p>前面讨论的观测量的本征值都是离散分布的，然而还有另一类观测量，其本征值是连续分布的。连续谱使用的数学和之前讨论的类似，只需要把求和换成积分，克罗内克符号$\delta_{a’a’’}$换成狄拉克函数$\delta(a’-a’’)$。连续谱下的基的正交归一化条件和完备性关系可以写为：</p>
<script type="math/tex; mode=display">\left<\xi'|\xi''\right>=\delta(\xi'-\xi'')</script><script type="math/tex; mode=display">\int \left|\xi'\right>\left<\xi'\right|\mathrm{d}\xi'=1</script><h3 id="位置和波函数"><a href="#位置和波函数" class="headerlink" title="位置和波函数"></a>位置和波函数</h3><p><strong>位置</strong>就是这样一个本征值连续分布的观测量。对位置算符$x$的本征右矢$\left|x’\right&gt;$，有：</p>
<script type="math/tex; mode=display">x\left|x'\right>=x'\left|x'\right></script><p>对任意的态$\left|\alpha\right&gt;$，由位置的完备性关系，可以在位置表象下展开：</p>
<script type="math/tex; mode=display">\left|\alpha\right>=\int \left|x'\right>\left<x'|\alpha\right>\mathrm{d}x'</script><p>如果我们用仪器测量一个处于$\left|\alpha\right&gt;$态上的粒子的位置，粒子会以一定概率塌缩到某个位置本征态。当然，物理的仪器都是有限精度的，我们只能得知粒子的位置在$x’$附近一个宽度为$\mathrm{d}x’$的区间内的概率为：</p>
<script type="math/tex; mode=display">\left|\left<x'|\alpha\right>\right|^2\mathrm{d}x'</script><p>其中$\psi(x’)=\left&lt; x’|\psi \right&gt;$被称作<strong>波函数</strong>，其模平方就是粒子在空间中的概率密度。</p>
<p>粒子一定会在空间中某处被发现，这给出了波函数和态矢的归一化条件：</p>
<script type="math/tex; mode=display">\left<\alpha|\alpha\right>=\int\left|\left<x'|\alpha\right>\right|^2\mathrm{d}x'=\int\left|\Psi(x')\right|^2\mathrm{d}x'=1</script><p>三维的情况和一维类似，我们假设存在位置本征态$\left|\mathbf{x}\right&gt;$，这即是假设三个方向的位置算符有共同的本征态$\left|x’,y’,z’\right&gt;$（否则的话粒子在任意时刻都不会有确定的位置——它不同方向的位置甚至都不对易！我们不希望这样）。如果位置本征态是完备的，我们仍可以展开任意的态矢：</p>
<script type="math/tex; mode=display">\left|\alpha\right>=\int \left|\mathbf{x'}\right>\left<\mathbf{x'}|\alpha\right>\mathrm{d}\mathbf{x'}</script><h3 id="无穷小平移"><a href="#无穷小平移" class="headerlink" title="无穷小平移"></a>无穷小平移</h3><p>我们定义<strong>无穷小平移算符</strong>$\mathscr{T}(\mathrm{d}\mathbf{x’})$，它作用在位置本征态$\left|\mathbf{x’}\right&gt;$上的结果为：</p>
<script type="math/tex; mode=display">\mathscr{T}(\mathrm{d}\mathbf{x'})\left|\mathbf{x'}\right>=\left|\mathbf{x'}+\mathrm{d}\mathbf{x'}\right></script><p>物理上，考虑任意态矢在坐标表象下的表示：$\left|\alpha\right&gt;=\int c_{\mathbf{x’}}\left|\mathbf{x’}\right&gt;$，无穷小平移使每个本征态$\left|\mathbf{x’}\right&gt;$都变成$\left|\mathbf{x’}+\mathrm{d}\mathbf{x’}\right&gt;$，相当于一个让物理系统平移了$\mathrm{d}\mathbf{x’}$的坐标变换（我们很快会看到，它的确是一个幺正算符）。</p>
<p>下面来考虑$\mathscr{T}(\mathrm{d}\mathbf{x’})$的性质，将其作用在任意态矢上：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \mathscr{T}(\mathrm{d}\mathbf{x'})\left|\alpha\right>
    &=\mathscr{T}(\mathrm{d}\mathbf{x'})\int \left|\mathbf{x'}\right>\left<\mathbf{x'}|\alpha\right>\mathrm{d}\mathbf{x'}\\
    &=\int \left|\mathbf{x'}+\mathrm{d}\mathbf{x'}\right>\left<\mathbf{x'}|\alpha\right>\mathrm{d}\mathbf{x'}=\int \left|\mathbf{x'}\right>\left<\mathbf{x'}-\mathrm{d}\mathbf{x'}|\alpha\right>\mathrm{d}\mathbf{x'}
    \\
    &=\int \left|\mathbf{x'}\right>\left<\mathbf{x'}|\mathscr{T}(\mathrm{d}\mathbf{x'})|\alpha\right>\mathrm{d}\mathbf{x'}
\end{aligned}</script><p>这说明$\mathscr{T}(\mathrm{d}\mathbf{x’})$作用到本征左矢上结果为：</p>
<script type="math/tex; mode=display">\left<\mathbf{x'}\right|\mathscr{T}(\mathrm{d}\mathbf{x'})=\left<\mathbf{x'}-\mathrm{d}\mathbf{x'}\right|</script><p>$\mathscr{T}(\mathrm{d}\mathbf{x’})$让左矢向相反方向平移了$\mathrm{d}\mathbf{x’}$。从而显然有$\mathscr{T}(\mathrm{d}\mathbf{x’})$的厄米共轭为：</p>
<script type="math/tex; mode=display">\mathscr{T}(\mathrm{d}\mathbf{x'})^\dagger=\mathscr{T}(-\mathrm{d}\mathbf{x'})</script><p>当然，根据定义，无穷小平移算符还应满足以下性质：</p>
<ul>
<li>$\mathscr{T}(\mathrm{d}\mathbf{x’})\mathscr{T}(\mathrm{d}\mathbf{x’’})=\mathscr{T}(\mathrm{d}\mathbf{x’}+\mathrm{d}\mathbf{x’’})$</li>
<li>$\mathscr{T}(-\mathrm{d}\mathbf{x’})=\mathscr{T}^{-1}(\mathrm{d}\mathbf{x’})$</li>
<li>根据上一条性质和$\mathscr{T}(\mathrm{d}\mathbf{x’})$的厄米共轭的表达式，它应该是幺正算符</li>
</ul>
<p>第一个性质要求$\mathscr{T}(\mathrm{d}\mathbf{x’})$是指数函数，即：</p>
<script type="math/tex; mode=display">\mathscr{T}(\mathrm{d}\mathbf{x'})=\exp \left(\mathbf{B}\cdot \mathrm{d}\mathbf{x'}\right)</script><p>由于$\mathrm{d}\mathbf{x’}$是无穷小量，可以展开并保留至一阶：</p>
<script type="math/tex; mode=display">
\mathscr{T}(\mathrm{d}\mathbf{x'})=1+\mathbf{B}\cdot \mathrm{d}\mathbf{x'}</script><p>上面厄米共轭的性质即成为：</p>
<script type="math/tex; mode=display">1+\mathbf{B}^\dagger\cdot \mathrm{d}\mathbf{x'}=1-\mathbf{B}\cdot \mathrm{d}\mathbf{x'}</script><p>从而$\mathbf{B}$是反厄米算符，定义$\mathbf{B}=-i\mathbf{K}$，则$\mathbf{K}$是厄米算符。很容易验证$\mathscr{T}(\mathrm{d}\mathbf{x’})$的幺正性。</p>
<p>总结一下，上面定义的无穷小平移算符有如下形式：</p>
<script type="math/tex; mode=display">\mathscr{T}(\mathrm{d}\mathbf{x'})=1-i\mathbf{K}\cdot \mathrm{d}\mathbf{x'}</script><p>下面考虑无穷小平移和位置算符的对易关系：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    &\mathbf{x}\mathscr{T}(\mathrm{d}\mathbf{x'})\left|\mathbf{x'}\right>=\mathbf{x}\left|\mathbf{x'}+\mathrm{d}\mathbf{x'}\right>=(\mathbf{x'}+\mathrm{d}\mathbf{x'})\left|\mathbf{x'}+\mathrm{d}\mathbf{x'}\right>
    \\&\mathscr{T}(\mathrm{d}\mathbf{x'})\mathbf{x}\left|\mathbf{x'}\right>=\mathbf{x'}\mathscr{T}(\mathrm{d}\mathbf{x'})\left|\mathbf{x'}\right>=\mathbf{x'}\left|\mathbf{x'}+\mathrm{d}\mathbf{x'}\right>
\end{aligned}</script><p>从而：</p>
<script type="math/tex; mode=display">[\mathbf{x}, \mathscr{T}(\mathrm{d}\mathbf{x'})]=\mathrm{d}\mathbf{x'}</script><p>带入上面的形式，有：</p>
<script type="math/tex; mode=display">[x_i,K_j]=i\delta_{ij}</script><h3 id="动量作为无穷小平移的生成元"><a href="#动量作为无穷小平移的生成元" class="headerlink" title="动量作为无穷小平移的生成元"></a>动量作为无穷小平移的生成元</h3><p>我们来考虑$\mathbf{K}$的物理意义。</p>
<p>在经典力学中，上面的无穷小平移可以作为正则变换考虑：</p>
<script type="math/tex; mode=display">\mathbf{x'}=\mathbf{X}=\mathbf{x}+\mathrm{d}\mathbf{x},\ \mathbf{p'}=\mathbf{P}=\mathbf{p}</script><p>这一变换的生成函数为：</p>
<script type="math/tex; mode=display">F(\mathbf{x}, \mathbf{P})=\mathbf{x}\cdot\mathbf{P}+\mathbf{p}\cdot \mathrm{d}\mathbf{x}</script><p>考虑到单位变换（$\mathbf{X}=\mathbf{x},\mathbf{P}=\mathbf{p}$）的生成函数是$F(\mathbf{x}, \mathbf{P})=\mathbf{x}\cdot\mathbf{P}$，这个生成函数和无穷小平移算符有着非常相似的形式。基于此，可以建立这样的对应，$\mathbf{K}$应该就是动量除以一个具有作用量量纲的常数。量子力学中这个常数就是$\hbar$。无穷小平移算符就可以表示为：</p>
<script type="math/tex; mode=display">\mathscr{T}(\mathrm{d}\mathbf{x'})=1-i\mathbf{p}\cdot \mathrm{d}\mathbf{x'}/\hbar</script><p>从而坐标和动量的对易关系：</p>
<script type="math/tex; mode=display">[x_i,p_j]=i\hbar\delta_{ij}</script><p>下面考虑动量的不同分量间的对易关系。不同方向上的无穷小平移算符是对易的（先在x方向平移再在y方向平移和先在y方向再在x方向平移是等效的），从而有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    [\mathscr{T}(\mathrm{d}x\hat{\mathbf{x}}),\mathscr{T}(\mathrm{d}x\hat{\mathbf{y}})]&=[1-ip_x\mathrm{d}x/\hbar, 1-ip_ydy/\hbar]
    \\&=-\frac{\mathrm{d}xdy}{\hbar^2}[p_x,p_y]=0
\end{aligned}</script><p>在其他方向上也同理，从而不同方向上的动量算符的对易关系为：</p>
<script type="math/tex; mode=display">[p_i,p_j]=0</script><p>不同方向的动量是对易的，这说明和位置算符类似，也存在三维的动量本征态$\left|\mathbf{p’}\right&gt;$。</p>
<h3 id="正则对易关系"><a href="#正则对易关系" class="headerlink" title="正则对易关系"></a>正则对易关系</h3><p>上面的对易关系：</p>
<script type="math/tex; mode=display">[x_i,x_j]=0,[p_i,p_j]=0,[x_i,p_j]=i\hbar\delta_{ij}</script><p>被称为<strong>正则对易关系</strong>。</p>
<p>注意到正则对易关系和经典力学中的泊松括号其实有着相似的形式，结果也是乘了一个$i\hbar$。一般地，量子力学中有经典对应的各种观测量的对易关系都可以对应为：</p>
<script type="math/tex; mode=display">[,]_{classical}=\frac{[,]}{i\hbar}</script><p>泊松括号的一些性质也可以自然的被应用在对易子上，比如：</p>
<script type="math/tex; mode=display">[A,BC]=[A,B]C+B[A,C]</script><script type="math/tex; mode=display">[A,[B,C]]+[B,[C,A]]+[C,[A,B]]=0</script><h2 id="1-7-Wave-Functions-in-Position-and-Momentum-Space"><a href="#1-7-Wave-Functions-in-Position-and-Momentum-Space" class="headerlink" title="1.7 Wave Functions in Position and Momentum Space"></a>1.7 Wave Functions in Position and Momentum Space</h2><h3 id="位置空间波函数"><a href="#位置空间波函数" class="headerlink" title="位置空间波函数"></a>位置空间波函数</h3><p>位置表象的波函数为$\psi(x’)=\left&lt; x’|\psi \right&gt;$，从这一角度，我们可以得到波动力学中的一系列定义：</p>
<script type="math/tex; mode=display">\left<\psi|\phi\right>=\int \left<\psi|x'\right>\left<x'|\phi\right>\mathrm{d}x'=\int \psi^*(x')\phi(x')\mathrm{d}x' \tag{1.7.2}</script><script type="math/tex; mode=display">
\begin{aligned}
    \left<\psi|A|\phi\right>&=\iint \left<\psi|x'\right>\left<x'|A|x''\right>\left<x''|\phi\right>\mathrm{d}x'\mathrm{d}x''
    \\&=\iint \psi^*(x')\left<x'|A|x''\right>\phi(x'')\mathrm{d}x'\mathrm{d}x''
\end{aligned}
\tag{1.7.3}</script><p>对一个一般的算符，矩阵元$\left&lt; x’|A|x’’ \right&gt;$是$x’,x’’$的函数。而当$A$是位置算符的函数时（从而拥有相同的本征态），我们有：</p>
<script type="math/tex; mode=display">\left<x'|f(x)|x''\right>=\left<x'|f(x'')|x''\right>=f(x'')\delta(x'-x'')</script><p>上面的乘积就可以写为：</p>
<script type="math/tex; mode=display">\left<\psi|f(x)|\phi\right>=\int \psi^*(x')f(x')\phi(x')\mathrm{d}x'</script><h3 id="动量空间波函数"><a href="#动量空间波函数" class="headerlink" title="动量空间波函数"></a>动量空间波函数</h3><p>下面我们来考虑动量表象下波函数和位置空间波函数的关系，从无穷小平移算符出发：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \left(1-\frac{ip\delta x'}{\hbar}\right)\left|\alpha\right>&=\int \mathscr{T}(\delta x')\left|x'\right>\left<x'|\alpha\right>\mathrm{d}x'
    \\&=\int \left|x'+\delta x'\right>\left<x'|\alpha\right>\mathrm{d}x'
    \\&=\int \left|x'\right>\left<x'-\delta x'|\alpha\right>\mathrm{d}x'
    \\&=\int \left|x'\right>\left(\left<x'|\alpha\right>-\delta x'\frac{\partial}{\partial x'}\left<x'|\alpha\right>\right)\mathrm{d}x'
\end{aligned}</script><p>对比等式两边，我们有：</p>
<script type="math/tex; mode=display">p\left|\alpha\right>=-i\hbar\int \left|x'\right>\frac{\partial}{\partial x'}\left<x'|\alpha\right>\mathrm{d}x'</script><p>从而：</p>
<script type="math/tex; mode=display">
\left<x'|p|\phi\right>=-i\hbar\frac{\partial}{\partial x'}\left<x'|\phi\right> \tag{1.7.4}</script><p>等式两边其实都是波函数，因此这定义了一个波函数空间上的线性映射，将波函数映射为动量算符作用后的态矢对应的波函数。这也和波动力学中动量算符的定义一致：</p>
<script type="math/tex; mode=display">p=-i\hbar\frac{\partial}{\partial x'}</script><p>现在我们可以考虑态矢在动量表象下的展开，即动量空间波函数。利用完备性关系，我们有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \left|\phi\right>&=\int \left|p'\right>\left<p'|\phi\right>\mathrm{d}p'
    \\&=\iint \left|p'\right>\left<p'|x'\right>\left<x'|\phi\right>\mathrm{d}p'\mathrm{d}x'
    \\&=\int \mathrm{d}p'\left|p'\right>\int \left<p'|x'\right>\phi(x')\mathrm{d}x'
\end{aligned}</script><p>对其中出现的$\left&lt; p’|x’ \right&gt;$，考虑1.7.4中任意态$\phi$为动量本征态的情况，有：</p>
<script type="math/tex; mode=display">\left<x'|p|p'\right>=p'\left<x'|p'\right>=-i\hbar\frac{\partial}{\partial x'}\left<x'|p'\right></script><p>从而：</p>
<script type="math/tex; mode=display">\left<x'|p'\right>=N\exp\left(\frac{ip'x'}{\hbar}\right)</script><p>其中$N$是归一化常数，考虑$\left&lt; x’|x’’ \right&gt;$：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \left<x'|x''\right>&=\delta(x'-x'')
    \\&=\int \left<x'|p'\right>\left<p'|x''\right>\mathrm{d}p'
    \\&=\int \left|N\right|^2\exp\left[\frac{ip'(x'-x'')}{\hbar}\right]\mathrm{d}p'
    \\&=2\pi\hbar\left|N\right|^2\delta(x'-x'')
\end{aligned}</script><p>从而有：</p>
<script type="math/tex; mode=display">\left<x'|p'\right>=\frac{1}{\sqrt{2\pi\hbar}}\exp\left(\frac{ip'x'}{\hbar}\right) \tag{1.7.5}</script><p>从而我们得到位置空间波函数到动量空间波函数的变换：</p>
<script type="math/tex; mode=display">\phi_p(p')=\frac{1}{\sqrt{2\pi\hbar}}\int \phi_x(x')\exp\left(\frac{ip'x'}{\hbar}\right)\mathrm{d}x' \tag{1.7.6}</script><p>相似的，可以得到动量空间到位置空间的变换：</p>
<script type="math/tex; mode=display">\phi_x(x')=\frac{1}{\sqrt{2\pi\hbar}}\int \phi_p(p')\exp\left(-\frac{ip'x'}{\hbar}\right)\mathrm{d}p' \tag{1.7.7}</script><p>这是傅里叶变换和傅里叶逆变换的形式。</p>
<h3 id="推广至三维"><a href="#推广至三维" class="headerlink" title="推广至三维"></a>推广至三维</h3><p>三维的归一化条件和完备性关系成为：</p>
<script type="math/tex; mode=display">\left<\mathbf{x'}|\mathbf{x''}\right>=\delta^3(\mathbf{x'}-\mathbf{x''})</script><script type="math/tex; mode=display">\int d^3\mathbf{x'}\left|\mathbf{x'}\right>\left<\mathbf{x'}\right|=1</script><p>对动量本征态也是同样。</p>
<p>三维的动量算符作用在波函数上，微分成为梯度，1.7.4成为：</p>
<script type="math/tex; mode=display">\left<\mathbf{x'}|\mathbf{p}|\phi\right>=-i\hbar\nabla'\left<\mathbf{x'}|\phi\right></script><p>1.7.5成为：</p>
<script type="math/tex; mode=display">\left<\mathbf{x'}|\mathbf{p'}\right>=\frac{1}{[2\pi\hbar]^{3/2}}\exp\left(\frac{i\mathbf{x'}\cdot\mathbf{p'}}{\hbar}\right)</script><p>位置空间和动量空间波函数间的变换也成为三维傅里叶变换：</p>
<script type="math/tex; mode=display">\phi_p(\mathbf{p'})=\frac{1}{[2\pi\hbar]^{3/2}}\int \phi_x(\mathbf{x'})\exp\left(\frac{i\mathbf{p'}\cdot\mathbf{x'}}{\hbar}\right)\mathrm{d}\mathbf{x'} \tag{1.7.6}</script><script type="math/tex; mode=display">\phi_x(\mathbf{x'})=\frac{1}{[2\pi\hbar]^{3/2}}\int \phi_p(\mathbf{p'})\exp\left(-\frac{i\mathbf{p'}\cdot\mathbf{x'}}{\hbar}\right)\mathrm{d}\mathbf{p'} \tag{1.7.7}</script><p>注意三维中位置波函数的量纲即成为长度的-3/2次方，这样粒子在全空间被发现的概率才仍然会是无量纲的1。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>Sakurai量子力学笔记</category>
      </categories>
      <tags>
        <tag>物理</tag>
      </tags>
  </entry>
  <entry>
    <title>量子态的时间演化</title>
    <url>/2020/10/08/sakurai-qm-03-time-evolution/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h2 id="时间演化算符"><a href="#时间演化算符" class="headerlink" title="时间演化算符"></a>时间演化算符</h2><p>上一章讨论了态矢的定义和基本性质，以及同一态矢在不同表象下的表示，并特别考虑了位置表象和动量表象。这一章将讨论动力学，即量子态随时间的演化。需要说明的是这里时间并不是一个观测量，即没有时间算符，而是作为一个参量出现。这也体现了在量子力学中时空地位的不对等，而在相对论协变的量子场论中时间和空间才会有对等的地位。</p>
<p>为了强调系统的时间演化，我们引入下面的记号，$t_0$时系统的状态为$\left|\alpha\right&gt;$，在$t$时的状态记为</p>
<script type="math/tex; mode=display">\left|\alpha,t_0;t\right></script><p>另外，$\left|\alpha,t_0;t_0\right&gt;$就简记为$\left|\alpha,t_0\right&gt;$。我们要研究的便是$\left|\alpha,t_0\right&gt;$和$\left|\alpha,t_0;t\right&gt;$的关系。</p>
<p>自然地，我们可以用一个算符联系$t_0$和$t$时的状态：</p>
<script type="math/tex; mode=display">\left|\alpha,t_0;t\right> = \mathscr{U}(t,t_0) \left|\alpha,t_0\right></script><p>这就是<strong>时间演化算符</strong>$\mathscr{U}(t,t_0)$。下面根据我们希望时间演化算符满足的性质给出它的具体形式。</p>
<p>首先我们考虑<strong>概率守恒</strong>，将粒子的初态写成某个观测量$A$本征态的叠加：</p>
<script type="math/tex; mode=display">\left|\alpha,t_0\right> = \sum c_{a'}(t_0)\left|a'\right></script><p>将态矢归一化，则系数的模平方就是系统处于对应本征态上的概率。在时间$t$时，粒子的状态成为</p>
<script type="math/tex; mode=display">\left|\alpha,t_0;t\right> = \sum c_{a'}(t)\left|a'\right></script><p>此时我们仍然希望，$\sum |c_{a’}(t)|^2 = 1$，即粒子处在$A$的所有本征态的概率之和还应是1，而不会凭空出现或消失。从而：</p>
<script type="math/tex; mode=display">\left<\alpha,t_0;t|\alpha,t_0;t\right> = \left<\alpha,t_0;t|\mathscr{U}(t,t_0)^\dagger\mathscr{U}(t,t_0)|\alpha,t_0;t\right> = \left<\alpha,t_0|\alpha,t_0\right> = 1</script><p>可以看到，对概率守恒的要求给出的限制是，<strong>时间演化算符应该是幺正算符</strong>。</p>
<p>另外显然需要满足的性质是：</p>
<script type="math/tex; mode=display">\mathscr{U}(t_2,t_0) = \mathscr{U}(t_2,t_1)\mathscr{U}(t_1,t_0)</script><p>以及</p>
<script type="math/tex; mode=display">\lim_{t\rightarrow 0} \mathscr{U}(t,t_0) = 1</script><p>考虑无穷小时间变换$\mathscr{U}(t_0+\mathrm{d}t,t_0)$，和前面无穷小平移算符的推导类似，我们可以给出无穷小时间变换应该有如下的形式：</p>
<script type="math/tex; mode=display">\mathscr{U}(t_0+\mathrm{d}t,t_0) = 1 - i\Omega\mathrm{d}t</script><p>其中$\Omega$是一个厄米算符。</p>
<p>$\Omega$具有频率的量纲，考虑经典力学中哈密顿量是时间演化的生成元，而能量量纲除以$\hbar$也有频率的量纲，我们取$\Omega=H/\hbar$，从而</p>
<script type="math/tex; mode=display">\mathscr{U}(t_0+\mathrm{d}t,t_0) = 1 - iH\mathrm{d}t/\hbar</script><p>这里$\hbar$再一次出现，在后面我们会说明这和无穷小平移算符中的$\hbar$应该是同一个常量，这样运动方程才能回到经典近似。</p>
<h2 id="薛定谔方程"><a href="#薛定谔方程" class="headerlink" title="薛定谔方程"></a>薛定谔方程</h2><h3 id="时间演化算符的薛定谔方程"><a href="#时间演化算符的薛定谔方程" class="headerlink" title="时间演化算符的薛定谔方程"></a>时间演化算符的薛定谔方程</h3><p>有了无穷小时间变换的形式，我们就可以导出更一般的时间演化算符。由</p>
<script type="math/tex; mode=display">\mathscr{U}(t+\mathrm{d}t,t_0) = \mathscr{U}(t+\mathrm{d}t,t)\mathscr{U}(t,t_0) = (1 - iH\mathrm{d}t/\hbar)\mathscr{U}(t,t_0)</script><p>即</p>
<script type="math/tex; mode=display">\mathscr{U}(t+\mathrm{d}t,t_0) - \mathscr{U}(t,t_0) =  - i\frac{H}{\hbar}\mathrm{d}t</script><p>即</p>
<script type="math/tex; mode=display">i\hbar\frac{\partial}{\partial t}\mathscr{U}(t,t_0) = H\mathscr{U}(t,t_0)</script><p>这就是<strong>时间演化算符的薛定谔方程</strong>。</p>
<p>将上式作用在态矢$\left|\alpha,t_0\right&gt;$上，即有：</p>
<script type="math/tex; mode=display">i\hbar\frac{\partial}{\partial t}\left|\alpha,t_0;t\right> = H\left|\alpha,t_0;t\right></script><p>即为<strong>态矢的薛定谔方程</strong>。</p>
<p>薛定谔方程可以让我们解出时间演化算符的具体形式，若哈密顿算符不含时，则有</p>
<script type="math/tex; mode=display">\mathscr{U}(t,t_0) = \exp\left[\frac{-iH(t-t_0)}{\hbar}\right]</script><p>若哈密顿算符依赖时间，但不同时间的$H$对易，则时间演化算符可以写成</p>
<script type="math/tex; mode=display">\mathscr{U}(t,t_0) = \exp\left[-\frac{i}{\hbar} \int_{t_0}^{t}H(t')\mathrm{d}t' \right]</script><p>而若不同时间的哈密顿算符不对易（例如，系统处在磁场中，哈密顿算符中会有$\mathbf{S}\cdot\mathbf{B}$的项，若磁场的方向随时间变化，由于不同方向的自旋不对易，从而不同时间的哈密顿算符不对易），此时的时间演化算符为</p>
<script type="math/tex; mode=display">\mathscr{U}(t,t_0) = 1 + \sum_{n=1}^\infty \left(-\frac{i}{\hbar}\right)^n \int_{t_0}^{t}\mathrm{d}t_1\int_{t_0}^{t_1}\mathrm{d}t_2\cdots\int_{t_0}^{t_{n-1}}\mathrm{d}t_n H(t_1)H(t_2)\cdots H(t_{n})</script><p>这被称作戴森序列(Dyson series)。</p>
<h3 id="哈密顿算符不含时情况下的演化"><a href="#哈密顿算符不含时情况下的演化" class="headerlink" title="哈密顿算符不含时情况下的演化"></a>哈密顿算符不含时情况下的演化</h3><p>下面讨论最简单的情况，即哈密顿量不含时时系统的演化。此时的时间演化算符为（简单起见，取$t_0=0$）</p>
<script type="math/tex; mode=display">\mathscr{U}(t) = \exp\left(\frac{-iHt}{\hbar}\right)</script><p>时间演化算符作用在能量本征态上的结果是显而易见的，若$\left|a’\right&gt;$是一组能量本征态，对应的本征能量是$E_{a’}$，则</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \exp\left(\frac{-iHt}{\hbar}\right) &= \sum_{a'}\sum_{a''} \left|a''\right>\left<a''\right|\exp\left(\frac{-iHt}{\hbar}\right) \left|a'\right>\left<a'\right|
    \\&= \sum_{a'} \exp\left(\frac{-i E_{a'} t}{\hbar}\right) \left|a'\right>\left<a'\right|
\end{aligned}</script><p>对一个任意的态</p>
<script type="math/tex; mode=display">\left|\alpha\right> = \sum_{a'} c_{a'}\left|a'\right></script><p>有</p>
<script type="math/tex; mode=display">\left|\alpha,0;t\right> = \exp\left(\frac{-iHt}{\hbar}\right)\left|\alpha\right> = \sum_{a'} c_{a'}\exp\left(\frac{-i E_{a'} t}{\hbar}\right) \left|a'\right></script><p>即<strong>如果我们要考虑任意态的时间演化，需要将其分解为能量本征态的叠加</strong>。特别地，如果系统的初态就是能量本征态$\left|a’\right&gt;$，那么时间演化只是给其乘上了一个整体相位。</p>
<p>态的时间演化自然会产生观测效应，但态矢本身是没法测量的，我们只能对各种观测量进行测量。这里比较重要的便是观测量的平均值。一个特别的情况是系统初态处在能量本征态，此时时间演化只是乘上了一个整体相位，不会产生观测效应：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \left<B\right> &= \left<a',0;t|B|a',0;t\right>
    \\&= \left<a'\right| \exp\left(\frac{-i E_{a'} t}{\hbar}\right) B \exp\left(\frac{-i E_{a'} t}{\hbar}\right) \left|a'\right>
    \\&= \left<a'|B|a'\right>
\end{aligned}</script><p>可见观测量$B$的平均值不会随时间变化。因此能量本征态也被称为<strong>定态</strong>。</p>
<p>而对非定态，观测量的平均值的演化为：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \left<B\right> &= \left[\sum_{a'} c_{a'}^*\exp\left(\frac{i E_{a'} t}{\hbar}\right) \left<a'\right|\right] B \left[\sum_{a''} c_{a''}\exp\left(\frac{-i E_{a''} t}{\hbar}\right) \left|a''\right>\right]
    \\&= \sum_{a',a''} c_{a'}c_{a''}^* \exp\left[\frac{-i (E_{a''}-E_{a'}) t}{\hbar}\right] \left<a'|B|a''\right>
    \\&= \sum_{a',a''} c_{a'}c_{a''}^* \exp(-i\omega_{a''a'}t) \left<a'|B|a''\right>
\end{aligned}</script><p>其中</p>
<script type="math/tex; mode=display">\omega_{a''a'} = \frac{E_{a''}-E_{a'}}{\hbar}</script><p>即非定态的平均值为$n\times n$个角频率为$\omega_{a’’a’}$的周期震荡项之和。</p>
<h3 id="能量-时间不确定性关系"><a href="#能量-时间不确定性关系" class="headerlink" title="能量-时间不确定性关系"></a>能量-时间不确定性关系</h3><p>在这一部分我们考虑随时间演化后的态和初态有多少相似，为此我们引入<strong>关联幅度</strong>：</p>
<script type="math/tex; mode=display">C(t) = \left<\alpha|\alpha,0;t\right> = \left<\alpha|\mathscr{U}(t)|\alpha\right></script><p>这实际上就是末态和初态的内积，由于时间演化算符是幺正算符，态矢的模长并不会变化，因此内积的大小也就一定程度上反映了末态和初态的相似程度。</p>
<p>容易写出关联幅度的表达式</p>
<script type="math/tex; mode=display">
\begin{aligned}
    C(t) &= \left<\alpha|\mathscr{U}(t)|\alpha\right>
    \\&= \left(\sum_{a'} c_{a'}^* \left<a'\right| \right) \left[\sum_{a''} c_{a''}\exp\left(\frac{-iE_{a''}t}{\hbar}\right) \left|a'\right> \right]
    \\&= \sum_{a'} |c_{a'}|^2 \exp\left(\frac{-iE_{a'}t}{\hbar}\right) 
\end{aligned}</script><p>为了进一步讨论的方便，我们需要考虑能量分布的连续谱，此时态$\left|\alpha\right&gt;$可以写成：</p>
<script type="math/tex; mode=display">\left|\alpha\right> = \int g(E)\left|a'\right> \rho(E)\mathrm{d}E</script><p>其中$\rho(E)$是$E$附近态密度，$g(E)$就是系数。关联幅度就成为</p>
<script type="math/tex; mode=display">C(t) = \int |g(E)|^2 \exp\left(\frac{-iEt}{\hbar}\right) \rho(E)\mathrm{d}E</script><p>我们考虑这样的情况，能量只分布在$E_0$附近宽$\Delta E$的区间内（相当于能量有$\Delta E$的不确定度），将关联幅度写为</p>
<script type="math/tex; mode=display">C(t) = \exp\left(\frac{-iE_0t}{\hbar}\right) \int |g(E)|^2 \exp\left[\frac{-i(E-E_0)t}{\hbar}\right] \rho(E)\mathrm{d}E</script><p>考虑积分中$\exp[-i(E-E_0)t/\hbar]$的项，当$t$很大时这一项会快速震荡，从而导致积分很快衰减为0。从而我们可以得到这样的特征时间，满足</p>
<script type="math/tex; mode=display">\frac{\Delta E t}{\hbar} \simeq 1</script><p>或</p>
<script type="math/tex; mode=display">\Delta t \Delta E \simeq \hbar</script><p>这就是<strong>能量-时间不确定性关系</strong>。其物理意义是初始能量有$\Delta E$的弥散的系统，其演化到与初态“面目全非”的时标就是$\Delta t$。特别地，考虑$\Delta E\sim 0$，初态趋近于能量本征态，此时$\Delta t\sim \infty$，也就是说初态处于能量本征态上的系统能一直保持其状态，这和我们前面的讨论相符合。</p>
<h2 id="波动力学"><a href="#波动力学" class="headerlink" title="波动力学"></a>波动力学</h2><p>最后，我们进入波动力学的框架，考虑波函数$\psi(\mathbf{x’},t)=\left&lt;\mathbf{x’}|\alpha,t_0;t\right&gt;$的演化，将哈密顿算符写成</p>
<script type="math/tex; mode=display">H = \frac{\mathbf{p}^2}{2m} + V(\mathbf{x},t)</script><p>带入上面的方程，</p>
<script type="math/tex; mode=display">
\begin{aligned}
    i\hbar\frac{\partial}{\partial t}\left<\mathbf{x'}|\alpha,t_0;t\right> &= \left< \mathbf{x'}\right|\frac{\mathbf{p}^2}{2m} + V(\mathbf{x},t) \left|\alpha,t_0;t\right>
    \\&= \left(-\frac{\hbar^2}{2m}\nabla'^2 + V(\mathbf{x'},t)\right) \left<\mathbf{x'}|\alpha,t_0;t\right>
\end{aligned}</script><p>即得到我们熟悉的<strong>波动力学中的薛定谔方程</strong>：</p>
<script type="math/tex; mode=display">i\hbar\frac{\partial}{\partial t}\psi(\mathbf{x'},t) = \left(-\frac{\hbar^2}{2m}\nabla'^2 + V(\mathbf{x'},t)\right) \psi(\mathbf{x'},t)</script><p>若$V=V(\mathbf{x’})$是时间无关的，那么哈密顿算符也是时间无关的，上面的讨论告诉我们此时能量本征态的演化</p>
<script type="math/tex; mode=display">\left<\mathbf{x'}|a',t_0;t\right> =\left<\mathbf{x'}|a',t_0\right> \exp\left(\frac{-iE_{a'}t}{\hbar}\right)</script><p>带入上面的薛定谔方程，分离时间和空间变量，得到<strong>定态薛定谔方程</strong>：</p>
<script type="math/tex; mode=display">\left(-\frac{\hbar^2}{2m}\nabla^2 + V(\mathbf{x})\right) u_E(\mathbf{x}) = Eu_E(\mathbf{x})</script><p>这其实就是求解能量本征态的方程。</p>
<h3 id="概率守恒"><a href="#概率守恒" class="headerlink" title="概率守恒"></a>概率守恒</h3><p>我们已经在上一章的讨论中知道，$\rho=|\left&lt;\mathbf{x}|\alpha\right&gt;|^2=|\psi(\mathbf{x})|^2$是$\mathbf{x}$处的概率密度。从而由薛定谔方程就可以得出</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}\rho}{\mathrm{d}t} + \nabla\cdot\mathbf{j} = 0</script><p>这有着连续性方程的形式。其中</p>
<script type="math/tex; mode=display">\mathbf{j} = -\frac{i\hbar}{2m}\left(\psi^*\nabla\psi - \psi\nabla\psi^*\right)</script><p>为<strong>概率流密度</strong>。考虑其物理意义：</p>
<script type="math/tex; mode=display">\int \mathbf{j}\mathrm{d}^3x = -\frac{i\hbar}{m}\int\psi^*\nabla\psi\mathrm{d}^3x = \frac{\left<\mathbf{p}\right>}{m}</script><p>$\mathbf{j}$在全空间的积分就是这一时刻动量的平均值除以质量，这在经典力学中就是粒子的“速度”，因此将$\mathbf{j}$定义为概率流密度是合理的。于是我们可以说，薛定谔方程蕴含了<strong>概率守恒</strong>。</p>
<h3 id="经典近似"><a href="#经典近似" class="headerlink" title="经典近似"></a>经典近似</h3><p>进一步考虑波函数的物理意义，令</p>
<script type="math/tex; mode=display">\psi(\mathbf{x},t) = \sqrt{\rho(\mathbf{x},t)}\exp\left(i\frac{S(\mathbf{x},t)}{\hbar}\right)</script><p>带入概率流密度的定义，有</p>
<script type="math/tex; mode=display">\mathbf{j} = \frac{\rho\nabla S}{m}</script><p>即概率流密度和波函数的相位的梯度成正比。</p>
<p>将上式带入薛定谔方程：</p>
<script type="math/tex; mode=display">i\hbar\left(\frac{\partial \sqrt{\rho}}{\partial t} + i\frac{\sqrt{\rho}}{\hbar}\frac{\partial S}{\partial t}\right) \exp\left(i\frac{S(\mathbf{x},t)}{\hbar}\right) = \left[-\frac{\hbar^2}{2m}\left(\nabla^2\sqrt{\rho}-\sqrt{\rho}\frac{|\nabla S|^2}{\hbar^2}\right) + V\sqrt{\rho}\right] \exp\left(i\frac{S(\mathbf{x},t)}{\hbar}\right)</script><p>经典近似下$\hbar\rightarrow 0$，只保留零阶项，则得到</p>
<script type="math/tex; mode=display">\frac{|\nabla S|^2}{2m} + V + \frac{\partial S}{\partial t} = 0</script><p>考虑哈密顿量为$H=p^2/2m+V$，这即是经典力学中的哈密顿-雅可比方程。这里的$S$，即波函数的相位乘$\hbar$，对应了经典的作用量。于是我们可以看到，在$\hbar\rightarrow 0$的经典近似下，量子力学回到了经典力学。</p>
<p>考虑定态的时间演化，$\mathscr{U}=\exp(-iEt/\hbar)$，因此对定态，$S$的时间和空间依赖就可以分离变量，</p>
<script type="math/tex; mode=display">S(\mathbf{x},t) = W(\mathbf{x}) - Et</script><p>$W$就是哈密顿特征函数。</p>
<p>H-J方程会给出动量</p>
<script type="math/tex; mode=display">\mathbf{p}_\mathrm{classical} = \nabla S</script><p>经典的动量的方向是等相位的波阵面的法向。回想在光学中，几何光学的光线在波动光学中就是波线，即垂直波阵面的直线。基于这样的相似性，我们可以说经典粒子就如同几何光学中的光线，波动力学回到经典力学就如同波动光学回到几何光学。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>Sakurai量子力学笔记</category>
      </categories>
      <tags>
        <tag>物理</tag>
      </tags>
  </entry>
  <entry>
    <title>薛定谔绘景和海森堡绘景</title>
    <url>/2020/10/17/sakurai-qm-04-schrodinger-picture-and-heisenberg-picture/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h2 id="时间演化的两种等效描述"><a href="#时间演化的两种等效描述" class="headerlink" title="时间演化的两种等效描述"></a>时间演化的两种等效描述</h2><p>在进入正题之前，我们先来考虑幺正变换，即对所有态矢实施：</p>
<script type="math/tex; mode=display">\left|\alpha\right> \rightarrow U\left|\alpha\right></script><p>其中$U$可以是任意的幺正算符，包括空间平移或时间演化等。</p>
<p>注意幺正变换后内积保持不变，</p>
<script type="math/tex; mode=display">\left<\alpha'|\beta'\right> = \left<\alpha|U^\dagger U|\beta\right> =  \left<\alpha|\beta\right></script><p>而形如$\left&lt;\alpha|X|\beta\right&gt;$的量则会产生变化：</p>
<script type="math/tex; mode=display">\left<\alpha'|X|\beta'\right> = \left<\alpha|U^\dagger X U|\beta\right></script><p>由于我们实际上不能直接观测算符，而只能试图测量观测量在某组基下的分量，也就是形如$\left&lt;\alpha|X|\beta\right&gt;$的量，因此可以说下面两种看法：</p>
<ul>
<li>算符不变，态矢$\left|\alpha\right&gt; \rightarrow U\left|\alpha\right&gt;$</li>
<li>态矢不变，算符$X\rightarrow U^\dagger X U$</li>
</ul>
<p>是等价的。</p>
<p>时间演化算符就是一个幺正算符，因此对于量子系统的时间演化，我们也可以认为(1)态矢随时间演化而算符不变，或(2)算符随时间演化而态矢不变。第一种观点称为<strong>薛定谔绘景</strong>，第二种观点称为<strong>海森堡绘景</strong>。</p>
<p>由于态矢被用来描述系统的状态，为了描述随时间变化的系统，薛定谔绘景似乎是自然而然的，而海森堡绘景似乎物理意义并不明确。但事实上，考虑观测量是由算符表示的，海森堡绘景下可以更方便地看出观测量的演化，而这正是经典力学中我们所关注的。下面我们就来进一步讨论算符随时间如何演化。</p>
<h2 id="海森堡运动方程"><a href="#海森堡运动方程" class="headerlink" title="海森堡运动方程"></a>海森堡运动方程</h2><p>为了方便区分，对算符$A$，海森堡绘景下记为$A^{(H)}$，薛定谔绘景下记为$A^{(S)}$。$t=0$时有</p>
<script type="math/tex; mode=display">A^{(H)}(0) = A^{(S)}</script><p>海森堡绘景下的演化</p>
<script type="math/tex; mode=display">A^{(H)}(t) = \mathscr{U}(t)^\dagger A^{(S)} \mathscr{U}(t)</script><p>对时间求导，</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \frac{\mathrm{d}A^{(H)}}{\mathrm{d}t} &= \frac{\mathrm{d}\mathscr{U}^\dagger}{\mathrm{d}t}A^{(S)} \mathscr{U} + \mathscr{U}^\dagger A^{(S)} \frac{\mathrm{d}\mathscr{U}}{\mathrm{d}t}
    \\&= -\frac{1}{i\hbar}\mathscr{U}^\dagger H^{(S)} \mathscr{U}\mathscr{U}^\dagger A^{(S)}\mathscr{U} + \frac{1}{i\hbar} \mathscr{U}^\dagger A^{(S)} \mathscr{U}\mathscr{U}^\dagger H^{(S)}\mathscr{U}
    \\&= \frac{1}{i\hbar} \left[\mathscr{U}^\dagger A^{(S)} \mathscr{U}, \mathscr{U}^\dagger H^{(S)}\mathscr{U}\right]
    \\&= \frac{1}{i\hbar} \left[A^{(H)}, H^{(H)}\right]
\end{aligned}</script><p>将$H$带入上式，可知$H$在海森堡绘景下也不变，故可以简写为</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}A^{(H)}}{\mathrm{d}t} = \frac{1}{i\hbar} \left[A^{(H)}, H\right]</script><p>这即为<strong>海森堡运动方程</strong>。</p>
<p>海森堡运动方程的物理意义非常明显。将对易子$/i\hbar$换成泊松括号，这就是哈密顿力学中的运动方程。值得注意的是，即使算符$A$没有经典对应，海森堡运动方程仍然适用，这说明量子力学回到经典力学的过程是不可逆的。</p>
<h3 id="Erenfest定理"><a href="#Erenfest定理" class="headerlink" title="Erenfest定理"></a>Erenfest定理</h3><p>作为例子，考虑一个处在势场中的粒子：</p>
<script type="math/tex; mode=display">H = \frac{\mathbf{p}^2}{2m} + V(\mathbf{x})</script><script type="math/tex; mode=display">\frac{\mathrm{d}\mathbf{x}}{\mathrm{d}t} = \frac{1}{i\hbar}[\mathbf{x},H] = \frac{\mathbf{p}}{m}</script><script type="math/tex; mode=display">\frac{\mathrm{d}\mathbf{p}}{\mathrm{d}t}  = \frac{1}{i\hbar}[\mathbf{p},H] = -\nabla V</script><p>从而</p>
<script type="math/tex; mode=display">m\frac{\mathrm{d}^2\mathbf{x}}{\mathrm{d}t^2} = -\nabla V</script><p>不出所料地，我们得到了牛顿第二定律的形式。求平均值即得到</p>
<script type="math/tex; mode=display">m\frac{\mathrm{d}^2\langle\mathbf{x}\rangle}{\mathrm{d}t^2} = -\nabla \langle V\rangle</script><p>这就是<strong>Erenfest定理</strong>。</p>
<h2 id="本征矢的演化"><a href="#本征矢的演化" class="headerlink" title="本征矢的演化"></a>本征矢的演化</h2><p>最后，我们来讨论一下算符$A$的本征矢的演化。显然，算符的本征矢是依赖算符的，因此在薛定谔绘景下本征矢和算符一样不随时间改变：</p>
<script type="math/tex; mode=display">A^{(S)}|a'\rangle = a'|a'\rangle</script><p>从而海森堡绘景下</p>
<script type="math/tex; mode=display">A^{(H)}\mathscr{U}^\dagger|a'\rangle = \mathscr{U}^\dagger A^{(S)} |a'\rangle = a' \mathscr{U}^\dagger|a'\rangle</script><p>从而海森堡绘景下，本征矢按$\mathscr{U}^\dagger$演化，对应的本征值不变：</p>
<script type="math/tex; mode=display">|a', t\rangle_{H} = \mathscr{U}^\dagger |a', t=0\rangle_{H}</script><p>或者说其遵循反号的薛定谔方程：</p>
<script type="math/tex; mode=display">i\hbar\frac{\partial}{\partial t}|a', t\rangle_{H} = -H|a', t\rangle_{H}</script><p>特别地，考虑把态矢$|\alpha\rangle$展开成某个算符的本征矢${|a’\rangle}$的线性叠加，相应的系数为</p>
<script type="math/tex; mode=display">c_{a'} = \langle a' | \alpha \rangle</script><p>考虑其时间演化，在薛定谔绘景下，$|\alpha\rangle$随时间变化，</p>
<script type="math/tex; mode=display">c_{a'}(t) = \langle a'| \cdot \left(\mathscr{U}|\alpha \rangle\right)</script><p>海森堡绘景下，$|a’\rangle$随时间变化，</p>
<script type="math/tex; mode=display">c_{a'}(t) = \left(\langle a'|\mathscr{U}\right) \cdot |\alpha\rangle</script><p>可见两种绘景依然给出相同结果。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>Sakurai量子力学笔记</category>
      </categories>
      <tags>
        <tag>物理</tag>
      </tags>
  </entry>
  <entry>
    <title>绪论——恒星物理</title>
    <url>/2020/09/08/stellar-physics-01-introduction/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>这一系列为中国科大2020年春季学期课程《恒星物理基础》的课程笔记。<br>所用教材为An Introduction to the Theory of Stellar Structure and Evolution Second Edition<br><del>（几乎都是教材上的东西，除了这篇）</del></p>
<hr>
<h2 id="恒星的表面温度"><a href="#恒星的表面温度" class="headerlink" title="恒星的表面温度"></a>恒星的表面温度</h2><h3 id="有效温度"><a href="#有效温度" class="headerlink" title="有效温度"></a>有效温度</h3><p>面元$\mathrm{d}\delta$向方向$\theta$（与法向夹角）的单位立体角$\mathrm{d}\Omega$内频率范围在$\mathrm{d}\nu$的光在时间$\mathrm{d}t$内辐射了能量$\mathrm{d}E$，辐射强度定义为：</p>
<script type="math/tex; mode=display">I_{\nu}=\frac{\mathrm{d}E}{\cos\theta\mathrm{d}\delta\mathrm{d}\Omega\mathrm{d}\nu\mathrm{d}t}</script><p>对所有方向求平均，得到平均辐射强度：</p>
<script type="math/tex; mode=display">J_{\nu}=\frac{1}{4\pi}\oint I_\nu \mathrm{d}\Omega</script><p>对各向同性辐射场就有$I_{\nu}=J_{\nu}$。</p>
<p>各向同性辐射场沿法向辐射的一束电磁波，$\mathrm{d}t$时间内覆盖了体积$\mathrm{d}V=c\mathrm{d}t\mathrm{d}\delta$，从而这个方向上传播的能量密度为：</p>
<script type="math/tex; mode=display">u=\frac{\mathrm{d}E}{\mathrm{d}V}=\frac{I_\nu}{c}</script><p>对所有方向积分，单色辐射的能量密度则为：</p>
<script type="math/tex; mode=display">U_\nu=\oint u\mathrm{d}\Omega=\frac{4\pi}{c}J_\nu</script><p>对各向同性辐射场，即为：</p>
<script type="math/tex; mode=display">U_\nu=\frac{4\pi}{c}I_\nu</script><p>由Stefan-Boltzmann定律，单色辐射的辐射强度为：</p>
<script type="math/tex; mode=display">I_\nu=\frac{2h\nu^3}{c^2}\frac{1}{e^{h\nu/kT}-1}</script><p>对所有频率积分，辐射场的能量密度为：</p>
<script type="math/tex; mode=display">U(T)=\frac{4\pi}{c}\int_0^\infty I_{\nu}\mathrm{d}\nu=aT^4</script><p>其中$a$是黑体辐射能量密度常数。<br>对球面源（恒星），辐射光度为：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    L&=\oint\mathrm{d}\delta\int_0^\infty \mathrm{d}\nu \oint I_\nu\cos\theta\mathrm{d}\Omega
    \\
    &=4\pi R^2\sigma T^4
\end{aligned}</script><p>其中$\sigma$为Stefan-Boltzmann常数，对比能量密度公式有：</p>
<script type="math/tex; mode=display">\sigma=\frac{ac}{4}</script><p>根据恒星的光度定义的温度为<strong>有效温度</strong>：</p>
<script type="math/tex; mode=display">L = 4\pi R^2 \sigma T_{\mathrm{eff}}^4</script><h2 id="恒星的形成"><a href="#恒星的形成" class="headerlink" title="恒星的形成"></a>恒星的形成</h2><h3 id="星云的引力不稳定性"><a href="#星云的引力不稳定性" class="headerlink" title="星云的引力不稳定性"></a>星云的引力不稳定性</h3><p>一团处于流体静力学平衡的均匀气体云，初始条件：</p>
<script type="math/tex; mode=display">
\left\{
\begin{aligned}
    & \rho = \mathrm{const.} \\
    & T_0 = \mathrm{const.} \\
    & \mathbf{V_0} = 0 \\
    & P_0 = \mathrm{const.}
\end{aligned}
\right.</script><p>满足的方程有：</p>
<ul>
<li>连续性方程<script type="math/tex; mode=display">\frac{\partial \rho}{\partial t} + \nabla\cdot(\rho \mathbf{V}) = 0</script></li>
<li>运动方程<script type="math/tex; mode=display">\frac{\partial \mathbf{V}}{\partial t} + (\mathbf{V}\cdot\nabla)\mathbf{V} = -\frac{1}{\rho}\nabla P -\nabla \phi</script></li>
<li>引力场方程（泊松方程）<script type="math/tex; mode=display">\nabla^2\phi = 4\pi G\rho</script></li>
<li>物态方程<script type="math/tex; mode=display">P = \frac{k}{\mu}\rho T = c_S^2 \rho</script></li>
</ul>
<p>对上述各式中$\rho$，$T$，$\mathbf{V}$，$P$施加一个微扰，保留至一阶，成为：</p>
<script type="math/tex; mode=display">\frac{\partial \rho_1}{\partial t} + \rho_0 \nabla\cdot\mathbf{V_1}= 0 \tag{1}</script><script type="math/tex; mode=display">\frac{\partial \mathbf{V_1}}{\partial t} + \frac{1}{\rho_0}\nabla P_1 + \nabla \phi_1 = 0 \tag{2}</script><script type="math/tex; mode=display">\nabla^2\phi_1 = 4\pi G \rho_1 \tag{3}</script><script type="math/tex; mode=display">P_1 = c_S^2 \rho_1 \tag{4}</script><p>(1)对时间求导：</p>
<script type="math/tex; mode=display">\frac{\partial^2 \rho_1}{\partial t^2} + \rho_0\nabla\cdot\frac{\partial\mathbf{V_1}}{\partial t} = 0 \tag{5}</script><p>(2)求散度：</p>
<script type="math/tex; mode=display">\rho_0\nabla\cdot\frac{\partial \mathbf{V_1}}{\partial t} + \nabla^2 P_1 + \nabla^2 \phi_1\rho_0 = 0 \tag{6}</script><p>联立(3)(4)(5)(6)，得到：</p>
<script type="math/tex; mode=display">\frac{\partial^2 \rho_1}{\partial t^2} - c_S^2\nabla^2\rho_1 = 4\pi G \rho_1\rho_0 \tag{7}</script><p>考虑$\rho_1$的傅里叶变换：</p>
<script type="math/tex; mode=display">\rho_1(t,\mathbf{r}) = \frac{1}{(2\pi)^{3/2}} \iiint \rho_1(t,\mathbf{k}) e^{-i \mathbf{r}\cdot\mathbf{k}}\mathrm{d}^3\mathbf{k}</script><p>代入(7)：</p>
<script type="math/tex; mode=display">\frac{\partial^2 \rho_1(t,\mathbf{k})}{\partial t^2} + c_S^2 \rho_1(t,\mathbf{k})k^2 = 4\pi G \rho_1(t)\rho_0</script><p>解为</p>
<script type="math/tex; mode=display">\rho_1(t,\mathbf{k}) = Ae^{-i\omega t}</script><p>其中</p>
<script type="math/tex; mode=display">\omega = \sqrt{c_S^2 k^2 - 4\pi G \rho_0}</script><p>临界值</p>
<script type="math/tex; mode=display">k_J = \sqrt{\frac{4\pi G \rho_0}{c_S^2}}</script><p>对应<strong>金斯波长</strong></p>
<script type="math/tex; mode=display">\lambda_J = \frac{2\pi}{k_J} = \sqrt{\frac{\pi}{G\rho_0}}c_S</script><p>当系统的尺度大于金斯波长时，$\rho_1\sim e^{|\omega|t}$，气体云中的扰动可以增长，塌缩形成恒星；$\lambda&lt;\lambda_J$对应振荡解。</p>
<p>考虑其物理意义，一团气体，引力作用的时标为自由落体时标：</p>
<script type="math/tex; mode=display">\tau_G \sim \tau_{\mathrm{ff}} \sim (G\rho_0)^{-1/2}</script><p>而压力作用的时标为：</p>
<script type="math/tex; mode=display">\tau_P \sim \frac{\lambda}{c_S}</script><p>要使气体能够塌缩，引力作用应该占主导，即引力时标小于压力时标，从而：</p>
<script type="math/tex; mode=display">\tau_P > \tau_G \Rightarrow \lambda > c_S(G\rho_0)^{1/2} \sim \lambda_J</script><p>也就是说，只有尺度$\lambda&gt;\lambda_J$，或质量$M&gt;M_J=4\pi\lambda_J^3\rho_0/3$的气体云才能塌缩成恒星。</p>
<h3 id="星云中的气体球的不稳定性"><a href="#星云中的气体球的不稳定性" class="headerlink" title="星云中的气体球的不稳定性"></a>星云中的气体球的不稳定性</h3><p>质量$M$，半径$R$的单原子理想气体球，平衡时满足位力定理，$2E_T+E_G=0$。$-E_G&gt;2E_T$时为引力主导，可以塌缩。</p>
<p>考虑动能$E_T$：<br>分子平均动能为$\epsilon_k=\frac{3}{2}kT$，从而气体云的总动能：</p>
<script type="math/tex; mode=display">E_T = \int_0^M \frac{3kT}{2\mu}\mathrm{d}m = \frac{3kT}{2\mu}M</script><p>引力势能：</p>
<script type="math/tex; mode=display">E_G = -\int_0^M \frac{Gm_r}{r}\mathrm{d}m_r</script><p>$m_r$是半径$r$内的质量，对均匀气体球，</p>
<script type="math/tex; mode=display">\frac{m_r}{M} = \frac{4\pi r^3\rho/3}{4\pi R^3\rho/3} = \left(\frac{r}{R}\right)^3</script><p>从而：</p>
<script type="math/tex; mode=display">E_G = -\frac{GM^{1/3}}{R}\int_0^M m_r^{2/3}\mathrm{d}m_r = -\frac{3GM^2}{5R}</script><p>$-E_G&gt;2E_T$时气体云可以塌缩，此时</p>
<script type="math/tex; mode=display">M>M_J=\left(\frac{3}{4\pi\rho}\right)^{1/2}\left(\frac{5kT}{G\mu}\right)^{3/2}</script><p>这是根据位力定理定义的新的“金斯质量”。</p>
<p>带入HI气体云的环境，金斯质量$M_J\sim 10^5M_{\odot}$，而观测到的恒星质量为$0.1-120M_\odot$，而星团的质量更接近$10^5M_{\odot}$。这说明气体云在塌缩形成恒星的过程中还会碎裂。</p>
<h3 id="碎裂的过程"><a href="#碎裂的过程" class="headerlink" title="碎裂的过程"></a>碎裂的过程</h3><p>原始的气体云是光学薄的，塌缩过程中产生的温度可以无阻碍的辐射出去，可以看做<strong>等温过程</strong>，$M_J\sim\rho^{-1/2}$。塌缩使$\rho$变大，金斯质量减小。因此气体云在塌缩的过程中会因为局部的引力不稳定性碎裂。</p>
<p>云团继续塌缩，气体密度变高，形成光学厚的云团，热量不能辐射出去，进行的是<strong>绝热过程</strong>。绝热过程中$V^{\gamma-1}T=\mathrm{const.}$，从而$T\sim\rho^{2/3}$，从而$M_J\sim\rho^{1/2}$。随气体塌缩，金斯质量变大，塌缩逐渐停止。</p>
<p>总引力能$E_G\sim GM^2/R$，塌缩时标$\tau_G\sim(G\rho)^{1/2}$，从而单位时间产生的引力势能为：</p>
<script type="math/tex; mode=display">L_G\sim\frac{E_G}{\tau_G}\sim \left(\frac{3}{4\pi}\right)^{1/2}\frac{G^{3/2}M^{5/2}}{R^{5/2}}</script><p>系统的辐射功率可以看作相同温度和体积的黑体辐射乘一个小于1的系数$f$（存在吸收），</p>
<script type="math/tex; mode=display">L_C = f \cdot 4\pi R^2 \sigma T^4</script><p>等温过程中，$L_G\ll L_C$，塌缩产生的引力势能全被辐射出去。<br>绝热过程中，$L_G&gt;L_C$，引力能不被完全辐射出去。<br>$L_G=L_C$时的临界质量：</p>
<script type="math/tex; mode=display">M_{J}=\left(\frac{\pi^{9}}{9}\right)^{1 / 4}\left(\sigma G^{3}\right)^{-1 / 2}\left(\frac{k}{\mu}\right)^{9 / 4} f^{-1 / 2} T^{1 / 4}</script><p>令$\mu=1,T=1000\mathrm{K},f=0.1$，得到$M_J=1/3M_{\odot}$，和恒星质量的量级吻合。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>恒星物理笔记</category>
      </categories>
      <tags>
        <tag>天文</tag>
      </tags>
  </entry>
  <entry>
    <title>恒星演化方程</title>
    <url>/2020/09/08/stellar-physics-02-stellar-evolution-equations/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>恒星：等离子气体球，辐射，离子、电子、光子频繁碰撞。在同一壳层$r\sim r+\mathrm{d}r$中密度、温度近似相同，处于局部动态热平衡。</p>
<h2 id="局域热平衡-LTE"><a href="#局域热平衡-LTE" class="headerlink" title="局域热平衡(LTE)"></a>局域热平衡(LTE)</h2><p>光子穿过厚$\mathrm{d}s$的气体时，辐射强度相对变化（光深）：</p>
<script type="math/tex; mode=display">\mathrm{d}\tau_\nu = \frac{\mathrm{d}I_\nu}{I_\nu} = -\kappa_\nu \mathrm{d}s</script><p>$\kappa_\nu$称为吸收系数，在均匀介质中，$\kappa_\nu$不依赖位置。<br>根据朗伯定律，</p>
<script type="math/tex; mode=display">\kappa_\nu=\frac{1}{\lambda}</script><p>其中$\lambda$是粒子的平均自由程。<br>即：</p>
<script type="math/tex; mode=display">
\tau_\nu=\frac{s}{\lambda}=\left\{
\begin{aligned}
    &\gg 1 & 光学厚
    \\& \ll 1 & 光学薄
\end{aligned}
\right.</script><p>恒星中粒子自由程$\lambda\ll R$（系统的尺度），是<strong>光学厚</strong>的，对辐射不透明。光子和离子、电子频繁碰撞，在每个等半径的壳层都能达成温度、密度相同，即<strong>局域热平衡</strong>。恒星内部光深$\tau_\nu\gg 1$，其辐射可以看作类黑体辐射。</p>
<p>描述恒星结构的物理量有：<strong>温度</strong>$T(r)$，<strong>密度</strong>$\rho(r)$，第$i$种元素的<strong>化学组分</strong>$X_i(r)$。包含$n$种元素就需要用$n+2$个方程描述。若要考虑演化方程，则为：<br>$T(t,r),\rho(t,r),X_i(t,r)$。<br>考虑能量、动量、角动量守恒（考虑的时标远小于恒星寿命，在短时间内近似守恒），利用如下的前提：</p>
<ul>
<li>无核反应外的质量亏损</li>
<li>忽略原初转动，角动量$L=0$</li>
<li>只考虑对流层以下，流体静力学过程。忽略磁场的效应。</li>
</ul>
<h2 id="能量方程"><a href="#能量方程" class="headerlink" title="能量方程"></a>能量方程</h2><p>用半径$r$以内的质量$m$作为自变量，$F(m)$是$r$以内的辐射功率，$u$为单位质量的内能，$q$为核产能率，单位质量单位时间核反应释放的能量。考虑$r\sim r+\mathrm{d}r$的壳层：<br>内能变化</p>
<script type="math/tex; mode=display">\begin{aligned}
    \delta U&=\delta(u\mathrm{d}m)=\delta u\mathrm{d}m
    \\&=\delta Q + \delta W
\end{aligned}</script><p>外界对这一壳层做功：</p>
<script type="math/tex; mode=display">\delta W = -P\delta(\mathrm{d}V) = -P\delta\left(\frac{1}{\rho}\right)\mathrm{d}m</script><p>吸热（产热和辐射转移）：</p>
<script type="math/tex; mode=display">\begin{aligned}
    \delta Q &= q\mathrm{d}m\delta t - \mathrm{d}F\delta t
    \\&= \left(q-\frac{\partial F}{\partial m}\right)\mathrm{d}m\delta t
\end{aligned}</script><p>由能量守恒有：</p>
<script type="math/tex; mode=display">\dot{u} + P\frac{\mathrm{d}}{\mathrm{d}t}\left(\frac{1}{\rho}\right) = q-\frac{\partial F}{\partial m}</script><p>对主序星，处于热平衡，物理量不随时间变化，$\dot{u}=0,\dot{\rho}=0$。从而：</p>
<script type="math/tex; mode=display">q = \frac{\partial F}{\partial m}</script><p>对质量积分：</p>
<script type="math/tex; mode=display">\int_0^M q\mathrm{d}m=L_{\mathrm{nuc}}=F(M)=L</script><p>即核聚变产生的能量全部由辐射释放出去，系统保持稳定等温。</p>
<h2 id="运动方程"><a href="#运动方程" class="headerlink" title="运动方程"></a>运动方程</h2><p>考虑径向高$\mathrm{d}r$，底面积$\mathrm{d}S$的小圆柱体：<br>质量</p>
<script type="math/tex; mode=display">\delta m=\rho \mathrm{d}r\mathrm{d}S</script><p>运动方程：</p>
<script type="math/tex; mode=display">\begin{aligned}
    \ddot{r}\delta m &= -\frac{Gm}{r^2}\delta m - \frac{\partial P}{\partial r}\mathrm{d}r\mathrm{d}S
    \\&= -\left(\frac{Gm}{r^2} + \frac{\partial P}{\partial r}\frac{1}{\rho} \right)\delta m
\end{aligned}</script><p>对处于流体静力学平衡的恒星，$\ddot{r}=0$，有：</p>
<script type="math/tex; mode=display">\frac{\mathrm{d} P}{\mathrm{d} r} = -\rho\frac{Gm}{r^2}</script><p>也可以写成：</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P}{\mathrm{d}m} = -\frac{Gm}{4\pi r^4}</script><p>可以看出，越向外压力越小，在恒星表面$r=R$处压力为零（边界条件）。且由于$m\sim r^3$，在恒星中心，压强梯度为零。</p>
<p>用上式估计恒星中心压强的下限：</p>
<script type="math/tex; mode=display">P(r=0)=\int_0^M \frac{Gm}{4\pi r^4} > \int_0^M \frac{Gm}{4\pi R^4} = \frac{GM^2}{8\pi R^4}</script><h2 id="维里定理"><a href="#维里定理" class="headerlink" title="维里定理"></a>维里定理</h2><p>由运动方程：</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P}{\mathrm{d}m} = -\frac{Gm}{4\pi r^4}</script><p>有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    V(r)\mathrm{d}P &= -\frac{4\pi r^3}{3}\frac{Gm}{4\pi r^4} \mathrm{d}m
    \\&= -\frac{1}{3}\frac{Gm}{r} \mathrm{d}m
\end{aligned}</script><p>积分：</p>
<script type="math/tex; mode=display">\int_{P(0)}^{P(R)} V\mathrm{d}P = -\frac{1}{3}\int_0^M \frac{Gm}{r} \mathrm{d}m</script><p>左边</p>
<script type="math/tex; mode=display">\int_{P(0)}^{P(R)} V\mathrm{d}P = P(r)V(r) \big |_0^R - \int_{0}^{V(R)} P\mathrm{d}V = -\int_{0}^{M} \frac{P}{\rho} \mathrm{d}m</script><p>右边积分里就是引力能$\Omega$。从而：</p>
<script type="math/tex; mode=display">\int_{0}^{M} \frac{P}{\rho} \mathrm{d}m = -\frac{1}{3}\Omega</script><p>对理想气体，平均分子动能$\epsilon=\frac{3}{2}kT$，从而比内能：</p>
<script type="math/tex; mode=display">u = \frac{\epsilon}{m_g} = \frac{3kT}{2m_g} = \frac{3}{2}\frac{P}{\rho}</script><p>代入上面的式子，即得到：</p>
<script type="math/tex; mode=display">2U + \Omega = 0</script><p>即维里定理。这说明恒星是一个稳定的、独立演化的、维里化的系统。</p>
<p>可以利用维里定理估算恒星的内部温度。<br>由于不清楚密度分布，假设引力能</p>
<script type="math/tex; mode=display">\Omega = -\alpha \frac{GM^2}{R}</script><p>由维里定理，</p>
<script type="math/tex; mode=display">U = \frac{1}{2}\alpha\frac{GM^2}{R}</script><p>另一方面，</p>
<script type="math/tex; mode=display">U = \int_0^R \frac{3kT}{2m_g} \mathrm{d}r = \frac{3k\overline{T}}{2m_g}</script><p>得到平均温度的估计</p>
<script type="math/tex; mode=display">\overline{T} = \frac{\alpha}{3}\frac{m_gG}{k}\frac{M}{R}</script><p>由平均密度$\rho=M/V$，有$\overline{T}\propto M^{2/3}\bar{\rho}^{-1/3}$。相同质量的恒星，其平均密度越大，平均温度越小。</p>
<h2 id="恒星总能量"><a href="#恒星总能量" class="headerlink" title="恒星总能量"></a>恒星总能量</h2><p>总能量$E=U+K+\Omega$（内能+宏观动能+引力能）</p>
<p>对内能，将2.2中的能量方程</p>
<script type="math/tex; mode=display">\dot{u} + P\dot{\left(\frac{1}{\rho}\right)} = q-\frac{\partial F}{\partial m}</script><p>积分：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \int_0^M\dot{u}\mathrm{d}m + \int_0^M P\frac{\mathrm{d}}{\mathrm{d}t}\left(\frac{1}{\rho}\right)\mathrm{d}m &= \int_0^M q\mathrm{d}m - \int_0^M\frac{\partial F}{\partial m}\mathrm{d}m
    \\&=L_{\mathrm{nuc}}-L
\end{aligned}</script><p>左边第一项即为$\dot{U}$，第二项有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \int_0^M P\frac{\mathrm{d}}{\mathrm{d}t}\left(\frac{1}{\rho}\right)\mathrm{d}m &= \int_0^M P\frac{\mathrm{d}}{\mathrm{d}t}\left(\frac{\mathrm{d}V}{\mathrm{d}m}\right)\mathrm{d}m
    \\&= \dot{V}P\big |_0^M - \int_0^M \dot{V} \left(\frac{\partial P}{\partial m}\right)\mathrm{d}m
\end{aligned}</script><p>在恒星中心$\dot{V}=0$，而表面上$P=0$。从而：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \int_0^M P\dot{\left(\frac{1}{\rho}\right)}\mathrm{d}m &= -\int_0^M \dot{V} \frac{\partial P}{\partial m}\mathrm{d}m
    \\&= -\int_0^M 4\pi r^2 \dot{r} \frac{\partial P}{\partial m}\mathrm{d}m
\end{aligned}</script><p>从而能量方程成为：</p>
<script type="math/tex; mode=display">\dot{U} - \int_0^M 4\pi r^2 \dot{r} \frac{\partial P}{\partial m}\mathrm{d}m = L_{\mathrm{nuc}}-L</script><p>考虑能量方程的物理意义，对2.3中的运动方程：</p>
<script type="math/tex; mode=display">\ddot{r} = -\frac{Gm}{r^2} - \frac{\partial P}{\partial r}\frac{1}{\rho}</script><p>乘$\dot{r}$积分：</p>
<script type="math/tex; mode=display">\int_0^M \ddot{r}\dot{r}\mathrm{d}m = -\int_0^M \frac{Gm}{r^2}\dot{r}\mathrm{d}m - \int_0^M 4\pi r^2 \dot{r} \frac{\partial P}{\partial m}\mathrm{d}m</script><p>左边</p>
<script type="math/tex; mode=display">\int_0^M \ddot{r}\dot{r}\mathrm{d}m = \frac{\mathrm{d}}{\mathrm{d}t}\int_0^M \frac{1}{2}\dot{r}^2\mathrm{d}m = \dot{K}</script><p>$K$是宏观动能，即恒星膨胀收缩的动能。<br>右边第一项：</p>
<script type="math/tex; mode=display">-\int_0^M \frac{Gm}{r^2}\dot{r}\mathrm{d}m = \int_0^M \frac{\mathrm{d}}{\mathrm{d}t} \left(\frac{Gm}{r}\right)\mathrm{d}m = -\dot{\Omega}</script><p>即有</p>
<script type="math/tex; mode=display">-\int_0^M 4\pi r^2 \dot{r} \frac{\partial P}{\partial m}\mathrm{d}m = \dot{K}+\dot{\Omega}</script><p>能量方程就可写为：</p>
<script type="math/tex; mode=display">\dot{U}+\dot{K}+\dot{\Omega} = \dot{E} = L_{\mathrm{nuc}}-L</script><p>即总能量的变化率等于核聚变产能率减光度（辐射出去的功率）。</p>
<p>注意:</p>
<ul>
<li>处于热平衡时，$E=\mathrm{const.}$<br>流体静力学平衡$K=0$，$E=U+\Omega=\Omega/2=-U$</li>
<li>$\dot{E}&lt;0$时，$U$增大，温度也升高。引力势能$\Omega$减小，此时恒星收缩。  
相对地，$\dot{E}&gt;0$时恒星膨胀。</li>
</ul>
<h2 id="组分变化方程"><a href="#组分变化方程" class="headerlink" title="组分变化方程"></a>组分变化方程</h2><p>恒星中发生核聚变反应，导致各元素化学组分变化。</p>
<p>元素丰度$X_i$定义为元素$i$的质量占恒星的质量比。从而数密度为</p>
<script type="math/tex; mode=display">n_i = \frac{\rho_i}{m_i} = \frac{\rho X_i}{A_i m_{\mathrm{H}}}</script><p>考虑核反应：</p>
<script type="math/tex; mode=display">I(A_i,Z_i)+J(A_j,Z_j) \rightleftharpoons K(A_k,Z_k) + L(A_l,Z_l)</script><p>满足：<br>重子数守恒$A_i+A_j=A_k+A_l$<br>电荷守恒$Z_i+Z_j=Z_k+Z_l$<br>和轻子（电子、中微子）数守恒。</p>
<p>计算核反应率：</p>
<ul>
<li>I粒子的散射截面为$S$，I和J粒子的相对速度为$V$（根据温度计算的平均速度），单位体积的有效作用截面为$n_i S$。而单位时间通过单位面积的J粒子的数目为$n_j V$。从而单位时间、单位体积发生的反应数为：<script type="math/tex; mode=display">n_i S\cdot n_j V = n_i n_j SV = n_i n_j R_{ijk}</script>其中$R_{ijk}$为反应$I+J\rightleftharpoons K$的反应率。</li>
<li>粒子与自身反应，单位时间、单位体积的反应数应为<script type="math/tex; mode=display">\frac{1}{2} n_i^2 R_{iik}</script>乘1/2是因为$n_i n_j$包含了两个同类粒子的重复计数。</li>
</ul>
<p>从而元素I的数密度变化率为：</p>
<script type="math/tex; mode=display">\dot{n}_{i}=-n_{i} \sum_{j, k} n_{j} R_{i j k}+\sum_{l, k} \frac{n_{l} n_{k}}{1+\delta_{l k}} R_{l k i}</script><p>（与自身反应的粒子，反应数乘了1/2的系数，但是一次反应消耗两个粒子）<br>写成元素丰度的形式：</p>
<script type="math/tex; mode=display">\frac{\dot{X}_{i}}{A_{i}}=\frac{\rho}{m_{\mathrm{H}}}\left(-\frac{X_{i}}{A_{i}} \sum_{j, k} \frac{X_{j}}{A_{j}} R_{i j k}+\sum_{l, k} \frac{X_{l}}{A_{l}} \frac{X_{k}}{A_{k}} \frac{R_{l k i}}{1+\delta_{l k}}\right)</script><p>得到一个所有元素变化率$\mathbf{X}$的矢量方程。</p>
<h2 id="演化方程组"><a href="#演化方程组" class="headerlink" title="演化方程组"></a>演化方程组</h2><p>动力学演化（运动方程）：</p>
<script type="math/tex; mode=display">\ddot{r} = -\frac{Gm}{r^2} - 4\pi r^2\frac{\mathrm{d}P}{\mathrm{d}m}</script><p>热演化方程（能量方程）：</p>
<script type="math/tex; mode=display">\dot{u} + P\dot{\left(\frac{1}{\rho}\right)} = q-\frac{\mathrm{d}F}{\mathrm{d}m}</script><p>化学演化方程：</p>
<script type="math/tex; mode=display">\dot{\mathbf{X}}=f(\rho,T,\mathbf{X})</script><p>结合这$n+2$个方程，可以解出恒星的结构函数：$\rho(m,t),\ T(m,t),\ \mathbf{X}(m,t)$。在恒星演化后期，还需要考虑径向运动$\dot{r}$。<br>边界条件：</p>
<script type="math/tex; mode=display">P(M,t)=0, L(0,t)=0</script></body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>恒星物理笔记</category>
      </categories>
      <tags>
        <tag>天文</tag>
      </tags>
  </entry>
  <entry>
    <title>恒星内部气体和辐射基本物理</title>
    <url>/2020/09/08/stellar-physics-03-gas-and-radiation/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h2 id="理想气体物态方程"><a href="#理想气体物态方程" class="headerlink" title="理想气体物态方程"></a>理想气体物态方程</h2><p>若恒星内粒子的库伦相互作用势远小于平均动能，则可以忽略静电作用，看做理想气体。</p>
<h3 id="理想气体近似"><a href="#理想气体近似" class="headerlink" title="理想气体近似"></a>理想气体近似</h3><p>粒子间的平均距离为</p>
<script type="math/tex; mode=display">d \cong \left(\frac{1}{n}\right)^{1/3}=n^{-1/3}</script><p>而数密度</p>
<script type="math/tex; mode=display">n=\frac{\bar{\rho}}{Am_\mathrm{H}}</script><p>其中$A$是原子的质量数。<br>再根据平均密度=恒星质量/体积，有：</p>
<script type="math/tex; mode=display">d = \left(\frac{4\pi Am_\mathrm{H}}{3M}\right)^{1/3}R</script><p>库伦势能</p>
<script type="math/tex; mode=display">\epsilon_c \simeq \frac{1}{4\pi \epsilon_0}\frac{Z^2 e^2}{d}</script><p>另一方面，由维里定理可以估计平均温度：</p>
<script type="math/tex; mode=display">\overline{T} = \frac{\alpha}{3}\frac{Am_\mathrm{H}}{k}\frac{GM}{R}</script><p>从而</p>
<script type="math/tex; mode=display">\frac{\epsilon_c}{k\overline{T}} \sim \frac{1}{4\pi\epsilon_0}\frac{Z^2e^2}{A^{4/3}m_\mathrm{H}^{4/3}GM^{2/3}}</script><p>带入$M=M_\odot$，$Z=1$，$A=1$（氢原子），有$\epsilon_c/kT\sim 10^{-2}$。因此采用理想气体近似是合理的。<br>重元素有$A\simeq 2Z$，从而$\epsilon_c/kT\sim Z^{2/3}$。对演化到晚期的恒星，重元素很多，$\epsilon_c/kT$会增大。</p>
<h3 id="压强积分"><a href="#压强积分" class="headerlink" title="压强积分"></a>压强积分</h3><p>考虑一个假想面，速度与其法向夹角$\theta$的粒子撞击到上面被反弹回来，动量改变</p>
<script type="math/tex; mode=display">\Delta p = 2p\cos\theta</script><p>由于粒子分布是各向同的，</p>
<script type="math/tex; mode=display">\frac{n(\theta, p) \mathrm{d}\theta \mathrm{d}p}{n(p) \mathrm{d}p}=\frac{\mathrm{d} \Omega}{4 \pi}=\frac{2 \pi \sin \theta \mathrm{d} \theta}{4 \pi}=\frac{1}{2} \sin \theta \mathrm{d}\theta</script><p>其中$n(\theta, p)$是方向在$\theta\sim\theta+\mathrm{d}\theta$之间，动量在$p\sim p+\mathrm{d}p$之间的粒子的（空间）数密度。</p>
<p>在$\delta t$时间内，体积$v\delta t\mathrm{d}S\cos\theta$中的粒子会撞击到$\mathrm{d}S$面积上。从而传输到面上的动量为</p>
<script type="math/tex; mode=display">\delta p = n(\theta,p)\mathrm{d}\theta\mathrm{d}p \cdot v\delta t\mathrm{d}S\cos\theta \cdot \Delta p</script><p>贡献的压强则为</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \mathrm{d}P &= \frac{\delta p}{\delta t\mathrm{d}S} = n(\theta,p)\mathrm{d}\theta\mathrm{d}p \cdot v\cos\theta \cdot 2p\cos\theta
    \\&= \frac{1}{2}  \mathrm{d}\theta \cdot n(p)\mathrm{d}p \cdot v\cos\theta \cdot 2p\cos\theta
    \\&= vpn(p)\mathrm{d}p \cos^2\theta \sin\theta \mathrm{d}\theta
\end{aligned}</script><p>压强对所有方向和动量积分：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    P &= \int_0^\infty\mathrm{d}p\int_0^\pi vpn(p)\cos^2\theta \sin\theta \mathrm{d}\theta
    \\&= \frac{1}{3}\int_0^{\infty} vpn(p)\mathrm{d}p
\end{aligned}</script><p>即为<strong>压强积分</strong>。</p>
<h2 id="离子压"><a href="#离子压" class="headerlink" title="离子压"></a>离子压</h2><p>理想气体近似给出的离子的EoS：</p>
<script type="math/tex; mode=display">P_I = n_I k T</script><p>下面用压强积分求离子的压强：<br>处于温度$T$的平衡态气体满足麦克斯韦分布</p>
<script type="math/tex; mode=display">f(v)\mathrm{d}v = 4\pi\left(\frac{m}{2\pi k T}\right)^{3/2} e^{-\frac{1}{2}mv^2/kT} v^2\mathrm{d}v</script><p>由$\mathrm{d}p=m\mathrm{d}v$：</p>
<script type="math/tex; mode=display">f(p)\mathrm{d}p = \frac{4\pi p^2\mathrm{d}p}{(2\pi mkT)^{3/2}} e^{-p^2/2mkT}</script><p>另一方面，$f(p)\mathrm{d}p$是动量在$p\sim p+\mathrm{d}p$之间的粒子的占比，也是在单位体积内动量在$p\sim p+\mathrm{d}p$的粒子数比总粒子数，即：</p>
<script type="math/tex; mode=display">f(p)\mathrm{d}p = \frac{n(p)}{n}\mathrm{d}p</script><p>从而压强积分</p>
<script type="math/tex; mode=display">
\begin{aligned}
  P_I &= \frac{1}{3}\int_0^{\infty} vpn(p)\mathrm{d}p
  \\&= \frac{1}{3}\int_0^{\infty} vpn_I \frac{4\pi p^2}{(2\pi mkT)^{3/2}} e^{-p^2/2mkT}\mathrm{d}p
  \\&= n_I kT
\end{aligned}</script><p>和理想气体状态方程给出的压强一致。</p>
<p>气体（平均）分子量为$\mu_I$，也可以写成</p>
<script type="math/tex; mode=display">P_I = \frac{\mathcal{R}}{\mu_I}\rho T</script><h2 id="电子压强"><a href="#电子压强" class="headerlink" title="电子压强"></a>电子压强</h2><h3 id="电子气体的压强"><a href="#电子气体的压强" class="headerlink" title="电子气体的压强"></a>电子气体的压强</h3><p>将电子气体看做理想气体，也有</p>
<script type="math/tex; mode=display">P_e = n_e kT</script><p>离子$i$充分电离，放出$Z_i$个电子，产生的电子的数密度为</p>
<script type="math/tex; mode=display">n_e = \sum_i n_iZ_i = \frac{\rho}{m_H}\sum_i X_i \frac{Z_i}{A_i}</script><p>定义电子气体的等效平均分子量</p>
<script type="math/tex; mode=display">\frac{1}{\mu_e} = \sum_i X_i \frac{Z_i}{A_i}</script><p>$X_i$是原子$i$占的质量分数。<br>一般地，</p>
<script type="math/tex; mode=display">\frac{1}{\mu_e} = X + \frac{1}{2}Y + (1-X-Y)\left<\frac{Z_i}{A_i}\right></script><p>$X$为氢的质量分数，$Y$为氦，其余为金属元素。一般有$Z_i/A_i\sim 1/2$，从而</p>
<script type="math/tex; mode=display">\frac{1}{\mu_e} \approx \frac{1}{2}(X+1)</script><p>对太阳，$\mu_e\approx 1.17$。<br>对氢耗尽的恒星，$X=0$，$\mu_e\approx 2$。</p>
<h3 id="总压强"><a href="#总压强" class="headerlink" title="总压强"></a>总压强</h3><p>由道尔顿分压定律，总压强</p>
<script type="math/tex; mode=display">P_\mathrm{gas} = P_I+P_e = \left(\frac{1}{\mu_I} + \frac{1}{\mu_e}\right) \mathcal{R}\rho T</script><p>混合气体的平均分子量$\mu$定义为</p>
<script type="math/tex; mode=display">\frac{1}{\mu} = \frac{1}{\mu_I} + \frac{1}{\mu_e}</script><p>从而压强仍可写为</p>
<script type="math/tex; mode=display">P_\mathrm{gas} = \frac{\mathcal{R}}{\mu} \rho T</script><p>上面的结论依赖如下近似：</p>
<ul>
<li>忽略分子之间的电磁相互作用，看作理想气体</li>
<li>假设离子都是完全电离的</li>
<li>不考虑相对论效应，不考虑简并压</li>
</ul>
<h3 id="量子简并压"><a href="#量子简并压" class="headerlink" title="量子简并压"></a>量子简并压</h3><p>费米动量</p>
<script type="math/tex; mode=display">p_F = \left(\frac{3h^2n_e}{8\pi}\right)^{1/3}</script><p>考虑$0K$的费米分布作为近似，由压强积分给出量子简并压</p>
<script type="math/tex; mode=display">
\begin{aligned}
  P_{\mathrm{e,deg}} &= \frac{1}{3}\int_0^{p_F} \frac{p}{m_e}pn_e(p)\mathrm{d}p
\\&= \frac{h^2}{20m_e}\left(\frac{3}{\pi}\right)^{2/3}\left(\frac{\rho}{m_H\mu_e}\right)^{5/3}
\end{aligned} \tag{*}</script><p>可以看见简并压反比于粒子的质量，因此只有电子简并压需要考虑，离子的可以忽略不计。只有在极高密度的情况下才会出现核子的简并态（中子星）。</p>
<p>$T\sim 0K$附近，电子动能远大于库伦势能$E_k=\frac{p_F^2}{2m_e}\gg \epsilon$，可近似看为自由电子气。在恒星演化的过程中，恒星氢燃料耗尽而氦聚变还未点燃时，温度很低（相比于电子的费米温度），可以近似看为此情况。</p>
<p>简并电子气的压强可简写为</p>
<script type="math/tex; mode=display">P_{\mathrm{e,deg}} = K_1 \rho^{5/3}</script><p>$K_1$是常数，带入氢耗尽（$\mu=2$）的恒星，有</p>
<script type="math/tex; mode=display">k_1 \approx 3.15\times10^{12} \mathrm{dyn}\cdot\mathrm{cm}^{-2}</script><h3 id="相对论性电子简并压"><a href="#相对论性电子简并压" class="headerlink" title="相对论性电子简并压"></a>相对论性电子简并压</h3><p>恒星的氢燃料耗尽后，没有辐射压，恒星由于自引力快速收缩，$\Delta V$降低，从而$\Delta p$上升，电子速率可以接近光速。此时的电子是相对论性简并电子气。</p>
<p>对相对论性电子使用近似$v\sim c$，压强积分为</p>
<script type="math/tex; mode=display">P_\mathrm{e,r-deg} = \frac{hc}{8}\left(\frac{3}{\pi}\right)^{1/3}\left(\frac{\rho}{m_H\mu_e}\right)^{4/3}</script><p>或</p>
<script type="math/tex; mode=display">P_\mathrm{e,r-deg} = K_2 \rho^{4/3}</script><h2 id="辐射压"><a href="#辐射压" class="headerlink" title="辐射压"></a>辐射压</h2><p>温度$T$的热平衡态下的光子气体，动量$p=h\nu/c$。从而动量空间分布$n(p)\mathrm{d}p$取决于频率空间分布。黑体辐射的普朗克公式：</p>
<script type="math/tex; mode=display">n(\nu)\mathrm{d}\nu = \frac{8\pi\nu^2}{c^3}\frac{\mathrm{d}\nu}{e^{h\nu/kT}-1}</script><p>带入压强积分：</p>
<script type="math/tex; mode=display">P_{\mathrm{rad}} = \frac{1}{3}\int_0^{\infty} vpn(p)\mathrm{d}p = \frac{1}{3}\int_0^{\infty} c\frac{h\nu}{c}n(\nu)\mathrm{d}\nu = \frac{1}{3}aT^4</script><p>其中</p>
<script type="math/tex; mode=display">a=\frac{8\pi^5k^4}{15c^3h^3}=\frac{4\sigma}{c}</script><p>其中$\sigma$为Stefan-Boltzmann常量。$a$则称为黑体辐射常量。</p>
<p>热力学中给出黑体辐射的能量密度$u=aT^4$，故$P_{\mathrm{rad}}=u/3$。</p>
<h2 id="气体和辐射的内能"><a href="#气体和辐射的内能" class="headerlink" title="气体和辐射的内能"></a>气体和辐射的内能</h2><p>气体的比内能定义为单位质量气体的内能。对理想气体，即粒子热运动的动能。从而</p>
<script type="math/tex; mode=display">u = \frac{1}{\rho}\int_0^{\infty} \epsilon(p)n(p)\mathrm{d}p</script><p>其中$\epsilon$为单个粒子动能。对单一成分气体，粒子质量$m_g$：<br>非相对论的$\epsilon(p)=p^2/2m_g$<br>相对论的$\epsilon(p)=\gamma mc^2-mc^2$。再根据$p=\gamma mc^2$，有：</p>
<script type="math/tex; mode=display">\epsilon(p) = m_g c^2\left[ \left(1+\frac{p^2}{m_gc^2}\right)^{1/2}-1 \right]</script><p>内能密度$u|$定义为单位体积气体的内能。对非相对论性理想气体：</p>
<script type="math/tex; mode=display">u|=n\epsilon=\frac{3}{2}nkT=\frac{3}{2}P</script><p>比内能</p>
<script type="math/tex; mode=display">u_\mathrm{gas} = \frac{u|}{\rho} = \frac{3}{2}\frac{P_\mathrm{gas}}{\rho}</script><p>对非相对论性简并气体，类似地有</p>
<script type="math/tex; mode=display">u=\frac{3}{2}\frac{P_{\mathrm{gas,deg}}}{\rho}</script><p>对相对论性的简并气体，</p>
<script type="math/tex; mode=display">u = \frac{1}{\rho}\int_0^{p_F}\epsilon(p)n(p)\mathrm{d}p = 3\frac{P_{\mathrm{gas,r,deg}}}{\rho}</script><p>对辐射，能量密度为</p>
<script type="math/tex; mode=display">\int_0^{\infty} h\nu n(\nu)\mathrm{d}\nu = aT^4</script><p>光子没有质量，但由于是在恒星中，可以考虑单位质量的恒星气体的体积中辐射的能量作为辐射的比内能：</p>
<script type="math/tex; mode=display">u_{\mathrm{rad}} = \frac{aT^4}{\rho} = 3\frac{P_\mathrm{rad}}{\rho}</script><p>总结：</p>
<ul>
<li>对非相对论性气体，<script type="math/tex; mode=display">u=\frac{3}{2}\frac{P}{\rho}</script></li>
<li>对相对论性气体（包括光子）：<script type="math/tex; mode=display">u=3\frac{P}{\rho}</script></li>
</ul>
<h2 id="绝热指数"><a href="#绝热指数" class="headerlink" title="绝热指数"></a>绝热指数</h2><h3 id="恒星气体的近似绝热过程"><a href="#恒星气体的近似绝热过程" class="headerlink" title="恒星气体的近似绝热过程"></a>恒星气体的近似绝热过程</h3><p>$\mathrm{d}Q=0$时，能量方程成为</p>
<script type="math/tex; mode=display">\mathrm{d}u + P\mathrm{d}\left(\frac{1}{\rho}\right) = 0</script><p>上一节给出$u=\Phi P/\rho$，$\Phi$为常数。代入上式，解得</p>
<script type="math/tex; mode=display">P = k_a\rho^{\gamma_a}</script><p>其中</p>
<script type="math/tex; mode=display">\gamma_a = \frac{\Phi+1}{\Phi}</script><p>为绝热指数。</p>
<p>对非相对论气体，$\Phi=3/2$，$\gamma_a=5/3$。<br>对相对论性气体，$\Phi=3$，$\gamma_a=4/3$。<br>而对一般物态（气体和辐射混合，或中等速度的气体），$\gamma_a$介于二者之间。</p>
<h3 id="部分电离"><a href="#部分电离" class="headerlink" title="部分电离"></a>部分电离</h3><p>定义电离度</p>
<script type="math/tex; mode=display">x = \frac{n_+}{n_0+n_+}</script><p>其中$n_0$为中性氢的数密度，$n_+$为氢离子（电子）的数密度。</p>
<p>对混合理想气体，物态方程为</p>
<script type="math/tex; mode=display">P=nkT</script><p>粒子的总数密度为</p>
<script type="math/tex; mode=display">n=n_0+n_e+n_+ = (x+1)(n_0+n_+)</script><p>从而物态方程成为</p>
<script type="math/tex; mode=display">P=(x+1)(n_0+n_+)\mathcal{R}m_HT = (x+1)\mathcal{R}\rho T</script><p>在温度$T$下，离子电离和复合过程达到动态平衡，满足<strong>Saha方程</strong>：</p>
<script type="math/tex; mode=display">\frac{n_+n_e}{n_0} = \frac{g}{h^3}(2\pi m_ekT)^{3/2} e^{-\chi/kT}</script><p>其中$\chi$为电子的电离势能。</p>
<p>根据电离度的定义：</p>
<script type="math/tex; mode=display">\frac{n_+n_e}{n_0} = \frac{x^2(n_0+n_+)^2}{(n_0+n_+)-x(n_0+n_+)} = \frac{x^2}{1-x}(n_0+n_+)</script><p>对Saha方程两边乘因子$1/((1+x)(n_0+n_+))=1/n$，成为：</p>
<script type="math/tex; mode=display">\frac{x^2}{1-x^2} = \frac{g}{h^3}\frac{(2\pi m_e)^{3/2}(kT)^{5/2}}{P} e^{-\chi/kT}</script><p>单位体积内$n_+$个氢原子被电离，释放电离能$\chi n_+$都转化为气体内能。从而电离对气体比内能的贡献为</p>
<script type="math/tex; mode=display">\frac{\chi n_+}{\rho} = \frac{\chi n_+}{(n_0+n_+)m_H} = \frac{\chi}{m_H}x</script><p>从而部分电离气体的比内能为</p>
<script type="math/tex; mode=display">u = \frac{3}{2}\frac{P}{\rho} + \frac{\chi}{m_H}x</script><p>对$u$全微分，绝热过程</p>
<script type="math/tex; mode=display">
\begin{aligned}
  \mathrm{d}u &= -P\mathrm{d}\left(\frac{1}{\rho}\right)
  \\ &= \frac{3}{2}\left(\frac{1}{\rho}\right)\mathrm{d}P + \frac{3}{2}P\mathrm{d}\left(\frac{1}{\rho}\right) + \frac{\chi}{m_H}\left(\frac{\partial x}{\partial P}\right)_\rho\mathrm{d}P + \frac{\chi}{m_H}\left(\frac{\partial x}{\partial \rho}\right)_P\mathrm{d}\rho
\end{aligned}</script><p>从而得到</p>
<script type="math/tex; mode=display">\frac{3}{2}\left(\frac{1}{\rho}\right)\mathrm{d}P + \frac{5}{2}P\mathrm{d}\left(\frac{1}{\rho}\right) + \frac{\chi}{m_H}\left(\frac{\partial x}{\partial P}\right)_\rho\mathrm{d}P + \frac{\chi}{m_H}\left(\frac{\partial x}{\partial \rho}\right)_P\mathrm{d}\rho = 0</script><p>各项乘$\rho/P$，上式成为：</p>
<script type="math/tex; mode=display">\left[ \frac{3}{2} + \frac{\chi}{kT}\frac{P}{1+x}\left(\frac{\partial x}{\partial P}\right)_\rho \right]\frac{\mathrm{d}P}{P} -\left[ \frac{5}{2} - \frac{\chi}{kT}\frac{\rho}{1+x}\left(\frac{\partial x}{\partial \rho}\right)_P \right] \frac{\mathrm{d}\rho}{\rho} = 0</script><p>此时绝热指数</p>
<script type="math/tex; mode=display">
\begin{aligned}
  \gamma_a &= \frac{\mathrm{d}\ln P}{\mathrm{d}\ln \rho} = \frac{\mathrm{d}P/P}{\mathrm{d}\rho/\rho}
  \\&= \frac{\frac{5}{2}-\frac{\chi}{kT}\frac{\rho}{1+x}\left(\frac{\partial x}{\partial \rho}\right)_P}{\frac{3}{2} + \frac{\chi}{kT}\frac{P}{1+x}\left(\frac{\partial x}{\partial P}\right)_\rho}
  \\&= \frac{\frac{5}{2}-\frac{\chi}{kT}\frac{\partial \ln(1+x)}{\partial \ln\rho}|_P}{\frac{3}{2} + \frac{\chi}{kT}\frac{\partial \ln(1+x)}{\partial \ln P}|_\rho}
\end{aligned}</script><p>由Saha方程，</p>
<script type="math/tex; mode=display">\ln\frac{x^2}{1-x^2} = \ln\left(\frac{g}{h^3}(2\pi m_e)^{3/2}k^{5/2}\right) + \frac{5}{2}\ln T - \ln P - \frac{\chi}{kT}</script><p>求微分：</p>
<script type="math/tex; mode=display">\frac{2}{x(1-x)}\mathrm{d}\ln(1+x) = -\mathrm{d}\ln P + \frac{5}{2}\mathrm{d}\ln T + \frac{\chi}{kT}\mathrm{d}\ln T</script><p>再联立物态方程</p>
<script type="math/tex; mode=display">\mathrm{d}\ln P = \mathrm{d}\ln(1+x) + \mathrm{d}\ln\rho + \mathrm{d}\ln T</script><p>得到</p>
<script type="math/tex; mode=display">\frac{\partial \ln(1+x)}{\partial \ln\rho}\bigg |_P = -\frac{\frac{5}{2}+\frac{\chi}{kT}}{\frac{2}{x(1-x)}+\frac{5}{2}+\frac{\chi}{kT}}</script><script type="math/tex; mode=display">\frac{\partial \ln(1+x)}{\partial \ln P}\bigg |_\rho = \frac{\frac{3}{2}+\frac{\chi}{kT}}{\frac{2}{x(1-x)}+\frac{5}{2}+\frac{\chi}{kT}}</script><p>从而不完全电离气体的绝热系数</p>
<script type="math/tex; mode=display">\gamma_{\mathrm{a}}(x)=\frac{5+\left(\frac{5}{2}+\frac{x}{k T}\right)^{2} x(1-x)}{3+\left[\frac{3}{2}+\left(\frac{3}{2}+\frac{x}{k T}\right)^{2}\right] x(1-x)}</script><p>讨论：</p>
<ul>
<li>对$x=1$（完全电离）和$x=0$（完全不电离）的情况，都有$\gamma_a=5/3$。</li>
<li>对部分电离，绝热指数还取决于温度。</li>
</ul>
<h2 id="辐射转移"><a href="#辐射转移" class="headerlink" title="辐射转移"></a>辐射转移</h2><h3 id="辐射的吸收"><a href="#辐射的吸收" class="headerlink" title="辐射的吸收"></a>辐射的吸收</h3><p>定义辐射流量$H$为单位时间通过单位横截面的能量。</p>
<p>辐射通过厚$\mathrm{d}r$的介质薄层，流量减少$-\mathrm{d}H$。对密度$\rho$的介质，有经验公式</p>
<script type="math/tex; mode=display">\mathrm{d}H = -\kappa H\rho\mathrm{d}r = -k_\nu H \mathrm{d}r</script><p>常数$\kappa$称为<strong>不透明度系数</strong>。称$k_\nu=\kappa\rho$为介质的<strong>吸收系数</strong>（依赖辐射的频率）。<br>$k_\nu$为具长度-1次方量纲，统计物理给出$k_\nu^{-1}$的物理意义即为光子的平均自由程。</p>
<p>定义$\mathrm{d}\tau=k_\nu\mathrm{d}r$，称为介质的<strong>光深</strong>。<br>在恒星内部，对辐射不透明，$\tau\sim\infty$；光球层和以外，对辐射透明，$\tau\sim 1$。</p>
<p>对厚$R$的均匀介质，积分有</p>
<script type="math/tex; mode=display">H = H_0 e^{-\kappa\rho R}</script><p>出射流量按指数衰减。</p>
<p>介质中光子和物质相互作用的机制有：</p>
<ul>
<li>电子散射：光子和电子两体碰撞，光子改变方向<ul>
<li>汤姆逊散射：弹性散射，光子动量不改变，从而频率$\nu$也不改变。光子方向改变，无法再被探测到，等效于被介质吸收（吸收机制）。</li>
<li>康普顿散射：光子的能量传给电子，频率降低，运动方向改变，吸收机制</li>
</ul>
</li>
<li>自由-自由吸收：自由电子吸收光子，末态仍为自由电子。（韧致辐射的逆过程）</li>
<li>束缚-自由吸收：原子中的束缚态电子吸收光子，成为自由电子，也称光致电离过程。（复合过程的逆过程）</li>
<li>束缚-束缚吸收：原子中电子吸收光子从低能级跃迁到高能级。</li>
</ul>
<p>介质的不透明度有经验公式：</p>
<script type="math/tex; mode=display">\kappa = \kappa_0 \rho^a T^b</script><p>$a,b$对不同相互作用机制有不同值。</p>
<ul>
<li>电子汤姆逊散射，$a\approx 0,b\approx 0$。<script type="math/tex; mode=display">\kappa_{\mathrm{es}} = \frac{\kappa_{\mathrm{es},0}}{\mu_e} \approx \frac{1}{2}\kappa_{\mathrm{es},0}(1+X)</script>$\kappa_{\mathrm{es},0}=\sigma_T/m_H$，$\sigma_T$为电子的散射截面。</li>
<li>自由-自由吸收：<script type="math/tex; mode=display">\kappa_{\mathrm{ff}} = \frac{\kappa_{\mathrm{ff},0}}{\mu_e} \left<\frac{Z^2}{A}\right> \rho T^{-7/2} \approx \frac{1}{2}\kappa_{\mathrm{ff},0}(1+X)\left<\frac{Z^2}{A}\right> \rho T^{-7/2}</script></li>
</ul>
<h3 id="辐射转移-1"><a href="#辐射转移-1" class="headerlink" title="辐射转移"></a>辐射转移</h3><p>若恒星内部类似太阳，光子的平均自由程$l\sim 1\mathrm{cm}$，厚$l$的球壳可以近似为单一温度黑体。<br>光子的能量$E=cp$，从而单位时间、单位面积的物质吸收的光子动量（也就等于净辐射压强）为</p>
<script type="math/tex; mode=display">\frac{|\mathrm{d}H|}{c} = \frac{\kappa\rho H\mathrm{d}r}{c} = P_\mathrm{rad}(r) - P_\mathrm{rad}(r+\mathrm{d}r)</script><p>即：</p>
<script type="math/tex; mode=display">-\frac{\mathrm{d}P_\mathrm{rad}}{\mathrm{d}r} = \frac{\kappa\rho H}{c}</script><p>对黑体辐射，</p>
<script type="math/tex; mode=display">P_\mathrm{rad} = \frac{1}{3}aT^4</script><p>从而</p>
<script type="math/tex; mode=display">H = -\frac{4acT^3}{3\kappa\rho}\frac{\mathrm{d}T}{\mathrm{d}r}</script><p>由于辐射功率$F=4\pi r^2 H$，上式可以写成：</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}T}{\mathrm{d}r} = -\frac{3}{4ac}\frac{\kappa\rho}{T^3}\frac{F}{4\pi r^2}</script><p>或者</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}T}{\mathrm{d}m} = -\frac{3}{4ac}\frac{\kappa}{T^3}\frac{F}{(4\pi r^2)^2}</script><p>至此结构方程组已完备。加上聚变产能率的方程可以得到完整的恒星演化方程。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>恒星物理笔记</category>
      </categories>
      <tags>
        <tag>天文</tag>
      </tags>
  </entry>
  <entry>
    <title>恒星内部的核过程</title>
    <url>/2020/09/08/stellar-physics-04-nuclear-processes/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>恒星的能源来自热核反应，$\Delta E=\Delta mc^2$。</p>
<h2 id="原子的结合能"><a href="#原子的结合能" class="headerlink" title="原子的结合能"></a>原子的结合能</h2><h3 id="核反应释放的能量"><a href="#核反应释放的能量" class="headerlink" title="核反应释放的能量"></a>核反应释放的能量</h3><p>核反应</p>
<script type="math/tex; mode=display">I(A_i,Z_i)+J(A_j,Z_j) \rightleftharpoons K(A_k,Z_k) + L(A_l,Z_l)</script><p>正反应与逆反应平衡时，称处于核统计平衡。<br>释放核能</p>
<script type="math/tex; mode=display">Q_{ijk} = (M_i+M_j-M_k-M_l)c^2</script><p>原子核$I$形成前，$A_i$个相距无穷远的核子的质量为$A_im_H$，$Q_{ijk}$可以写为：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    Q_{ijk} = &[(M_i-A_im_H)+(M_j-A_jm_H)-(M_k-A_km_H)+(M_l-A_lm_H)]c^2
    \\&+(A_i+A_j-A_k-A_l)m_Hc^2
\end{aligned}</script><p>对原子核$I$，定义质量过剩</p>
<script type="math/tex; mode=display">\Delta M(I) = (M_i-A_im_H)c^2</script><p>其物理意义是自由核子结合成原子核吸收的能量。<br>从而</p>
<script type="math/tex; mode=display">Q_{ijk} = [\Delta M(I) + \Delta M(J) - \Delta M(K)- \Delta M(L)] + (A_i+A_j-A_k-A_l)m_Hc^2</script><p>又由于核反应前后核子数守恒，第二项为零，故</p>
<script type="math/tex; mode=display">Q_{ijk} = \Delta M(I) + \Delta M(J) - \Delta M(K)- \Delta M(L)</script><h3 id="核区某点产能率"><a href="#核区某点产能率" class="headerlink" title="核区某点产能率"></a>核区某点产能率</h3><p>单位时间、单位体积的产能</p>
<script type="math/tex; mode=display">\Delta \epsilon = n_i n_j R_{ijk} Q_{ijk}</script><p>由</p>
<script type="math/tex; mode=display">n_i = \frac{\rho X_i}{A_im_H}</script><p>得到单位质量气体核产能率</p>
<script type="math/tex; mode=display">q = \frac{\Delta \epsilon}{\rho} = \frac{\rho}{m_H^2}\frac{X_iX_j}{A_iA_j}R_{ijk}Q_{ijk}</script><p>考虑所有核反应，总核产能率</p>
<script type="math/tex; mode=display">q = \frac{\rho}{m_H^2} \sum_{ijk} \frac{1}{1+\delta_{ij}}\frac{X_iX_j}{A_iA_j}R_{ijk}Q_{ijk}</script><p>注意核反应有一部分能量被中微子带走，但中微子几乎不参与恒星内部的物理过程，故需要将其扣除。产能率</p>
<script type="math/tex; mode=display">q = q_\mathrm{nuc} - q_\nu</script><h3 id="常见中微子过程"><a href="#常见中微子过程" class="headerlink" title="常见中微子过程"></a>常见中微子过程</h3><ol>
<li>$\beta$衰变：中子衰变成质子和电子，放出一个反电子中微子<script type="math/tex; mode=display">n \rightarrow p + e^- + \bar{\nu}_e</script>$\beta^+$衰变：<script type="math/tex; mode=display">p \rightarrow n + e^+ + \nu_e</script></li>
<li>光致中微子过程<script type="math/tex; mode=display">\gamma + e^- \rightarrow e^- + \nu_e</script></li>
<li>正负电子对湮灭<script type="math/tex; mode=display">e + e^- \rightarrow \gamma + \gamma + \nu_e +\bar{\nu}_i</script>($i=e,\tau,\mu$)都有可能。通常释放gamma光子<br>逆反应：电子对产生，发生在高温、高密度情况</li>
</ol>
<h2 id="核反应的可行性"><a href="#核反应的可行性" class="headerlink" title="核反应的可行性"></a>核反应的可行性</h2><h3 id="可能的反应路线"><a href="#可能的反应路线" class="headerlink" title="可能的反应路线"></a>可能的反应路线</h3><p>自由核子结合形成原子核$I(A,Z)$释放能量$\Delta \epsilon$，定义该原子核的结合能为</p>
<script type="math/tex; mode=display">E_b(I) = \frac{\Delta\epsilon}{A}</script><p>即平均每个核子释放的能量。<br>结合能越大，原子核越稳定。<br><img src="04-1-binding-energy.png" alt=""><br>由结合能曲线，${}^{56}\mathrm{Fe}$有最大的结合能，原子核最稳定。更重的核裂变和更轻的核聚变都能自发进行，释放能量。恒星聚变形成铁核后，核反应终止，经历超新星爆炸后一部分铁碎裂飞出，形成ISM。</p>
<h3 id="库伦势垒"><a href="#库伦势垒" class="headerlink" title="库伦势垒"></a>库伦势垒</h3><p>氢原子要发生核聚变，需要靠近到强核力起作用的距离内($r\le 10^{-15}\mathrm{m}$)。</p>
<p>原子热运动动能$E_k\sim \frac{3}{2}kT\sim 1\mathrm{keV}$，而库伦势能$E_c\sim 10^3\mathrm{keV}$，故热运动无法突破库伦势垒产生核聚变。</p>
<p>考虑量子隧穿效应。发生量子隧穿的概率</p>
<script type="math/tex; mode=display">P \propto \exp \left(-\pi \frac{Z_iZ_je^2}{\epsilon_0 hv} \right)</script><p>其中$v$为原子相对运动的速率。<br>从而反应截面$S\propto P\mathrm{d}n(v)$，其中$n(v)$是速度在$v\sim v+\mathrm{d}v$之间的粒子的数密度。<br>对处于热平衡态的气体，由麦克斯韦分布，</p>
<script type="math/tex; mode=display">n(v) \propto e^{-m_gv^2/2kT}</script><p>从而反应率</p>
<script type="math/tex; mode=display">R_{ijk} \propto v\cdot e^{-\pi Z_iZ_je^2/ \epsilon_0 hv} \cdot e^{-m_gv^2/2kT}</script><p>$R_{ijk}$存在极大值，在$v=v_p$处，称为<strong>Gamov峰</strong>。</p>
<script type="math/tex; mode=display">v_p = \left( \frac{\pi Z_iZ_je^2 kT}{\epsilon_0 h m_g} \right)^{1/3}</script><p>峰值反应率</p>
<script type="math/tex; mode=display">R_{ijk,p} \propto (kT)^{-2/3}\exp\left[-\frac{3}{2} \left(\frac{\pi Z_iZ_je^2 }{\epsilon_0 h}\right)^{2/3} \left(\frac{m_g}{kT}\right)^{1/3}\right]</script><ul>
<li>$T$增大时，峰值反应率增大（指数项主导）。</li>
<li>$Z_i$增大时反应率减小，即更重的元素发生聚变需要更高的温度。恒星在主序中燃烧氢，氢燃料耗尽后恒星引力塌缩，释放引力势能，温度升高，从而可以点火氦聚变。</li>
</ul>
<p>另外，$I$和$J$原子发生核反应会有短暂的中间态：</p>
<script type="math/tex; mode=display">I+J \rightarrow (I+J)^* \rightarrow K+L</script><p>$(I+J)^*$是处于量子共振态的复合核。这一效应也可以提高核反应率。</p>
<h3 id="核反应时标"><a href="#核反应时标" class="headerlink" title="核反应时标"></a>核反应时标</h3><p>$\tau_i$为$I$元素在$I$于$J$发生核反应被消耗的特征时标。</p>
<script type="math/tex; mode=display">\tau_i = (n_jR_{ijk})^{-1}</script><p>单位时间、单位体积内$n_jR_{ijk}$个$J$原子核和$I$原子核发生了核反应。其倒数就是消耗一个$I$原子核的特征时间。</p>
<h3 id="对温度依赖"><a href="#对温度依赖" class="headerlink" title="对温度依赖"></a>对温度依赖</h3><p>$R_{ijk}$十分依赖温度，发生核反应需要大于某一点火温度。</p>
<p>对核产能率$q$，有经验关系</p>
<script type="math/tex; mode=display">q = q_0 \rho T^n</script><p>对不同的核反应有不同的$n$。</p>
<h2 id="氢燃烧I：p-p链"><a href="#氢燃烧I：p-p链" class="headerlink" title="氢燃烧I：p-p链"></a>氢燃烧I：p-p链</h2><h3 id="pp-I"><a href="#pp-I" class="headerlink" title="pp-I"></a>pp-I</h3><p>大致的反应路线为</p>
<script type="math/tex; mode=display">\mathrm{p} + \mathrm{p} \rightarrow \mathrm{pp}（中间核）\rightarrow \mathrm{np} + \mathrm{e}^+ + \nu_e</script><p>（中间核的衰变称为$\beta^+$衰变）</p>
<p>具体反应过程为：</p>
<script type="math/tex; mode=display">{}^1_1\mathrm{p} + {}^1_1\mathrm{p} \rightarrow {}^2_1\mathrm{D} + {}^0_1\mathrm{e}^+ + \nu_e</script><script type="math/tex; mode=display">{}^2_1\mathrm{D} + {}^1_1\mathrm{p} \rightarrow {}_2^3\mathrm{He} + \gamma</script><script type="math/tex; mode=display">{}_2^3\mathrm{He} + {}_2^3\mathrm{He} \rightarrow {}_2^4\mathrm{He} + 2{}_1^1\mathrm{p}</script><p>净效果为</p>
<script type="math/tex; mode=display">4{}^1_1\mathrm{p} \rightarrow {}_2^4\mathrm{He} + 2{}^0_1\mathrm{e}^+ + 2\nu_e + 2\gamma</script><p>产能</p>
<script type="math/tex; mode=display">Q_{p-p}=4\Delta M({}^1_1\mathrm{H})-\Delta M({}_2^4\mathrm{He})=26.73\mathrm{MeV}</script><p>产能率</p>
<script type="math/tex; mode=display">\epsilon = \frac{Q_{p-p}}{4M(\mathrm{H})} \approx 0.7\%</script><p>远大于化学反应，仅次于黑洞吸积释能（史瓦西黑洞$\epsilon\sim15\%$，克尔黑洞$\epsilon\sim42\%$）。</p>
<h3 id="pp-II和pp-III"><a href="#pp-II和pp-III" class="headerlink" title="pp-II和pp-III"></a>pp-II和pp-III</h3><p>pp-II和pp-III的第一步反应相同，且都需要pp-I先进行：</p>
<script type="math/tex; mode=display">{}_2^3\mathrm{He} + {}_2^4\mathrm{He} \rightarrow {}_4^7\mathrm{Be} + \gamma</script><p>pp-II分支：</p>
<script type="math/tex; mode=display">{}_4^7\mathrm{Be} + {}_{-1}^{\ \ \ 0}\mathrm{e}^- \rightarrow {}_3^7\mathrm{Li} + \nu_e</script><script type="math/tex; mode=display">{}_3^7\mathrm{Li} + {}_1^1\mathrm{p} \rightarrow 2{}_2^4\mathrm{He}</script><p>pp-III分支：</p>
<script type="math/tex; mode=display">{}_4^7\mathrm{Be} + {}_1^1\mathrm{p} \rightarrow {}_5^8\mathrm{B} + \gamma</script><script type="math/tex; mode=display">{}_5^8\mathrm{B} \rightarrow {}_4^8\mathrm{Be} + {}_{1}^{0}\mathrm{e}^+ + \nu_e</script><script type="math/tex; mode=display">{}_4^8\mathrm{Be} \rightarrow 2{}_2^4\mathrm{He}</script><p>整个pp链的反应如图：<br><img src="04-2-pp-chain.png" alt=""></p>
<p>讨论：</p>
<ul>
<li>各分支并列进行，但相对比重依赖于$T,\rho,X_i$。<br>例如，相对丰度固定时，随温度升高，反应由pp-I主导变为pp-II、pp-III主导（越后面的对温度越敏感）。</li>
<li>核反应产生的能量一部分被中微子带走，且在不同反应中中微子能量不同。低能中微子主要在pp-I反应中产生（两个质子结合），高能中微子主要在pp-III反应中产生（硼衰变）。</li>
<li>pp链三个分支的平均单次反应释能$\bar{Q}_{\mathrm{p-p}}\sim26\mathrm{MeV}$<br>平均产能率$\epsilon\approx 6\times10^{18}\mathrm{erg/g}$</li>
<li>反应速率取决于最慢的反应（pp-I）<br>核产能率$q\sim \rho T^n$，对pp链$n\approx 4\sim6$。在各核反应中，pp链是对温度最不敏感的。</li>
<li>由此计算能量释放时标$\tau$（pp链维持的氢燃烧时间），对$M\sim M_\odot$，$\tau\sim 10^{10}\mathrm{yr}$</li>
<li>由Gamov峰核反应率公式，涉及越重的核的反应需要越高的温度，因而pp链是点火温度最低的。</li>
</ul>
<h2 id="氢燃烧II：CNO双循环"><a href="#氢燃烧II：CNO双循环" class="headerlink" title="氢燃烧II：CNO双循环"></a>氢燃烧II：CNO双循环</h2><p>两个并列的循环，有C、N、O元素参与（上一代超新星增丰），类似催化效果。两个独立的循环：</p>
<ol>
<li><script type="math/tex; mode=display">{}_{\ \ 6}^{12}\mathrm{C} + {}_1^1\mathrm{p} \rightarrow {}_{\ \ 7}^{13}\mathrm{N} + \gamma</script><script type="math/tex; mode=display">{}_{\ \ 7}^{13}\mathrm{N} \rightarrow {}_{\ \ 6}^{13}\mathrm{C} + {}_1^0\mathrm{e}^+ + \nu_e</script><script type="math/tex; mode=display">{}_{\ \ 6}^{13}\mathrm{C} + {}_1^1\mathrm{p} \rightarrow {}_{\ \ 7}^{14}\mathrm{N} + \gamma</script><script type="math/tex; mode=display">{}_{\ \ 7}^{14}\mathrm{N} + {}_1^1\mathrm{p} \rightarrow {}_{\ \ 8}^{15}\mathrm{O} + \gamma</script><script type="math/tex; mode=display">{}_{\ \ 8}^{15}\mathrm{O} \rightarrow {}_{\ \ 7}^{15}\mathrm{N} + {}_1^0\mathrm{e}^+ + \nu_e</script><script type="math/tex; mode=display">{}_{\ \ 7}^{15}\mathrm{N} + {}_1^1\mathrm{p} \rightarrow {}_{\ \ 6}^{12}\mathrm{C} + {}_{2}^{4}\mathrm{He}</script></li>
<li><script type="math/tex; mode=display">{}_{\ \ 7}^{14}\mathrm{N} + {}_1^1\mathrm{p} \rightarrow {}_{\ \ 8}^{15}\mathrm{O} + \gamma</script><script type="math/tex; mode=display">{}_{\ \ 8}^{15}\mathrm{O} \rightarrow {}_{\ \ 7}^{15}\mathrm{N} + {}_1^0\mathrm{e}^+ + \nu_e</script><script type="math/tex; mode=display">{}_{\ \ 7}^{15}\mathrm{N} + {}_1^1\mathrm{p} \rightarrow {}_{\ \ 8}^{16}\mathrm{O} + \gamma</script><script type="math/tex; mode=display">{}_{\ \ 8}^{16}\mathrm{O} + {}_1^1\mathrm{p} \rightarrow {}_{\ \ 9}^{17}\mathrm{F} + \gamma</script><script type="math/tex; mode=display">{}_{\ \ 9}^{17}\mathrm{F} \rightarrow {}_{\ \ 8}^{17}\mathrm{O} + {}_1^0\mathrm{e}^+ + \nu_e</script><script type="math/tex; mode=display">{}_{\ \ 8}^{17}\mathrm{O} + {}_1^1\mathrm{p} \rightarrow {}_{\ \ 7}^{14}\mathrm{N} + {}_{2}^{4}\mathrm{He}</script></li>
</ol>
<p><img src="04-3-CNO-bi-cycle.png" alt=""></p>
<p>净反应都为</p>
<script type="math/tex; mode=display">4{}_1^1\mathrm{p} \rightarrow {}_{2}^{4}\mathrm{He} + 2{}_1^0\mathrm{e}^+ + 2\nu_e + 3\gamma</script><p>讨论：</p>
<ul>
<li>C、N、O、F元素循环利用，丰度不随时间变化</li>
<li>相对丰度与温度有关</li>
<li>反应速率取决于最慢的反应。<br>实验表明质子俘获反应对温度的依赖很敏感，而$\beta^+$衰变基本与温度无关。因此高温时$\beta^+$衰变较慢，决定了总反应速率。</li>
<li>单次CNO循环释放光子的能量$\sim 25\mathrm{MeV}$<br>总产能率<script type="math/tex; mode=display">q_\mathrm{CNO} \propto \rho T^{16}</script>CNO循环比pp链更依赖温度。</li>
</ul>
<h2 id="氦燃烧：-3-alpha-过程"><a href="#氦燃烧：-3-alpha-过程" class="headerlink" title="氦燃烧：$3\alpha$过程"></a>氦燃烧：$3\alpha$过程</h2><p>恒星氢燃料耗尽后，会收缩释放引力势能，点燃氦聚变。</p>
<p>两个氦核会发生反应</p>
<script type="math/tex; mode=display">{}_2^4\mathrm{He} + {}_2^4\mathrm{He} \rightarrow {}_4^8\mathrm{Be}</script><p>${}_4^8Be$的寿命很短，在$10^{-16}\mathrm{s}$内就会衰变成两个氦核（逆反应），反应无法进行下去。</p>
<p>在$T\ge 10^8\mathrm{K}$时，且$n_{^8\mathrm{Be}}/n_{^4\mathrm{He}}\sim 10^{-9}$时，正反应可以为主导反应。此时一部分${}^8\mathrm{Be}$可以进一步反应：</p>
<script type="math/tex; mode=display">{}_4^8\mathrm{Be} + {}_2^4\mathrm{He} \rightarrow {}_{\ \ 6}^{12}\mathrm{C}^* \rightarrow {}_{\ \ 6}^{12}\mathrm{C} + \gamma</script><p>其中${}_{\ \ 6}^{12}\mathrm{C}^*$是激发量子共振态，后一个反应就是量子共振态的退激发。</p>
<p>总反应为：</p>
<script type="math/tex; mode=display">3{}_{2}^{4}\mathrm{He} \rightarrow {}_{\ \ 6}^{12}\mathrm{C} + \gamma</script><p>称为 <strong>$3\alpha$过程</strong>。</p>
<p>一次反应释能</p>
<script type="math/tex; mode=display">Q_{3\alpha} = 3\Delta M({}_{2}^{4}\mathrm{He}) - \Delta M({}_{\ \ 6}^{12}\mathrm{C}) \approx 7.275\mathrm{MeV}</script><p>产能率</p>
<script type="math/tex; mode=display">\epsilon_{3\alpha} = \frac{Q_{3\alpha}}{3m_\alpha} \approx 5.8\times10^{17} \mathrm{erg/g}</script><p>约为pp链的十分之一。</p>
<p>核产能率的经验公式</p>
<script type="math/tex; mode=display">q_{3\alpha} \approx \rho^2T^{40}</script><p>对温度依赖敏感。</p>
<p>${}_{\ \ 6}^{12}\mathrm{C}$还可以进一步俘获$\alpha$粒子：</p>
<script type="math/tex; mode=display">{}_{\ \ 6}^{12}\mathrm{C} + {}_{2}^{4}\mathrm{He} \rightarrow {}_{\ \ 8}^{16}\mathrm{O}</script><p>${}_{\ \ 8}^{16}\mathrm{O}$的库伦势垒已经很大，难以进一步俘获$\alpha$粒子进行反应。从而${}_{\ \ 8}^{16}\mathrm{O}$可以在恒星中累积。</p>
<h2 id="碳和氧的燃烧"><a href="#碳和氧的燃烧" class="headerlink" title="碳和氧的燃烧"></a>碳和氧的燃烧</h2><p>氦耗尽后，恒星进一步收缩升温，可以触发碳和氧的燃烧。</p>
<p>碳燃烧：</p>
<script type="math/tex; mode=display">{}_{\ \ 6}^{12}\mathrm{C} + {}_{\ \ 6}^{12}\mathrm{C} \rightarrow {}_{12}^{24}\mathrm{Mg}^* \rightarrow {}_{12}^{24}\mathrm{Mg} + \gamma</script><p>${}_{12}^{24}\mathrm{Mg}$可能发生如下几种衰变：</p>
<script type="math/tex; mode=display">{}_{12}^{24}\mathrm{Mg} \rightarrow {}_{12}^{23}\mathrm{Mg} + {}_0^1\mathrm{n}</script><script type="math/tex; mode=display">{}_{12}^{24}\mathrm{Mg} \rightarrow {}_{11}^{23}\mathrm{Na} + {}_1^1\mathrm{p}</script><script type="math/tex; mode=display">{}_{12}^{24}\mathrm{Mg} \rightarrow {}_{10}^{20}\mathrm{Ne} + {}_2^4\mathrm{He}</script><script type="math/tex; mode=display">{}_{12}^{24}\mathrm{Mg} \rightarrow {}_{\ \ 8}^{16}\mathrm{O} + 2{}_2^4\mathrm{He}</script><p>四种衰变路径概率相当，并行进行。<br>一次反应$Q\sim 13\mathrm{MeV}$，$\epsilon\sim 5.2\times 10^{17}\mathrm{erg/g}$（略低于$\epsilon_{3\alpha}$）。</p>
<p>氧燃烧：</p>
<script type="math/tex; mode=display">{}_{\ \ 8}^{16}\mathrm{O} + {}_{\ \ 8}^{16}\mathrm{C} \rightarrow {}_{16}^{32}\mathrm{S}^* \rightarrow {}_{16}^{32}\mathrm{S} + \gamma</script><p>${}_{16}^{32}\mathrm{S}$可能发生以下几种衰变：</p>
<script type="math/tex; mode=display">{}_{16}^{32}\mathrm{S} \rightarrow {}_{16}^{31}\mathrm{S} + {}_0^1\mathrm{n}</script><script type="math/tex; mode=display">{}_{16}^{32}\mathrm{S} \rightarrow {}_{15}^{31}\mathrm{P} + {}_1^1\mathrm{p}</script><script type="math/tex; mode=display">{}_{16}^{32}\mathrm{S} \rightarrow {}_{14}^{28}\mathrm{Si} + {}_2^4\mathrm{He}</script><script type="math/tex; mode=display">{}_{16}^{32}\mathrm{S} \rightarrow {}_{12}^{24}\mathrm{Mg} + 2{}_2^4\mathrm{He}</script><p>四种衰变路径并行进行。<br>一次反应$Q\sim 13\mathrm{MeV}$，$\epsilon\sim 4.8\times 10^{17}\mathrm{erg/g}$。</p>
<p>讨论：</p>
<ul>
<li>碳燃烧和氧燃烧增加了氢核和氦核的丰度，增丰的氢和氦再被重核俘获可以形成更多同位素</li>
<li>氧燃烧生成${}_{14}^{28}\mathrm{Si}$的概率更大，使得硅元素更丰富（地球上硅酸盐）</li>
</ul>
<h2 id="硅的燃烧：核统计平衡"><a href="#硅的燃烧：核统计平衡" class="headerlink" title="硅的燃烧：核统计平衡"></a>硅的燃烧：核统计平衡</h2><h3 id="核统计平衡-Nuclear-Statistical-Equilibrium-NSE"><a href="#核统计平衡-Nuclear-Statistical-Equilibrium-NSE" class="headerlink" title="核统计平衡(Nuclear Statistical Equilibrium, NSE)"></a>核统计平衡(Nuclear Statistical Equilibrium, NSE)</h3><p>在$T\sim 10^9\mathrm{K}$，${}_{\ \ 8}^{16}\mathrm{O}$俘获$\alpha$粒子，</p>
<script type="math/tex; mode=display">{}_{\ \ 8}^{16}\mathrm{O} + {}_2^4\mathrm{He} \rightarrow {}_{10}^{20}\mathrm{Ne} + \gamma</script><p>温度升高到$T\sim 1.5\times10^9\mathrm{K}$，发生逆反应：</p>
<script type="math/tex; mode=display">{}_{10}^{20}\mathrm{Ne} + \gamma \rightarrow {}_{\ \ 8}^{16}\mathrm{O} + {}_2^4\mathrm{He}</script><p>称为<strong>光致解离</strong>过程。<br>类似地，在$T\sim 3\times10^9\mathrm{K}$，会发生${}_{14}^{28}\mathrm{Si}$的光致解离。<br>NSE计算正反应和逆反应速率基本相等，但总体上倾向于形成更稳定的核——铁族：${}^{56}\mathrm{Fe},\mathrm{Co},\mathrm{Ni}$。</p>
<p>铁族元素最稳定，不易分解，释能的核聚变也到此为止。<br>在$T\gtrsim 7\times10^9\mathrm{K}$时，可以发生铁核的光致解离。</p>
<h2 id="重元素的形成：s过程，r过程"><a href="#重元素的形成：s过程，r过程" class="headerlink" title="重元素的形成：s过程，r过程"></a>重元素的形成：s过程，r过程</h2><p>重元素可以发生中子俘获反应，俘获$\mathrm{C},\mathrm{O},\mathrm{Si}$燃烧产生的中子，由于中子是电中性的，不需要克服库伦势垒，反应温度较低：</p>
<script type="math/tex; mode=display">I(A,Z) + {}^1_0\mathrm{n} \rightarrow I_1(A+1,Z) + \gamma</script><script type="math/tex; mode=display">I_1(A+1,Z) + {}^1_0\mathrm{n} \rightarrow I_2(A+2,Z) + \gamma</script><p>只要$I_n$核结构稳定，中子俘获反应就可以一直进行下去，生成$I$的更重的同位素。</p>
<p>如果$I_n$核不稳定，发生$\beta$衰变：</p>
<script type="math/tex; mode=display">I_n(A+n,Z) \rightarrow J(A+n,Z+1) + {}_{-1}^{\ \ \ 0} \mathrm{e}^- + \bar{\nu}_e</script><p>$J$核也可能继续发生$\beta$衰变，直到形成稳定的核，可以形成元素周期表后面的元素。</p>
<p>由不稳定核出发，进行自发演化，时标更短的反应路线占主导。实验室发现，$\tau_\beta\sim\mathrm{const.}$，$\tau_n=\tau_n(\rho,T)$。<br>由$\beta$衰变反应主导的过程称为s过程，由中子俘获反应主导的过程称为r过程。<br>恒星中进行一系列s过程和r过程形成重元素。</p>
<p>$\mathrm{Au}$的形成：</p>
<ul>
<li>大质量恒星晚期的s、r过程</li>
<li>双中子星并合</li>
</ul>
<h2 id="正负电子对的产生"><a href="#正负电子对的产生" class="headerlink" title="正负电子对的产生"></a>正负电子对的产生</h2><p>实验室中发现，原子核吸收高能光子产生正负电子对，</p>
<script type="math/tex; mode=display">N + \gamma \rightarrow N + \mathrm{e}^- + \mathrm{e}^+</script><p>称为<strong>对产生过程</strong>(pair production)。</p>
<p>能量守恒要求$h\nu \ge 2m_e$，频率位于gamma波段，$h\nu\sim kT$对应黑体辐射温度$T\sim 10^{10}\mathrm{K}$。</p>
<p>由于黑体辐射的普朗克频谱有高能尾巴，只需要$T\ge10^9\mathrm{K}$，也可以有大量gamma光子，进行对产生。</p>
<p>类似地，氢原子的光致电离过程需要$h\nu \ge 13.6\mathrm{eV}$，对应$T\sim 10^5\mathrm{K}$，而事实上$T\sim 10^4\mathrm{K}$就有较多光子可以电离氢原子，因此恒星气体中有较多比例的电离氢。</p>
<h2 id="铁核光致解离"><a href="#铁核光致解离" class="headerlink" title="铁核光致解离"></a>铁核光致解离</h2><p>${}_{26}^{56}\mathrm{Fe}$核吸收光子，被逐步剥离</p>
<script type="math/tex; mode=display">{}_{26}^{56}\mathrm{Fe} + \gamma \rightarrow 13{}_{2}^{4}\mathrm{He} + 4{}_0^1\mathrm{n}</script><p>光子要克服铁核的强相互作用，需要能量$h\nu\sim 100\mathrm{MeV}$，需要很高的温度。此时${}_{2}^{4}\mathrm{He}$的丰度可能超过${}_{26}^{56}\mathrm{Fe}$。</p>
<p>若温度继续升高，可能出现${}_{2}^{4}\mathrm{He}$的光致解离，</p>
<script type="math/tex; mode=display">{}_{2}^{4}\mathrm{He} + \gamma \rightarrow 2{}_{1}^{1}\mathrm{p} + 2{}_0^1\mathrm{n}</script><p>主序星的温度要可以点火核聚变，且重核不会完全解离，故</p>
<script type="math/tex; mode=display">10^6\mathrm{K} < T < 10^9\mathrm{K}</script><p>和观测结果一致。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>恒星物理笔记</category>
      </categories>
      <tags>
        <tag>天文</tag>
      </tags>
  </entry>
  <entry>
    <title>恒星的稳定性</title>
    <url>/2020/09/08/stellar-physics-06-stability/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>平衡态按二阶导数分为稳定平衡、不稳定平衡、随遇平衡</p>
<p>恒星处于热平衡、流体静力学平衡。稳定平衡的恒星受热扰动、动力学扰动，应该可以回到平衡态。</p>
<h2 id="长期热稳定性"><a href="#长期热稳定性" class="headerlink" title="长期热稳定性"></a>长期热稳定性</h2><p>2.4节（维里定理）里推出过</p>
<script type="math/tex; mode=display">3\int_{0}^{M} \frac{P}{\rho} \mathrm{d}m = -\Omega</script><p>而</p>
<script type="math/tex; mode=display">\frac{P}{\rho} = \frac{P_\mathrm{gas}}{\rho} + \frac{P_\mathrm{rad}}{\rho} = \frac{2}{3}u_\mathrm{gas} + \frac{1}{3}u_\mathrm{rad}</script><p>从而</p>
<script type="math/tex; mode=display">U_\mathrm{gas} = -\frac{1}{2}(\Omega + U_\mathrm{rad})</script><p>$E=U_\mathrm{gas}+U_\mathrm{rad}+\Omega=-U_\mathrm{gas}&lt;0$，系统处于束缚态。<br>定义等效引力势能$\Omega_\mathrm{eff}=\Omega+U_\mathrm{rad}$，能保留维里定理的形式$2U_\mathrm{gas}+\Omega_\mathrm{eff}=0$。<br>恒星收缩时，$|\Omega_\mathrm{eff}|$增大，即$U_\mathrm{gas}$增大，恒星温度升高（释放的引力势能用来加热恒星气体）。</p>
<p>恒星总能的变化率</p>
<script type="math/tex; mode=display">\dot{E} = L_\mathrm{nuc} - L</script><p>在平衡态上，$L_\mathrm{nuc}=L,E=\mathrm{const}$。<br>设系统受扰动略微偏离平衡态，使$L_\mathrm{nuc}&gt;L$，此时$\dot{E}&gt;0$，$|E|$减小，从而$|\Omega_\mathrm{eff}|$减小，恒星膨胀，温度降低，导致核产能率降低，回到原平衡态。从而即使恒星有很多短时标的不稳定性，其在长时标上还是稳定的。</p>
<h2 id="热不稳定性"><a href="#热不稳定性" class="headerlink" title="热不稳定性"></a>热不稳定性</h2><h3 id="简并气体的不稳定性"><a href="#简并气体的不稳定性" class="headerlink" title="简并气体的不稳定性"></a>简并气体的不稳定性</h3><p>多方球模型中</p>
<script type="math/tex; mode=display">P_c = (4\pi)^{1/3}B_n GM^{2/3} \rho_c^{4/3} = C_1\rho_c^{4/3}</script><p>($C_1$为常数)。求对数并取全微分，</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P_c}{P_c} = \frac{4}{3}\frac{\mathrm{d}\rho_c}{\rho_c} \tag{2.1}</script><p>一般地,气体状态方程$P = C_3\rho^aT^b$，有：</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P_c}{P_c} = a\frac{\mathrm{d}\rho_c}{\rho_c} + b\frac{\mathrm{d}T_c}{T_c} \tag{2.2}</script><p>对比(2.1)和(2.2)，有</p>
<script type="math/tex; mode=display">\left(\frac{4}{3}-a\right) \frac{\mathrm{d}\rho_c}{\rho_c} = b\frac{\mathrm{d}T_c}{T_c} \tag{2.3}</script><p>分析下面两种情况：</p>
<ul>
<li>若核区为理想气体，<script type="math/tex; mode=display">P = \frac{\mathcal{R}}{\mu}\rho T</script>即$a=b=1$，(2.3)给出<script type="math/tex; mode=display">\frac{1}{3} \frac{\mathrm{d}\rho_c}{\rho_c} = \frac{\mathrm{d}T_c}{T_c}</script>若引力不稳定性导致核区稍微收缩，$\rho_c$增大，则$T_c$增大，从而$q$迅速增大，产生大量热量，使辐射压增大，又导致核区膨胀，从而可以维持稳定。</li>
<li>若核区为简并电子气，非相对论性的和相对论性的物态方程分别为<script type="math/tex; mode=display">P_\mathrm{e,deg} = k_1\rho^{5/3}T^b</script><script type="math/tex; mode=display">P_\mathrm{e,r,deg} = k_2\rho^{4/3}T^b</script>其中$0 &lt; b \ll 1$。<br>这两种物态方程都有$a \ge 4/3$，即密度减小时温度增大。当核区等离子体不稳定性使$L_\mathrm{nuc} &gt; L$时，辐射压增大导致核区膨胀，$\rho_c$减小，而$T_c$将增大，使$q$进一步增大，核区将会持续膨胀，偏离平衡态，这一过程称为<strong>runaway</strong>。<br>若膨胀到一定程度使密度减小到解除简并态，核区重新成为稳定的理想气体，这一特例下runaway可以被避免。</li>
</ul>
<h3 id="薄壳不稳定性"><a href="#薄壳不稳定性" class="headerlink" title="薄壳不稳定性"></a>薄壳不稳定性</h3><p>考虑半径$r_0\sim r$处，厚$\ell=r-r_0$，质量$\Delta m$的薄壳，$\ell\ll R$，认为这一薄壳中温度、密度均匀，近似处于热平衡态。</p>
<p>由流体静力学平衡条件，薄壳中的总压力即为$r$内的物质对$r\sim R$的质量为$\Delta \tilde{m}$的壳层的自引力，而压强是各向同性的，从而</p>
<script type="math/tex; mode=display">P(r) \approx \frac{1}{4\pi r^2}\frac{Gm\Delta\tilde{m}}{r^2} \sim \frac{1}{r^4}</script><p>即</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P}{P} = -4\frac{\mathrm{d}r}{r}</script><p>质量$\Delta m=\rho(r)(4\pi r^2\ell)$保持不变时，有$\rho\sim\ell^{-1}$，即</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}\rho}{\rho} = -\frac{\mathrm{d}\ell}{\ell} = -\frac{\mathrm{d}r}{\ell} = -\frac{\mathrm{d}r}{r}\frac{r}{\ell}</script><p>即</p>
<script type="math/tex; mode=display">-\frac{\mathrm{d}r}{r} = \frac{\ell}{r}\frac{\mathrm{d}\rho}{\rho}</script><p>从而</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P}{P} = 4\frac{\ell}{r}\frac{\mathrm{d}\rho}{\rho}</script><p>联立(2.2)式，</p>
<script type="math/tex; mode=display">\left(4\frac{\ell}{r}-a\right) \frac{\mathrm{d}\rho_c}{\rho_c} = b\frac{\mathrm{d}T_c}{T_c}</script><p>同简并气体不稳定性的分析，壳层热扰动下能维持平衡的条件是$4\frac{\ell}{r}&gt;a$。远离核区的气体近似为理想气体，稳定条件即$4\frac{\ell}{r}&gt;1$。而薄壳$\ell\ll r$，因此薄壳在热扰动下是不稳定的。</p>
<p>白矮星表面上会残留没燃烧的氢，若经历热扰动，表面亮度会急剧增加，形成核闪耀，使本不可见的白矮星变得可见，观测上称为新星。</p>
<p>最后需要说明的是，上面的讨论中没有考虑温度的变化也会导致光度$L$的变化。如果恒星壳层的膨胀导致温度升高，但同时光度也升高使$L_\mathrm{nuc} &lt; L$，此时壳层也会失去能量而收缩，使其不至于runaway。不过事实上$L\sim T^4$，而相比之下$q$对温度要敏感的多，因此忽略$L$的变化也是合理的。</p>
<h2 id="动力学稳定性"><a href="#动力学稳定性" class="headerlink" title="动力学稳定性"></a>动力学稳定性</h2><p>恒星$r$处压强产生各向同性扰动$\delta P$，收缩至半径$r’$。若收缩后还能向外膨胀恢复到原来的位置，则认为系统是动力学稳定的。</p>
<p>令</p>
<script type="math/tex; mode=display">r' = r(1-\epsilon)</script><p>$0&lt;\epsilon\ll 1$。<br>由质量连续性方程，</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \rho'(r') &= \frac{1}{4\pi r'^2}\frac{\mathrm{d}m}{\mathrm{d}r'} = \frac{1}{4\pi r^2(1-\epsilon)^2}\frac{\mathrm{d}m}{\mathrm{d}r}\frac{\mathrm{d}r}{\mathrm{d}r'}
    \\&= \frac{\rho(r)}{(1-\epsilon)^3}
    \\&\approx \rho(r)(1+3\epsilon)
\end{aligned}</script><p>设压缩过程为绝热的（忽略辐射冷却，也忽略辐射压），绝热指数$\gamma_a$。气体的物态方程为$PV^{\gamma_a}=\mathrm{const}$，即$P\rho^{-\gamma_a}=\mathrm{const}$。从而有</p>
<script type="math/tex; mode=display">P' = P(1+3\epsilon)^{\gamma_a} \approx P(1+3\gamma_a\epsilon)</script><p>另一方面，$r’$处自引力产生的压强为</p>
<script type="math/tex; mode=display">P_h' = \int_m^M \frac{Gm}{4\pi r^4(1-\epsilon)^4} \mathrm{d}m = (1-\epsilon)^{-4}P \approx (1+4\epsilon)P</script><p>若要使壳层能膨胀会原来的状态，应有$P’&gt;P_h’$，即</p>
<script type="math/tex; mode=display">\gamma_a > \frac{4}{3}</script><p>这一条件需要在恒星中任何位置都成立，称为<strong>动力学稳定（强）判据</strong>。</p>
<p>强判据成立意味着系统是动力学稳定的，但只有部分区域的$\gamma_a&lt;4/3$是否就意味着动力学不稳定还需要进一步考虑。整体的动力学稳定性取决于<strong>动力学积分</strong>：</p>
<script type="math/tex; mode=display">I_\mathrm{dyn} = \int \left(\gamma_a-\frac{4}{3}\right)\frac{P}{\rho}\mathrm{d}m</script><p>$I_\mathrm{dyn}&lt;0$时系统是动力学不稳定的。</p>
<ul>
<li>若$\gamma_a&lt;4/3$在核区较大范围内成立，由于中心部分$P/\rho$较大，$I_\mathrm{dyn}&lt;0$，系统动力学不稳定。</li>
<li>若$\gamma_a&lt;4/3$仅在表面附近的壳层成立，这一区域对应$P/\rho$很小，因此积分由内部区域主导，$I_\mathrm{dyn}&gt;0$，系统是动力学稳定的。</li>
</ul>
<h2 id="动力学不稳定性的例子"><a href="#动力学不稳定性的例子" class="headerlink" title="动力学不稳定性的例子"></a>动力学不稳定性的例子</h2><ol>
<li>相对论性简并电子气<br>$n=3,\gamma_a=4/3$。系统为白矮星，$M\rightarrow M_\mathrm{ch}$。<br>若吸附质量$\delta M$使$M+\delta M&gt;M_\mathrm{ch}$，此时简并压不足以抵抗引力，星体将进行引力塌缩，白矮星结构破坏，因此是动力学不稳定的。</li>
<li>辐射压主导<br>非相对论性气体$n=3/2,\gamma_a=5/3$<br>相对论性气体和辐射$n=3,\gamma=4/3$<br>因此辐射主导的恒星是动力学不稳定的。</li>
</ol>
<p>另一方面，对辐射，$u_\mathrm{rad}=3P/\rho$，从而</p>
<script type="math/tex; mode=display">-\Omega = 3\int_{0}^{M} \frac{P}{\rho} \mathrm{d}m = 3\int_{0}^{M} \frac{1}{3}u_\mathrm{rad} \mathrm{d}m = U_\mathrm{rad}</script><p>即辐射压主导的恒星的$E=U+\Omega\approx 0$，即系统是非束缚的。也能说明系统是动力学不稳定的。</p>
<h3 id="部分电离"><a href="#部分电离" class="headerlink" title="部分电离"></a>部分电离</h3><p>考虑部分电离的气体，满足Saha方程</p>
<script type="math/tex; mode=display">\frac{x^2}{1-x^2} = \frac{g}{h^3}\frac{(2\pi m_ekT)^{3/2}(kT)^{5/2}}{P} e^{-\chi/kT} \propto P^{-1}</script><p>物态方程为理想气体物态方程。</p>
<p>若气体受动力学扰动被压缩，分为两个过程：<br>第一步$(V,P,N)\rightarrow(V’,P’,N)$。令粒子数不变，体积减小导致压强增大，从而$x$减小（复合增强）。<br>第二步$(V’,P’,N)\rightarrow(V’,P’’,N’)$，令体积不变，上一步复合增强导致$N’ &lt; N$，从而$P’’ &lt; P’$。认为压缩过程满足绝热物态方程，$P=k_a\rho^{\gamma_a}$，复合过程不改变密度，则有$\gamma_a’’ &lt; \gamma_a’$。有可能$\gamma_a’’ &lt; 4/3$，导致动力学不稳定。</p>
<p>3.6节中给出过：</p>
<script type="math/tex; mode=display">\gamma_{\mathrm{a}}(x)=\frac{5+\left(\frac{5}{2}+\frac{\chi}{kT}\right)^{2} x(1-x)}{3+\left[\frac{3}{2}+\left(\frac{3}{2}+\frac{\chi}{k T}\right)^{2}\right] x(1-x)}</script><ul>
<li>对完全中性和完全电离气体，都有$\gamma_a=5/3$</li>
<li>对部分电离气体：  <ul>
<li>取$kT\approx \chi=13.6\mathrm{eV}$，当$18\% &lt; x &lt; 82\%$时$\gamma_a &lt; 4/3$</li>
<li>取$kT\approx \chi/10$（低温），当$5\% &lt; x &lt; 95\%$时$\gamma_a &lt; 4/3$</li>
</ul>
</li>
</ul>
<p>讨论：</p>
<ul>
<li>在恒星内核，温度足够高，$\mathrm{H},\mathrm{He}$几乎完全电离，$x=1$。从而核区是动力学稳定的。</li>
<li>在外围壳层，温度较低，$x&lt;1$，一般$\gamma_a&lt;4/3$，但$P/\rho$也较小，从而整个恒星的动力学积分$I_\mathrm{dyn}&gt;0$，整个系统仍是动力学稳定的。</li>
<li>极高温的内核发生光致解离效应，对恒星稳定性的影响不可忽略</li>
</ul>
<h2 id="对流不稳定性"><a href="#对流不稳定性" class="headerlink" title="对流不稳定性"></a>对流不稳定性</h2><p>对流的物理图像：恒星内部壳层温度较高，密度小；外部温度较低，密度大；导致气体在恒星自引力场中循环流动，形成对流。</p>
<p>对流的效果：</p>
<ul>
<li>高效率传热，辐射传热的重要补充</li>
<li>将内外物质搅拌均匀，使恒星中各元素化学丰度近似形成均匀分布</li>
</ul>
<p>流体静力学平衡有</p>
<script type="math/tex; mode=display">\kappa F < 4\pi cGm</script><p>而</p>
<script type="math/tex; mode=display">\frac{\mathrm{d} T}{\mathrm{d} m}=-\frac{3}{4 a c} \frac{\kappa}{T^{3}} \frac{F}{\left(4 \pi r^{2}\right)^{2}}</script><p>若$\kappa F$足够大，即$\left|\frac{\mathrm{d} T}{\mathrm{d} m}\right|$足够大，可以形成强对流，此时可能有$\kappa F&gt;4\pi cGm$，流体静力学平衡被打破。</p>
<h3 id="对流产生的条件"><a href="#对流产生的条件" class="headerlink" title="对流产生的条件"></a>对流产生的条件</h3><p><img src="06-1-convection.png" alt=""></p>
<p>如图，假如温度、压强为$(\rho_1,P_1)$的气体团块上浮一小段距离到密度、压强为$(\rho_2,P_2)$的壳层处，由于$P_1 &gt; P_2$，这一团块将会膨胀直到和环境压强平衡，即$P_{*}=P_2$。考虑恒星中的动力学时标远小于热力学时标，这一膨胀过程可以近似看为绝热的。绝热膨胀导致密度减小，如果密度比当前壳层的密度$\rho_2$大则下沉，此时是<strong>对流稳定</strong>的；否则气体团块将继续上浮，直到上升到$r_\mathrm{out}$处，绝热膨胀后的密度大于环境密度。这种情况下是<strong>对流不稳定</strong>的，$r_\mathrm{out}$即为对流区的外边界。一般$r_\mathrm{out} \ll R$。</p>
<p><img src="06-2-density-pressure.png" alt=""></p>
<p>如图，若环境为S构型，绝热膨胀的$\rho_{*}&lt;\rho_2$，从而质元上浮，对流区将不断发展，系统对流不稳定；若环境为S’构型，绝热膨胀的$ \rho_{*}&lt;\rho_2’$，质元下沉，系统对流稳定。</p>
<p>对流稳定的条件可以写为：</p>
<script type="math/tex; mode=display">\left(\frac{\mathrm{d}P}{\mathrm{d}\rho}\right)_\mathrm{star} < \left(\frac{\mathrm{d}P}{\mathrm{d}\rho}\right)_\mathrm{adiabatic}</script><p>由多方过程的物态方程</p>
<script type="math/tex; mode=display">P = k\rho^{\gamma}</script><p>有</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P}{\mathrm{d}\rho} = \gamma \frac{P}{\rho}</script><p>对绝热过程$\gamma=\gamma_a$。达到平衡后$P$相等，$\rho_a&gt;\rho_\mathrm{star}$，从而对流稳定的条件也可以写为</p>
<script type="math/tex; mode=display">\gamma < \gamma_a</script><p>对恒星中的理想气体，</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P}{P} = \frac{\mathrm{d}\rho}{\rho} + \frac{\mathrm{d}T}{T}</script><p>从而</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \gamma &= \frac{\rho}{\mathrm{d}\rho}\left(\frac{\mathrm{d}\rho}{\rho} + \frac{\mathrm{d}T}{T}\right)
    \\&= 1+\frac{\rho}{T}\frac{\mathrm{d}T}{\mathrm{d}\rho}
    \\&= 1+ \frac{\rho}{T}\frac{\mathrm{d}P}{\mathrm{d}\rho}\frac{\mathrm{d}T}{\mathrm{d}P}
    \\&= 1+ \gamma\frac{P}{T}\frac{\mathrm{d}T}{\mathrm{d}P}
\end{aligned}</script><p>从而对流稳定性条件成为</p>
<script type="math/tex; mode=display">\frac{P}{T}\left(\frac{d T}{d P}\right)_{\mathrm{star}}<\frac{\gamma_{\mathrm{a}}-1}{\gamma_{\mathrm{a}}}</script><p>或者</p>
<script type="math/tex; mode=display">\left|\frac{d T}{d r}\right|_{\mathrm{star}}<\left(\frac{\gamma_{\mathrm{a}}-1}{\gamma_{\mathrm{a}}}\right) \frac{T}{P}\left|\frac{d P}{d r}\right|_{\mathrm{star}}</script><h2 id="对流不稳定性的例子"><a href="#对流不稳定性的例子" class="headerlink" title="对流不稳定性的例子"></a>对流不稳定性的例子</h2><p>将热平衡方程和流体静力学平衡方程代入对流稳定性判据，得到</p>
<script type="math/tex; mode=display">\kappa F<4 \pi c G m\left[4\left(\frac{\gamma_{\mathrm{a}}-1}{\gamma_{\mathrm{a}}}\right)(1-\beta)\right]</script><p>$右边\le 4\pi cGm$，等号在$\beta=0$时取得。<br>说明流体静力学平衡被打破之前，对流就可能发生。处于流体静力学平衡的恒星内部一部分壳层也可能存在对流区，与（太阳）观测一致。</p>
<p>具体情况：</p>
<ul>
<li>部分电离区域（如恒星外围温度较低的区域），$\kappa$较大而$\gamma_a$较小，容易出现对流</li>
<li>核区附近$\mathrm{H,He}$完全电离，$\kappa$几乎为常量，若磁流体不稳定性使核反应增强，$F$增大，可能出现对流</li>
<li>在核区$q\propto T^n$，若$n$增大（如氢烧变成氦烧），也可能导致对流不稳定<br>Cowling的计算结果，<ul>
<li>若$\kappa\sim\mathrm{const}$，$n&gt;3-4$时出现对流</li>
<li>若$\kappa\sim \rho T^{-7/2}$，$n&gt;8$时出现对流</li>
</ul>
</li>
<li>$\beta\rightarrow1$（气体压主导），$M$较小时容易出现对流。即小质量恒星内部对流区发达。</li>
</ul>
<h3 id="小对流云团带走的热量"><a href="#小对流云团带走的热量" class="headerlink" title="小对流云团带走的热量"></a>小对流云团带走的热量</h3><p>对流云团位于$r$处的壳层中，质量$m_c$，半径$r_c$，温度$T+\delta T$，密度$\rho+\delta\rho$。云团与环境达到热力学平衡，$\delta P=0$。由理想气体状态方程，</p>
<script type="math/tex; mode=display">\frac{\delta T}{T} + \frac{\delta \rho}{\rho} = \frac{\delta P}{P} = 0</script><p>云团质心穿过$r_c$的时间称为穿越时标：$\tau=\frac{r_c}{v_c}$<br>若云团在球壳中均匀分布，此时传热以对流为主，在$\tau$时间内吸收的总热量即为</p>
<script type="math/tex; mode=display">F(r)\frac{r_c}{v_c}</script><p>恒星自引力在$r$处产生的重力加速度</p>
<script type="math/tex; mode=display">g'(r) = \frac{Gm(r)}{r^2}</script><p>减去当地的浮力，云团的加速度为：</p>
<script type="math/tex; mode=display">\frac{Gm(r)}{r^2} \left|\frac{\delta \rho}{\rho}\right| = \frac{Gm(r)}{r^2} \left|\frac{\delta T}{T}\right|</script><p>从而云团上升$r_c$距离时的速度</p>
<script type="math/tex; mode=display">v_c = \sqrt{\frac{Gm(r)}{r^2} \left|\frac{\delta T}{T}\right|r_c}</script><p>云团的比内能为$u$，$N$个云团吸热导致温度变化</p>
<script type="math/tex; mode=display">\frac{\delta T}{T} \sim \frac{F\frac{r_c}{v_c}}{u\cdot Nm_c}</script><p>代入上面$v_c$的表达式，有：</p>
<script type="math/tex; mode=display">\left(\frac{\delta T}{T}\right)^{3/2} = \frac{F(r)r_c}{uNm_c\sqrt{\frac{Gmr_c}{r^2}}}</script><p>量级估计，$F\sim L, m(r)\sim M, Num_c\sim U, r\sim R, r_c\sim R$，有</p>
<script type="math/tex; mode=display">\left(\frac{\delta T}{T}\right)^{3/2} \sim \frac{L}{U}\frac{1}{\sqrt{\frac{GM}{R^3}}} \sim \tau_\mathrm{th}^{-1}\tau_\mathrm{dyn}</script><p>$\tau_\mathrm{th}$为热力学时标，$\tau_\mathrm{dyn}$为动力学时标。对太阳，$\tau_\mathrm{th}\sim 10^{15}\mathrm{s}, \tau_\mathrm{dyn}\sim 10^{3}\mathrm{s}$。$\frac{\delta T}{T}\sim 10^{-8}$</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>恒星物理笔记</category>
      </categories>
      <tags>
        <tag>天文</tag>
      </tags>
  </entry>
  <entry>
    <title>恒星的演化</title>
    <url>/2020/09/08/stellar-physics-07-stellar-evolution/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>恒星的几个时标：</p>
<script type="math/tex; mode=display">\tau_\mathrm{dyn} \ll \tau_\mathrm{th} \ll \tau_\mathrm{nuc}</script><p>恒星的演化时标为核反应时标，在长时标下可能发生多次热演化的随机涨落，但会被统计抹平。中心核区，或中心点源$(T_c,\rho_c)$的演化将主导恒星的状态。这一章研究中心点$(\log T_c,\log \rho_c)$的演化轨迹。</p>
<h2 id="log-T-log-rho-平面的特征"><a href="#log-T-log-rho-平面的特征" class="headerlink" title="$(\log T,\log \rho)$平面的特征"></a>$(\log T,\log \rho)$平面的特征</h2><h3 id="EoS区域"><a href="#EoS区域" class="headerlink" title="EoS区域"></a>EoS区域</h3><p><img src="07-1-rho-T-diagram-EoS.png" alt=""></p>
<p>不同EoS在$(\log T,\log \rho)$平面上划分出下面四个区域</p>
<ul>
<li>(I)理想气体：$P=\frac{\mathcal{R}}{\mu}\rho T=k_0\rho T$  </li>
<li>(II)简并电子气：$P_\mathrm{e,deg}=k_1\rho^{5/3}$ </li>
<li>(III)相对论性简并电子气：$P_\mathrm{e,r-deg}=k_2\rho^{4/3}$ </li>
<li>(IV)辐射压主导，$P\approx P_\mathrm{rad}=\frac{1}{3}aT^4$。</li>
</ul>
<p>区域间的分界线：</p>
<ul>
<li>在(I)和(II)相变的临界点，$P_\mathrm{ideal}\approx P_\mathrm{e,deg}$，从而有<script type="math/tex; mode=display">\log\rho=1.5\log T+\mathrm{const}</script></li>
<li>(II)和(III)相变的临界点$P_\mathrm{e,deg}\approx P_\mathrm{e,r-deg}$，<script type="math/tex; mode=display">\log\rho = \mathrm{const}</script></li>
<li>若自引力收缩快，(I)区可直接进入(III)区，$P_\mathrm{ideal}\approx P_\mathrm{e,r-deg}$，<script type="math/tex; mode=display">\log\rho = 3\log T + \mathrm{const}</script></li>
<li>(I)到(IV)的相变，不妨假设$P_\mathrm{rad}\approx 10P_\mathrm{gas}$。有<script type="math/tex; mode=display">\log\rho = 3\log T + \mathrm{const}</script></li>
</ul>
<h3 id="核燃烧区域"><a href="#核燃烧区域" class="headerlink" title="核燃烧区域"></a>核燃烧区域</h3><p>一般只考虑$q&gt;q_\mathrm{min}=0.1\mathrm{J\cdot kg^{-1}\cdot s^{-1}}$的核过程（更小的核过程的光度过小，不会被观测到）</p>
<p>在可以被观测到的临界点上：</p>
<script type="math/tex; mode=display">q = q_\mathrm{min} = q_0 \rho^m T^n</script><p>即</p>
<script type="math/tex; mode=display">\log\rho = -\frac{n}{m}\log T + \frac{1}{m}\log\left(\frac{q_\mathrm{min}}{q_0}\right) \tag{*}</script><p>给出$(\log T,\log \rho)$平面上一条负斜率的直线。</p>
<p>一般$m=1,n\gg 1$。在较大的温度范围上，$n$不是常数，而是$T$的函数，此时(*)式描述的是一条曲线。当恒星核区参数在边界曲线上方时，该反应才能被触发。<br>实际上边界线对应的$\rho$有一定弥散，从而有一定宽度。实际的各核反应的边界带如下图：</p>
<p><img src="07-2-rho-T-diagram-nuc-process.png" alt=""></p>
<h3 id="不稳定性区域"><a href="#不稳定性区域" class="headerlink" title="不稳定性区域"></a>不稳定性区域</h3><p>$\gamma_a&gt;4/3$导致动力学不稳定，由各区域的EoS:</p>
<ul>
<li>简并电子气区，$\gamma_a\rightarrow 4/3$</li>
<li>辐射压主导区，$\gamma_a\rightarrow 4/3$</li>
<li>铁核光致解离，$\gamma_a&lt; 4/3$</li>
<li>正负电子对产生，$\gamma_a&lt; 4/3$</li>
</ul>
<p>简并气体和相对论性气体是热不稳定的。</p>
<p>如下图：</p>
<p><img src="07-3-rho-T-diagram-instability.png" alt=""></p>
<h2 id="中心点的演化"><a href="#中心点的演化" class="headerlink" title="中心点的演化"></a>中心点的演化</h2><p>多方球模型给出</p>
<script type="math/tex; mode=display">P_c = (4\pi)^{1/3}B_n GM^{2/3} \rho_c^{4/3}</script><p>设中心点初始处于理想气体区，$P_c=\frac{\mathcal{R}}{\mu}\rho_c T_c=k_0\rho_c T_c$。联立两式，有</p>
<script type="math/tex; mode=display">\rho_c = \frac{k_0^3}{4\pi B_n^3G^3}\frac{T_c^3}{M^2}</script><ul>
<li>$B_n$对不同的$n$变化很小，可以看做常量。对$M=\mathrm{const}$给定的情况，此时有<script type="math/tex; mode=display">\log\rho_c = 3\log T_c + \mathrm{const}</script>中心点$(\log\rho_c.\log T_c)$沿斜率为$3$的轨迹演化。演化过程中温度逐渐升高，向右上移动。</li>
<li>对不同的$M$，$M$增大导致$\rho_c$减小，即大质量恒星的演化轨迹是将小质量恒星的轨迹向下平移的得到。</li>
<li>如图，中心点处于I区要求质量范围约为$0.1M_\odot\sim 100M_\odot$</li>
</ul>
<p><img src="07-4-central-evolution.png" alt=""></p>
<p>若随着恒星的演化，中心点进入II区（非相对论性简并电子气），$P_c=k_1\rho_c^{5/3}$，此时</p>
<script type="math/tex; mode=display">\rho_c = 4\pi \left(\frac{B_{1.5}G}{k_1}\right)^3M^2</script><ul>
<li>对固定的$M$，$\log\rho_c=\mathrm{const}$，中心点的演化轨迹是一条水平的直线。由于核燃料基本耗尽，温度随着辐射冷却不断降低，从而演化方向是水平向左移动。</li>
<li>对更大的$M$，$\rho_c$更大，演化轨迹线是向上平移的。</li>
<li>I区演化到II区的过渡过程是平滑的，这一阶段发生的是量子相变。<br>对$M\sim 0.1M_\odot$的矮星，将结束后将稳定在II区。<br>对$M\gtrsim M_\odot$，拐折后的轨迹最终进入III区。<br>对$M\rightarrow M_\mathrm{ch}$，恒星将沿I区和III区的边界线（在I区和III区这条线都是等质量线）不断收缩（$\rho_c\rightarrow\infty$），直到进入中子简并态。</li>
</ul>
<h2 id="恒星演化：中心值"><a href="#恒星演化：中心值" class="headerlink" title="恒星演化：中心值"></a>恒星演化：中心值</h2><p>初态$(T_c,\rho_c)$较低，位于I区。</p>
<p><img src="07-5-MS-central-evolution.png" alt=""></p>
<p>如图，小质量恒星的核反应为p-p链主导，大质量恒星的核反应为CNO循环主导。</p>
<p>恒星质量的下限$M_\mathrm{min}\sim 0.08M_\odot$，更小的质量无法点燃核反应，质量在下限附近的恒星称为褐矮星；上限$M_\mathrm{max}\sim 100M_\odot$，此时光度达到爱丁顿极限，恒星处于辐射压主导的IV区，系统不稳定，寿命短，称为蓝巨星。</p>
<p>$M_\odot &lt; M &lt;50M_\odot$的恒星可以穿越多个核燃烧曲线，发生多个核反应，形成铁核+外围多壳层燃烧的洋葱结构。</p>
<p>小结：</p>
<ul>
<li>对$M\le M_\odot$，中心点初始在I区，向上演化并拐折进入II区或III区，形成白矮星</li>
<li>对$M\ge M_\mathrm{ch}$，沿斜率为$3$的直线不断收缩，最终形成中子星</li>
<li>对$M&gt;(8-10)M_\odot$，可能最终形成黑洞</li>
</ul>
<h2 id="主序理论"><a href="#主序理论" class="headerlink" title="主序理论"></a>主序理论</h2><p>赫罗图上主序带：</p>
<script type="math/tex; mode=display">\log L = \alpha\log T_\mathrm{eff} + \mathrm{const}</script><p>（有一定弥散）<br>系数$\alpha$不是常数，$L$变大时$|\alpha|$变大。</p>
<p>另外，主序星有质光关系：</p>
<script type="math/tex; mode=display">\log L = \nu\log M + \mathrm{const}</script><p>本节用已有的理论解释这两个经验关系。</p>
<p>假设：</p>
<ul>
<li>中心核区为氢燃烧</li>
<li>系统处于热平衡和流体静力学平衡</li>
<li>化学丰度均匀、恒定</li>
<li>辐射平衡</li>
<li>气体压主导</li>
<li>不透明度$\kappa\sim\mathrm{const}$</li>
</ul>
<p>对恒星结构方程组进行量纲分析：</p>
<p>定义分数质量$x=m/M$，$0\le x \le 1$。选择特征尺度$R_*$，可以有：</p>
<script type="math/tex; mode=display">r = f_1(x)R_*</script><p>其中$f_1(x)$也是无量纲的。对压强、密度、温度、辐射通量也可以如下定义。</p>
<script type="math/tex; mode=display">P(x) = f_{2}(x) P_*</script><script type="math/tex; mode=display">\rho(x) = f_{3}(x) \rho_*</script><script type="math/tex; mode=display">T(x) = f_{4}(x) T_*</script><script type="math/tex; mode=display">F(x) = f_{5}(x) F_*</script><p>从而得到无量纲化的方程：</p>
<p>流体静力学平衡方程成为</p>
<script type="math/tex; mode=display">P_* = \frac{GM^2}{R_*^4} \tag{1}</script><script type="math/tex; mode=display">\frac{\mathrm{d}f_2}{\mathrm{d}x} = -\frac{x}{4\pi f_1^4}</script><p>类似地，连续性方程成为</p>
<script type="math/tex; mode=display">\rho_* = \frac{M}{R_*^3} \tag{2}</script><script type="math/tex; mode=display">\frac{\mathrm{d}f_1}{\mathrm{d}x} = \frac{1}{4\pi f_1^2 f_3}</script><p>理想气体的EoS $P=\frac{\mathcal{R}}{\mu}\rho T$成为</p>
<script type="math/tex; mode=display">P_* = \frac{\mathcal{R}}{\mu}\rho_* T_* \tag{3}</script><script type="math/tex; mode=display">f_2 = f_3f_4</script><p>辐射转移方程成为</p>
<script type="math/tex; mode=display">F_* = \frac{ac}{\kappa}\frac{T_*^4R_*^4}{M} \tag{4}</script><script type="math/tex; mode=display">\frac{\mathrm{d}f_4}{\mathrm{d}x} = -\frac{3f_5}{4f_4^3(4\pi f_1^2)^2}</script><p>热平衡方程成为</p>
<script type="math/tex; mode=display">F_* = q_0\rho_*T_*^nM \tag{5}</script><script type="math/tex; mode=display">\frac{\mathrm{d}f_5}{\mathrm{d}x} = f_3f_4^n</script><p>无量纲化的方程对所有恒星都有相同的形式，这种性质称为<strong>同系性/同调性</strong>。</p>
<p>联立量纲方程(1)(2)(3)(4)，</p>
<script type="math/tex; mode=display">F_* = \frac{ac}{\kappa}\left(\frac{\mu G}{\mathcal{R}}\right)^4 M^3 \tag{6}</script><p>即有</p>
<script type="math/tex; mode=display">F_* \sim L \sim M^3</script><p>得到<strong>质光关系</strong>。</p>
<p>再联系(2)(4)(5)，得到<strong>质量-半径关系</strong></p>
<script type="math/tex; mode=display">R_* \propto M^{\frac{n-1}{n+3}} \tag{*}</script><p>以及</p>
<script type="math/tex; mode=display">\rho_* \propto M^{\frac{6-2n}{3+n}}=M^\alpha</script><p>一般核反应都有$n&gt;3$，从而$\rho_*$和$M$是负相关的。（可以在之前的$(\log\rho,\log T)$图中看出）</p>
<p>由光度$L\sim 4\pi R_*^2 \sigma T_\mathrm{eff}^4$，联立质量-半径关系有</p>
<script type="math/tex; mode=display">L^{\frac{n+11}{3n+9}} \propto T_\mathrm{eff}^4</script><p>对$M\le M_\odot$的恒星，p-p链主导，$n=4$，</p>
<script type="math/tex; mode=display">\log L = 5.6\log T_\mathrm{eff} + \mathrm{const}</script><p>对$M&gt;M_\odot$的恒星，CNO循环主导，$n=16$，</p>
<script type="math/tex; mode=display">\log L = 8.4\log T_\mathrm{eff} + \mathrm{const}</script><p>得到和上面主序带相同的结果，质量越大（光度越大）$\log T_\mathrm{eff}$的系数越大。</p>
<p>演化时标</p>
<script type="math/tex; mode=display">\tau_\mathrm{MS} \sim \frac{Mc^2}{L} \sim M^{-2}</script><p>即更大质量恒星在主序上停留时间更短，演化更快。</p>
<p>中心温度</p>
<script type="math/tex; mode=display">T_c \sim T_* \sim M^{\frac{4}{n+3}}</script><p>对$M\le M_\odot$的恒星，p-p链主导，$n=4$，$T_c\sim M^{4/7}$。要求$T_c\ge T_\mathrm{min}$，估算得到最小值量$M_\mathrm{min}\sim 0.1M_\odot,L_\mathrm{min}\sim 10^{-3}L_\odot$。</p>
<p>如果考虑$\kappa$不是常数，Kramers不透明度$\kappa=\kappa_0 \rho T^{-7/2}$。此时$L\sim M^{\frac{5+31/2n}{1+5/2n}}$。对p-p链主导的小质量恒星，$L\sim M^{5.46}$，与观测$L\sim M^{4.5}$基本一致。</p>
<p>对大量恒星样本的观测，由于形成时间不同，$\mu$也不同，因此在赫罗图上有一定的弥散。</p>
<h2 id="演化后期恒星的结构"><a href="#演化后期恒星的结构" class="headerlink" title="演化后期恒星的结构"></a>演化后期恒星的结构</h2><p>用$(\log T,\log\rho)$平面上一系列点描述恒星内部不同壳层的温度和密度，中心点应是曲线右上端点而表面是左下端点（温度最低，密度$\rightarrow0$）</p>
<p><img src="07-3-rho-T-diagram-structure.png" alt=""></p>
<p>对如图的恒星，</p>
<ul>
<li>在主序阶段（曲线A），只有中心点O在核反应曲线上方，即只有核区能发生核燃烧。</li>
<li>演化到曲线B，核区氢燃料耗尽，发生自引力收缩，使中心点向右上方移动，但还未触发氦燃烧；而核区外围的中间壳层可以触发氢燃烧，此时恒星成为红巨星(Red Giant)。<br>若收缩过程为准静态过程，维里定理成立，且系统能量守恒，即引力势能和内能都守恒。为保持引力势能守恒，核区收缩时外壳应膨胀，为保持内能守恒，核区温度升高时外壳温度降低，即外壳绝热膨胀。<br>考虑距中心$r_0$处两个相等的质量元，$\Delta m_1=\Delta m_2=\Delta m$，$\Delta m_1$向内收缩$r_0\rightarrow r_1$，而$\Delta m_2$向外膨胀$r_0\rightarrow r_2$使引力势能不变：<script type="math/tex; mode=display">-\frac{Gm(r_0)\cdot 2\Delta m}{r_0} = -\frac{Gm(r_0)\Delta m}{r_1}-\frac{Gm(r_0)\Delta m}{r_2}</script>得到$r_2=(2-r_0/r_1)^{-1}r_0$。核区略微收缩可以导致外壳膨胀很多。<br>红巨星外壳的绝热膨胀导致$T_\mathrm{eff}$和$L$都降低，恒星将离开主序带。</li>
<li>若核区收缩使中心温度达到$3\alpha$反应的条件，核区的氦燃烧将被点燃（曲线C）。此时恒星核区的氦燃烧和外围的氢燃烧同时进行</li>
<li>大质量恒星经过多次引力收缩和加热，将形成多壳层燃烧的洋葱结构。</li>
<li>最后，核区重元素的燃烧也停止，将触发超新星爆炸，外围壳层被吹散到星际空间形成ISM，中心形成中子星或黑洞。</li>
</ul>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>恒星物理笔记</category>
      </categories>
      <tags>
        <tag>天文</tag>
      </tags>
  </entry>
  <entry>
    <title>矢量和分析和曲线坐标系</title>
    <url>/2019/03/14/vector-analysis/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h1 id="1-矢量分析"><a href="#1-矢量分析" class="headerlink" title="1.矢量分析"></a>1.矢量分析</h1><h2 id="1-1-矢量的定义"><a href="#1-1-矢量的定义" class="headerlink" title="1.1 矢量的定义"></a>1.1 矢量的定义</h2><p>这里不深究矢量的定义，我们只考虑三维欧式空间$\mathbb{R}^3$中的矢量，它们有三个分量，并且分量在任意的坐标变换下与$\mathbf r=(x,y,z)$具有相同的变换形式。形象地说，“<strong>矢量应该像矢量那样变换</strong>”。</p>
<h2 id="1-2-爱因斯坦求和约定"><a href="#1-2-爱因斯坦求和约定" class="headerlink" title="1.2 爱因斯坦求和约定"></a>1.2 爱因斯坦求和约定</h2><p>我们经常会遇到形式相同的几项求和的式子，比如：</p>
<script type="math/tex; mode=display">
\mathbf A \cdot \mathbf B = A_1B_1+A_2B_2+A_3B_3 = \sum_{i=1}^3 A_iB_i</script><p>我们可以省略求和符号$\sum$，仅使用$A_iB_i$来表示上式，在确定的上下文中这一般不会导致误会。</p>
<p>具体地说，若在表达式中出现了重复指标（称作<strong>哑指标</strong>），那么自动对其求和。（严格地讲要求哑指标一上一下，但是在这里由于$\mathbb R^3$上的基和对偶基是相等的，故不对矢量的协变和逆变表示，即上下指标做区分。在下面曲线坐标系一节将介绍矢量的协变和逆变表示。）</p>
<p>使用爱因斯坦求和约定的表达式还有以下规则：</p>
<ol>
<li>每一项中一个哑指标最多出现两次。比如不允许出现类似$A_iB_iC_i$的项</li>
<li>一个表达式中所有项中包含的不被求和的指标（即<strong>自由指标</strong>），比如不允许出现类似$A_iB_iC_j+C_k$的表达式。<br>当然这些规定并不是不允许进行这样的运算，仅仅是说明在矢量分析中不会出现这样的表达式而已。其作用也在于，若推导出了不符合这两条规则的表达式，那么可能需要对计算过程重新检查。</li>
</ol>
<p>另外，使用爱因斯坦求和约定的表达式的一个常用的性质是，<strong>可以将哑指标替换为其他的指标而不改变表达式的值</strong>。例如：$A_iB_i+A_jB_j=A_iB_i+A_iB_i=2A_iB_i$。这一性质在表达式的化简中经常会用到。</p>
<p>利用爱因斯坦求和约定，我们可以给出$\mathbb R^3$中的矢量的点乘和叉乘的分量形式：</p>
<ul>
<li>矢量$\mathbf A$用分量表示为$\mathbf A=A_i\mathbf e_i$</li>
<li>从而矢量的点乘为：<script type="math/tex; mode=display">
\mathbf A \cdot \mathbf B = A_i\mathbf e_i \cdot B_j \mathbf e_j = A_iB_j \mathbf e_i \cdot \mathbf e_j = A_iB_j \delta_{ij} = A_iB_i</script>其中克罗内克$\delta$函数定义为：<script type="math/tex; mode=display">
\delta_{ij} = \left\{
\begin{matrix}
1 & (i=j)
\\0 & (i \neq j)
\end{matrix}
\right.</script></li>
<li>根据定义，矢量叉乘：<script type="math/tex; mode=display">
\mathbf A \times \mathbf B = (A_2B_3-A_3B_2)\mathbf e_1 + (A_3B_1-A_1B_3)\mathbf e_2 + (A_1B_2-A_2B_1)\mathbf e_3</script>可以使用爱因斯坦求和标记记为：<script type="math/tex; mode=display">
\mathbf A \times \mathbf B = \epsilon_{ijk}A_jB_k\mathbf e_i</script>其中Levi-Civita符号$\epsilon_{ijk}$定义为：<script type="math/tex; mode=display">
\epsilon_{ijk}=\left\{
\begin{matrix}
1 & (i,j,k)是(1,2,3)的偶置换
\\-1 & (i,j,k)是(1,2,3)的奇置换
\\0 & 其他（即(i,j,k)中存在两者相等）
\end{matrix}
\right.</script>另外,Levi-Civita符号有一常用性质：<script type="math/tex; mode=display">
\epsilon_{ijk}\epsilon_{imn} = \delta_{jm}\delta_{kn} - \delta_{jn}\delta_{km}</script></li>
</ul>
<h2 id="1-3-矢量分析"><a href="#1-3-矢量分析" class="headerlink" title="1.3 矢量分析"></a>1.3 矢量分析</h2><p>两个常用的公式是：</p>
<script type="math/tex; mode=display">\mathbf A \times(\mathbf B \times \mathbf C)=(\mathbf A\cdot \mathbf C)\mathbf B-(\mathbf A\cdot\mathbf B)\mathbf C \tag{1.3.1}</script><script type="math/tex; mode=display">\mathbf A\cdot(\mathbf B\times\mathbf C)=\mathbf B\cdot(\mathbf C\times\mathbf A)=\mathbf C\cdot(\mathbf A\times\mathbf B) \tag{1.3.2}</script><p>在矢量分析的表达式中经常出现的是纳布拉算符$\nabla$（定义为$\nabla=\frac{\partial}{\partial x^i}\mathbf e_i$），作为微分算符，$\nabla$和分量为实数的矢量的运算规则不尽相同。下面对于出现$\nabla$的表达式，以$\nabla\times(\mathbf A\times \mathbf B)$为例介绍两种分析的方法：</p>
<ol>
<li>式中出现了两个矢量$\mathbf A$和$\mathbf B$，$\nabla$对二者都有作用，那么可以写成$\nabla_{\mathbf A}\times(\mathbf A\times\mathbf B)+\nabla_{\mathbf B}\times(\mathbf A\times\mathbf B)$，其中$\nabla_{\mathbf A}$只对$\mathbf A$作用，$\nabla_{\mathbf B}$只对$\mathbf B$作用。从而由(1.3.1)式，对第一项有：<script type="math/tex; mode=display">
\nabla_{\mathbf A}\times(\mathbf A\times\mathbf B)=(\mathbf B\cdot\nabla_{\mathbf A})\mathbf A-(\nabla_{\mathbf A}\cdot\mathbf A)\mathbf B</script>这里$\nabla_{\mathbf A}$只对$\mathbf A$有作用，因此其与$\mathbf B$的点乘是可以交换的，进行恒等变换使得最后式中$\nabla_{\mathbf A}$只作用在$\mathbf A$上，从而保证在最后化回$\nabla$时不会引起歧义。<br>对$\nabla_{\mathbf B}$的式子同理，最后结果为：<script type="math/tex; mode=display">
\begin{aligned}
\nabla\times(\mathbf A\times \mathbf B)&=(\mathbf B\cdot\nabla_{\mathbf A})\mathbf A-(\nabla_{\mathbf A}\cdot\mathbf A)\mathbf B + (\nabla_{\mathbf B}\cdot\mathbf B)\mathbf A-(\mathbf A\cdot\nabla_{\mathbf B})\mathbf B
\\&=(\mathbf B\cdot\nabla)\mathbf A-(\nabla\cdot\mathbf A)\mathbf B + (\nabla\cdot\mathbf B)\mathbf A-(\mathbf A\cdot\nabla)\mathbf B
\end{aligned}</script></li>
<li>使用爱因斯坦求和约定展开：<script type="math/tex; mode=display">
\begin{aligned}
\nabla\times(\mathbf A\times \mathbf B) &= \epsilon_{ijk}\frac{\partial}{\partial x^j}(\mathbf A\times\mathbf B)_k\mathbf e_i
\\ &=\epsilon_{ijk}\frac{\partial}{\partial x^j}(\epsilon_{klm}A_lB_m)\mathbf e_i  = \epsilon_{kij}\frac{\partial}{\partial x^j}(\epsilon_{klm}A_lB_m)\mathbf e_i 
\\&=(\delta_{il}\delta_{jm}-\delta_{im}\delta_{jl})\frac{\partial}{\partial x^j}(A_lB_m)\mathbf e_i
\\ &=\frac{\partial}{\partial x^j}(A_iB_j)\mathbf e_i-\frac{\partial}{\partial x^j}(A_jB_i)\mathbf e_i
\\ &=B_j\frac{\partial A_i}{\partial x^j}\mathbf e_i + \frac{\partial B_j}{\partial x^j}A_i\mathbf e_i - \frac{\partial A_j}{\partial x^j}B_i\mathbf e_i - A_j\frac{\partial B_i}{\partial x^j}\mathbf e_i
\\ &=(\mathbf B\cdot\nabla)\mathbf A + (\nabla\cdot\mathbf B)\mathbf A - (\nabla\cdot\mathbf A)\mathbf B -(\mathbf A\cdot\nabla)\mathbf B
\end{aligned}</script></li>
</ol>
<p>两种方法都得到了正确结果。</p>
<h1 id="2-曲线坐标系"><a href="#2-曲线坐标系" class="headerlink" title="2.曲线坐标系"></a>2.曲线坐标系</h1><p>这一部分的说明旨在表述具有一般性地给出在曲线坐标系对矢量的描述，并介绍同一个矢量的协变和逆变表示。注意我们仍在讨论$\mathbb{R}^3$中的矢量，而非在微分流形上定义的，虽然二者具有相似性，但这里的矢量基和对偶基处于同一个线性空间。</p>
<p>本节内容来自<a href="https://link.springer.com/book/10.1007%2F978-3-642-75595-8">《Flux Coordinates and Magnetic Field Structure》</a>。</p>
<h2 id="2-1-矢量的对偶集合（reciprocal-sets）"><a href="#2-1-矢量的对偶集合（reciprocal-sets）" class="headerlink" title="2.1 矢量的对偶集合（reciprocal sets）"></a>2.1 矢量的对偶集合（reciprocal sets）</h2><p>称矢量集合${\mathbf A,\mathbf B,\mathbf C}$和${\mathbf a,\mathbf b,\mathbf c}$为对偶集合，若：</p>
<script type="math/tex; mode=display">\mathbf A\cdot\mathbf a=\mathbf B\cdot\mathbf b=\mathbf C\cdot\mathbf c=1</script><script type="math/tex; mode=display">\mathbf A\cdot\mathbf b=\mathbf A\cdot\mathbf c=\cdots=0</script><p>。即，一个集合的每个元素都和另一个集合的一个元素的内积为1，并和另外两个元素正交。这两个集合中的元素都是线性无关的（否则，存在$\lambda,\mu,\gamma\neq0$，使$\lambda\mathbf A+\mu\mathbf B+\gamma\mathbf C=0$，从而$(\lambda\mathbf A+\mu\mathbf B+\gamma\mathbf C)\cdot\mathbf a=\lambda=0$，矛盾）。从而，对任意的矢量$\mathbf W$，都可以表示为这两个集合中的元素的线性组合：</p>
<script type="math/tex; mode=display">\mathbf W=(\mathbf W\cdot\mathbf a)\mathbf A+(\mathbf W\cdot\mathbf b)\mathbf B+(\mathbf W\cdot\mathbf c)\mathbf C</script><p>或：</p>
<script type="math/tex; mode=display">\mathbf W=(\mathbf W\cdot\mathbf A)\mathbf a+(\mathbf W\cdot\mathbf B)\mathbf b+(\mathbf W\cdot\mathbf C)\mathbf c</script><p>另外，由于${\mathbf A,\mathbf B,\mathbf C}$线性无关，其对偶集合是唯一的，可以表示为：</p>
<script type="math/tex; mode=display">
\mathbf a=\frac{\mathbf B\times\mathbf C}{\mathbf A\cdot(\mathbf B\times\mathbf C)} ,\mathbf b=\frac{\mathbf C\times\mathbf A}{\mathbf B\cdot(\mathbf C\times\mathbf A)} ,\mathbf c=\frac{\mathbf A\times\mathbf B}{\mathbf C\cdot(\mathbf A\times\mathbf B)} \tag{2.1.1}</script><p>容易验证(2.1.1)给出的对偶集合满足上面介绍的对偶集合的定义。</p>
<h2 id="2-2-曲线坐标基"><a href="#2-2-曲线坐标基" class="headerlink" title="2.2 曲线坐标基"></a>2.2 曲线坐标基</h2><p>考虑坐标变换$\mathbf R(u^1,u^2,u^3)$：</p>
<script type="math/tex; mode=display">x=x(u^1,u^2,u^3)</script><script type="math/tex; mode=display">y=y(u^1,u^2,u^3)</script><script type="math/tex; mode=display">z=z(u^1,u^2,u^3)</script><p>要求这个变换是独立的，即可以用$u^1,u^2,u^3$表示$x,y,z$（严谨地说，Jacobi行列式非零）。</p>
<p>令$(u^1,u^2,u^3)$中一个坐标为定值，可以确定一个曲面，称为<strong>坐标曲面</strong>。令两个坐标为定值，则确定了一条曲线，称为<strong>坐标曲线</strong>。显然任意一条坐标曲线都可以看作两个坐标面的交线。</p>
<p>对空间中的任意一点$P$，有三条经过$P$的坐标曲线，坐标曲线的切线方向可以定义一组基：</p>
<script type="math/tex; mode=display">
\mathbf e_1=\frac{\partial \mathbf R}{\partial u^1},\mathbf e_2=\frac{\partial \mathbf R}{\partial u^2},\mathbf e_3=\frac{\partial \mathbf R}{\partial u^3} \tag{2.2.1}</script><p>根据Jacobi行列式非零，${\mathbf e_1,\mathbf e_2,\mathbf e_3}$线性无关。这里与直角坐标系的区别在于，坐标基本身是位置的函数，不一定是常量。 </p>
<p>另一方面，过同一点的三个坐标曲面的法线方向也可以定义另一组基。曲面某一点的法线方向应该与曲面上过这一点的曲线的切线方向垂直。注意到$\mathrm{d}u^i=\nabla u^i\cdot\mathrm{d}\mathbf{R}$，从而$\mathrm{d}\mathbf{R}=\frac{\partial \mathbf R}{\partial u^j}\mathbf du^j = \mathbf e_j\mathrm{d}u^j$，带回，$\mathrm{d}u^i=\nabla u^i\cdot\mathbf e_j\mathrm{d}u^j$，由于$u^1,u^2,u^3$互相独立，有：</p>
<script type="math/tex; mode=display">\nabla u^i\cdot\mathbf e_j=\delta_j^i</script><p>这满足我们对曲线法线的期望，定义另外一组基如下：</p>
<script type="math/tex; mode=display">\mathbf e^1=\nabla u^1,\mathbf e^2=\nabla u^2,\mathbf e^3=\nabla u^3 \tag{2.2.2}</script><p>另外由推导的过程我们知道，${\mathbf e_1,\mathbf e_2,\mathbf e_3}$和${\mathbf e^1,\mathbf e^2,\mathbf e^3}$是一对对偶矢量集合，分别称作<strong>基</strong>和<strong>对偶基</strong>。</p>
<blockquote>
<p>作为例子，让我们考虑球坐标：</p>
<script type="math/tex; mode=display">x=r\sin\theta\cos\phi</script><script type="math/tex; mode=display">y=r\sin\theta\sin\phi</script><script type="math/tex; mode=display">z=r\cos\theta</script><p>根据2.2.1，坐标基为：</p>
<script type="math/tex; mode=display">\mathbf{e_r}=\frac{\partial \mathbf R}{\partial r}=\sin\theta\cos\phi \mathbf{e_x}+\sin\theta\sin\phi \mathbf{e_y}+\cos\theta\mathbf{e_z}</script><script type="math/tex; mode=display">\mathbf{e_{\theta}}=\frac{\partial \mathbf R}{\partial \theta}=r\cos\theta\cos\phi \mathbf{e_x}+r\cos\theta\sin\phi \mathbf{e_y}-r\sin\theta\mathbf{e_z}</script><script type="math/tex; mode=display">\mathbf{e_{\phi}}=\frac{\partial \mathbf R}{\partial \theta}=-r\sin\theta\sin\phi \mathbf{e_x}+r\sin\theta\cos\phi \mathbf{e_y}</script><p>一般会对其进行归一化，这使它们成为坐标曲线的单位切向量，归一化的结果为：</p>
<script type="math/tex; mode=display">\mathbf{e_r}=\sin\theta\cos\phi \mathbf{e_x}+\sin\theta\sin\phi \mathbf{e_y}+\cos\theta\mathbf{e_z}</script><script type="math/tex; mode=display">\mathbf{e_{\theta}}=\cos\theta\cos\phi \mathbf{e_x}+\cos\theta\sin\phi \mathbf{e_y}-\sin\theta\mathbf{e_z}</script><script type="math/tex; mode=display">\mathbf{e_{\phi}}=-\sin\theta\sin\phi \mathbf{e_x}+\sin\theta\cos\phi \mathbf{e_y}</script></blockquote>
<h2 id="2-3-矢量的协变和逆变分量"><a href="#2-3-矢量的协变和逆变分量" class="headerlink" title="2.3 矢量的协变和逆变分量"></a>2.3 矢量的协变和逆变分量</h2><p>前面我们说过，可以用对偶矢量集合的线性叠加表示任意矢量，即：</p>
<script type="math/tex; mode=display">
\mathbf D = D^i\mathbf e_i = D_i\mathbf e^i</script><p>,其中：</p>
<script type="math/tex; mode=display">D^i=\mathbf D\cdot\mathbf e^i</script><script type="math/tex; mode=display">D_i=\mathbf D\cdot\mathbf e_i</script><p>用上、下指标表示的分量$D^i,D_i$分别称作<strong>逆变分量</strong>、<strong>协变分量</strong>。</p>
<p>下面的论述不完全准确地讨论了协变和逆变分量的含义。考虑不同于${\mathbf e_1,\mathbf e_2,\mathbf e_3}$的另一组线性无关的基${\mathbf e_1’,\mathbf e_2’,\mathbf e_3’}$，相应的对偶集合${\mathbf e^1{}’ ,\mathbf e^2{}’,\mathbf e^3{}’}$。两组基之间的坐标变换为$\mathbf e_i’=T_i^{\alpha}\mathbf e_{\alpha},\mathbf e^j{}’=T_{\beta}^j\mathbf e^{\beta}$。由对偶集合的定义，应有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \mathbf e_i'\cdot\mathbf e^j{}' &=  T_i^{\alpha}\mathbf e_{\alpha} \cdot T_{\beta}^j\mathbf e^{\beta} = T_i^{\alpha}T_{\beta}^j \delta_{\alpha}^{\beta} = T_i^{\alpha}T_{\alpha}^j
    \\&= \delta_i^j
\end{aligned}</script><p>说明基和对偶基的坐标变换矩阵$T_i^{\alpha}$和$T_{\beta}^j$的分量形式构成的矩阵互逆。矢量$\mathbf D$的协变分量$D_i=\mathbf D\cdot\mathbf e_i$，和基的变换方式相同，故称作协变；同理，逆变分量和对偶基的变换方式相同，其变换矩阵为基的逆矩阵，故称为逆变。（事实上$T_i^{\alpha}$和$T_{\beta}^j$不是两个矩阵，而是同一个张量在不同的基下的分量形式）</p>
<p>需要注意矢量的协变表示和逆变表示与协变矢量和逆变矢量是不同的概念，在$\mathbb R^3$中不对后者进行区分。</p>
<h2 id="2-4-度规"><a href="#2-4-度规" class="headerlink" title="2.4 度规"></a>2.4 度规</h2><p>对任意矢量$\mathbf D$，有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    D_i &= \mathbf D\cdot\mathbf e_i = (D^j\mathbf e_j)\cdot\mathbf e_i
    \\&=D^j(\mathbf e_i\cdot\mathbf e_j) = g_{ij}D^j
\end{aligned}</script><p>由此，根据分量：</p>
<script type="math/tex; mode=display">
g_{ij}=\mathbf e_i\cdot\mathbf e_j = \frac{\partial\mathbf R}{\partial u^i}\cdot\frac{\partial\mathbf R}{\partial u^j} \tag{2.4.1}</script><p>确定了一个二阶张量，称作<strong>度规</strong>。这里不准备展开介绍张量的定义，但需注意度规不仅仅是一个矩阵，而应被看做一个线性映射，它建立了基和对偶基下表示的矢量的联系。</p>
<p>度规在对偶基下的分量形式为：</p>
<script type="math/tex; mode=display">
g^{ij}=\mathbf e^i\cdot\mathbf e^j = \nabla u^i\cdot\nabla u^j \tag{2.4.2}</script><p>由上面的讨论，我们知道，可以使用度规进行矢量协变和逆变分量的转换。根据爱因斯坦求和约定，可以很容易得到转换的表达式。例如，要得到根据矢量$\mathbf D$的协变分量（下指标）得到逆变分量（上指标），则需要使用度规在对偶基下的分量（两个上指标）进行运算，即哑指标一上一下，自由指标为上指标。从而得到：$D^i=g^{ij}D_j$。</p>
<p>另外，借助度规，可以表示两个矢量的点乘和叉乘运算的同一类分量形式：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \mathbf A\cdot\mathbf B &= (A^i\mathbf e_i)\cdot(B^j\mathbf e_j)=g_{ij}A^iB^j
    \\&= (A_i\mathbf e^i)\cdot(B_j\mathbf e^j)=g^{ij}A_iB_j
\end{aligned}</script><p>特别地，$\mathrm{d}\mathbf{R}\cdot\mathbf{dR} = g_{ij}(\mathrm{d}\mathbf{R})^i(\mathrm{d}\mathbf{R})^j = g_{ij}\mathbf{d}u^i\mathbf{d}u^j$。（其中$(\mathrm{d}\mathbf{R})^i = \nabla u^i\cdot\mathrm{d}\mathbf{R} = \mathbf du^i$），这告诉我们度规也蕴含了曲线坐标系中的线元长度。</p>
<p>对矢量的叉乘：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \mathbf A\times\mathbf B &= A^iB^j(\mathbf e_i\times\mathbf e_j)
\\&=A^iB^j\epsilon_{kij}\mathbf e^k(\mathbf e_k\cdot(\mathbf e_i\times\mathbf e_j))
\\&=\epsilon_{kij}A^iB^j\mathbf e^k
\end{aligned}</script><p>上面的推导用到了(2.1.1)式，当且仅当$(k,i,j)$是$(1,2,3)$的偶置换时有$\mathbf e^k = \frac{\mathbf e_i\times\mathbf e_j}{\mathbf e_k\cdot(\mathbf e_i\times\mathbf e_j)}$，且由(1.3.2)式，对所有偶置换，分母都相等。式中</p>
<script type="math/tex; mode=display">
\begin{aligned}
    J &= \mathbf e_1\cdot(\mathbf e_2\times\mathbf e_3) = \frac{\partial \mathbf R}{\partial u^1}\cdot(\frac{\partial \mathbf R}{\partial u^2}\times\frac{\partial \mathbf R}{\partial u^3})
    \\&=
    \begin{vmatrix}
        \frac{\partial x}{\partial u^1} & \frac{\partial y}{\partial u^1} & \frac{\partial z}{\partial u^1} 
        \\ \frac{\partial x}{\partial u^2} & \frac{\partial y}{\partial u^2} & \frac{\partial z}{\partial u^2}
        \\ \frac{\partial x}{\partial u^3} & \frac{\partial y}{\partial u^3} & \frac{\partial z}{\partial u^3}
    \end{vmatrix}
\end{aligned}</script><p>为Jacobi行列式。把度规的分量$g_{ij}$写成矩阵，发现其元素$g_{ij}=\sum_{q=1}^{3}\frac{\partial \mathbf R^q}{\partial u^i}\cdot\frac{\partial \mathbf R^q}{\partial u^j}$，可以写成上面的Jacobi矩阵与其转置的积，那么我们有：</p>
<script type="math/tex; mode=display">g=det(g_{ij})=J^2</script></body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>电动力学笔记</category>
      </categories>
      <tags>
        <tag>物理</tag>
      </tags>
  </entry>
  <entry>
    <title>恒星的内部结构——简单模型</title>
    <url>/2020/09/08/stellar-physics-05-equilibrium-star/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h2 id="恒星结构方程组"><a href="#恒星结构方程组" class="headerlink" title="恒星结构方程组"></a>恒星结构方程组</h2><p>假设：流体静力学平衡，热平衡，结构方程组为</p>
<script type="math/tex; mode=display">\frac{\mathrm{d} P}{\mathrm{d} r}=-\rho \frac{G m}{r^{2}}</script><script type="math/tex; mode=display">\frac{\mathrm{d} m}{\mathrm{d} r}=4 \pi r^{2} \rho</script><script type="math/tex; mode=display">\frac{\mathrm{d} T}{\mathrm{d} r}=-\frac{3}{4 a c} \frac{\kappa \rho}{T^{3}} \frac{F}{4 \pi r^{2}}</script><script type="math/tex; mode=display">\frac{\mathrm{d} F}{\mathrm{d} r}=4 \pi r^{2} \rho q</script><p>或</p>
<script type="math/tex; mode=display">\frac{\mathrm{d} P}{\mathrm{d} m}=-\frac{G m}{4 \pi r^{4}}</script><script type="math/tex; mode=display">\frac{\mathrm{d} r}{\mathrm{d} m}=\frac{1}{4 \pi r^{2} \rho}</script><script type="math/tex; mode=display">\frac{\mathrm{d} T}{\mathrm{d} m}=-\frac{3}{4 a c} \frac{\kappa}{T^{3}} \frac{F}{\left(4 \pi r^{2}\right)^{2}}</script><script type="math/tex; mode=display">\frac{\mathrm{d} F}{\mathrm{d} m}=q</script><p>附加方程：</p>
<ol>
<li>物态方程（离子+电子+辐射）<script type="math/tex; mode=display">P = \frac{\mathcal{R}}{\mu}\rho T + \frac{1}{3}aT^4</script></li>
<li>不透明度的经验关系<script type="math/tex; mode=display">\kappa = \kappa_0 \rho^a T^b</script></li>
<li>核产能率的经验关系<script type="math/tex; mode=display">q = q_0 \rho^m T^n</script></li>
</ol>
<p>再结合边界条件：</p>
<ul>
<li>内边界条件：$r=0$时，$m=0,F=0$</li>
<li>外边界条件：$r=R$时（恒星本体外边界，光球层内边界），$m=M,P\approx 0(P(R)\ll P_c),F=L$</li>
</ul>
<p>可以解出</p>
<script type="math/tex; mode=display">T=T(m),\ \rho=\rho(m),\ r=r(m),\ F=F(m)</script><p>结构方程组有如下性质：</p>
<ul>
<li>高度非线性</li>
<li>未知量相互耦合</li>
<li>为两点边界问题</li>
</ul>
<p>一般需要数值方法迭代求解，或者进行简化假设，求简单解</p>
<h2 id="简单的恒星模型：均匀特性"><a href="#简单的恒星模型：均匀特性" class="headerlink" title="简单的恒星模型：均匀特性"></a>简单的恒星模型：均匀特性</h2><p>思路：寻找不依赖$r$和$m$的合适的物理量，并假设它在恒星中是均匀的</p>
<p>可以假设年轻恒星中元素丰度是均匀的，$\mathbf{X}(r)=\mathrm{const}$。理由：</p>
<ul>
<li>恒星形成前，气体由于引力收缩，有微弱的红外和毫米波辐射，同时有发达的对流区，可以将气体充分混合（林忠四郎阶段）</li>
<li>对重元素多的恒星，电离产生大量自由电子，从而电子压主导。电子可以从内到外自由运动，近似是均匀的。</li>
<li>年轻恒星没有形成洋葱结构，可以认为化学组分是均匀的</li>
</ul>
<p>考虑这一近似下恒星的物理特性：</p>
<ul>
<li>压强$P$从内到外单调下降</li>
<li>温度$T$从内到外单调下降，在厚$\Delta r\ll R$的壳层内$T\sim\mathrm{const}$，近似有局域热动平衡(LTE)</li>
<li>$q$通常对温度非常敏感，导致在远离中心的壳层中$q(r)\ll q_\mathrm{core}$，对总光度的贡献可以忽略不计<br>因此可以近似认为核反应只在中心核区$r_\mathrm{core}\ll R$发生，可以近似为点源，核区$q=q_\mathrm{nuc}$<br>恒星结构方程各参数相耦合，因此$q_\mathrm{nuc}$是可以决定恒星结构和演化的关键的量</li>
</ul>
<h2 id="多方球理论"><a href="#多方球理论" class="headerlink" title="多方球理论"></a>多方球理论</h2><p>恒星气体的物态方程给出$P=P(\rho,T)$，$P$对$T$的依赖导致恒星结构方程前两个和后两个的耦合。如果能独立地给出$T=T(\rho)$，可以使前两个方程与后两个解耦。</p>
<p>流体静力学平衡方程</p>
<script type="math/tex; mode=display">\frac{\mathrm{d} P}{\mathrm{d} r}=-\rho \frac{G m}{r^{2}}</script><p>对$r$求导，</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}}{\mathrm{d}r}\left(\frac{r^2}{\rho}\frac{\mathrm{d} P}{\mathrm{d} r}\right) = -G\frac{\mathrm{d}m}{\mathrm{d}r}</script><p>即</p>
<script type="math/tex; mode=display">\frac{1}{r^2}\frac{\mathrm{d}}{\mathrm{d}r}\left(\frac{r^2}{\rho}\frac{\mathrm{d} P}{\mathrm{d} r}\right) = -4\pi G \rho \tag{*}</script><p>考虑<strong>多方过程</strong>的物态方程：</p>
<script type="math/tex; mode=display">P = k\rho^\gamma</script><p>$\gamma$也可以写成$\gamma=1+1/n$<br>考虑静态的恒星，在$r\sim r+\mathrm{d}r$的壳层上，没有径向运动且内能密度不变，从而$\delta Q=0$，这一壳层中气体经历绝热过程。<br>对非相对论性气体，$\gamma=5/3$；对相对论性气体，$\gamma=4/3$<br>代入(*)，有</p>
<script type="math/tex; mode=display">\frac{k}{4\pi G}\frac{n+1}{n}\frac{1}{r^2}\frac{\mathrm{d}}{\mathrm{d}r}\left(\frac{r^2}{\rho^{(n-1)/n}}\frac{\mathrm{d} \rho}{\mathrm{d} r}\right) = -\rho \tag{1}</script><p>考虑边界条件：</p>
<ul>
<li>内边界$r=0$，$\rho$极大，$\frac{\mathrm{d}\rho}{\mathrm{d}r}=0$。<br>另外，由$r\rightarrow 0$时$m(r)\sim \rho r^3$，<script type="math/tex; mode=display">\left. \frac{\mathrm{d} P}{\mathrm{d} r}\right|_{r=0} = \left. -\rho \frac{G m}{r^{2}} \right|_{r=0} = 0</script>即压强在中心点也为极大。</li>
<li>外边界$r=R$，$P\approx 0$，由物态方程$\rho\approx 0$</li>
</ul>
<p>若能从(1)式解出$\rho(r)$，就可以积分出恒星的质量和压强分布。</p>
<h3 id="Lane-Emden方程"><a href="#Lane-Emden方程" class="headerlink" title="Lane-Emden方程"></a>Lane-Emden方程</h3><p>为了使得到的解具有普适性，用恒星的特征物理量（如$M,R$）将方程无量纲化：<br>令</p>
<script type="math/tex; mode=display">\rho = \rho_c \theta^n</script><p>无量纲的$\theta$满足$0\le \theta \le 1$，$\theta(r=0)=1,\theta(r=R)=0$，从内到外单调下降。<br>(1)式成为：</p>
<script type="math/tex; mode=display">\frac{(n+1)k}{4\pi G \rho_c^{(n-1)/n}} \frac{1}{r^2}\frac{\mathrm{d}}{\mathrm{d}r}\left(r^2\frac{\mathrm{d}\theta}{\mathrm{d} r}\right) = -\theta^n \tag{2}</script><p>令</p>
<script type="math/tex; mode=display">\frac{(n+1)k}{4\pi G \rho_c^{(n-1)/n}} = \alpha^2</script><p>$\alpha$为具有长度量纲的常量，可以认为是恒星的某种热力学特征尺度。用$\alpha$无量纲化$r$，即令：</p>
<script type="math/tex; mode=display">r = \alpha \xi</script><p>$\xi$就是无量纲化的径向距离。<br>(2)就成为</p>
<script type="math/tex; mode=display">\xi^2\theta^n = -\frac{\mathrm{d}}{\mathrm{d}\xi}\left(\xi^2\frac{\mathrm{d}\theta}{\mathrm{d} \xi}\right)</script><p>称为<strong>Lane-Emden方程</strong>。</p>
<p>$0\le\xi\le \xi_1=R/\alpha$，边界条件为：</p>
<ul>
<li>$\xi=0$时，$\theta=1,\frac{\mathrm{d}\theta}{\mathrm{d}\xi}=0$。</li>
<li>$\xi=\xi_1$时，$\theta=0$。</li>
</ul>
<p>数值方法求解$\theta=\theta(\xi)$，可以得到$\rho/\rho_c\sim r/R$关系。</p>
<h3 id="无量纲参数-M-n-D-n-R-n-B-n"><a href="#无量纲参数-M-n-D-n-R-n-B-n" class="headerlink" title="无量纲参数$M_n,D_n,R_n,B_n$"></a>无量纲参数$M_n,D_n,R_n,B_n$</h3><p>考虑恒星的总质量</p>
<script type="math/tex; mode=display">
\begin{aligned}
   M &= \int_0^R 4\pi r^2 \rho(r) \mathrm{d}r
   \\&= 4\pi \alpha^3\rho_c \int_0^{\xi_1} \xi^2\theta^n \mathrm{d}\xi
   \\&= 4\pi \alpha^3\rho_c \int_0^{\xi_1} \frac{\mathrm{d}}{\mathrm{d}\xi}\left(\xi^2\frac{\mathrm{d}\theta}{\mathrm{d} \xi}\right) \mathrm{d}\xi
   \\&= -4\pi \alpha^3\rho_c \xi_1^2 \left. \frac{\mathrm{d}\theta}{\mathrm{d} \xi}\right|_{\xi_1}
   \\&= 4\pi \alpha^3\rho_c M_n
\end{aligned}</script><p>其中</p>
<script type="math/tex; mode=display">M_n = -\xi_1^2 \left. \frac{\mathrm{d}\theta}{\mathrm{d} \xi}\right|_{\xi_1}</script><p>是与$n$有关的无量纲参量，可以由关系曲线导出。</p>
<p>考虑中心密度$\rho_c$，令</p>
<script type="math/tex; mode=display">\rho_c = D_n \bar{\rho} = D_n \frac{M}{\frac{4}{3}\pi R^3}</script><p>从而无量纲参数</p>
<script type="math/tex; mode=display">D_n = \frac{4\pi R^3\rho_c}{3M} = -\left[\frac{3}{\xi_1} \left. \frac{\mathrm{d}\theta}{\mathrm{d} \xi}\right|_{\xi_1}\right]^{-1}</script><p>对不同的$n&lt;5$，一般$D_n$和$R_n=\xi_1$取值都在$1\sim10$之间。</p>
<p>根据$M_n,R_n$的定义，可导出如下关系</p>
<script type="math/tex; mode=display">\left(\frac{GM}{M_n}\right)^{n-1} \left(\frac{R}{R_n}\right)^{3-n} = \frac{[(n+1)k]^n}{4\pi G}</script><p>即对确定的EoS，主序星的$M$和$R$有一一对应，称为<strong>质量-半径关系</strong>。</p>
<p>由质量-半径关系式，可以看出$n=3$时（相对论性气体），$R/R_n$的项消失，$M=\mathrm{const}$不依赖$R$；$n=1$时，$M/M_n$的项消失，$R=\mathrm{const}$不依赖$M$。<br>$1 &lt; n &lt; 3$时，$R$与$M$负相关。</p>
<p>由质量-半径关系可以给出$k$和$M,R$的关系，带入物态方程，得到中心压强：</p>
<script type="math/tex; mode=display">P_c = \frac{(4\pi G)^{1/n}}{n+1}\left(\frac{GM}{M_n}\right)^{\frac{n-1}{n}}\left(\frac{R}{R_n}\right)^{\frac{3-n}{n}}\rho_c^{\frac{n+1}{n}}</script><p>用$D_n$消去$R$：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    P_c &= \frac{(4\pi G)^{1/n}}{n+1}\left(\frac{GM}{M_n}\right)^{\frac{n-1}{n}} \left[ \left(\frac{3D_n}{4\pi}\right)^{\frac{1}{3}}M^{\frac{1}{3}}\rho_c^{-\frac{1}{3}} \right]^{\frac{3-n}{n}} \left(\frac{1}{R}\right)^{\frac{3-n}{n}} \rho_c^{\frac{n-1}{n}}
    \\&= (4\pi)^{1/3}B_n GM^{2/3} \rho_c^{4/3}
\end{aligned}</script><p>其中无量纲参量</p>
<script type="math/tex; mode=display">B_n = \frac{1}{n+1} \left(\frac{1}{M_n}\right)^{\frac{n-1}{n}}(3D_n)^{\frac{3-n}{3n}}R_n^{\frac{n-3}{n}}</script><p>与$n$有关，且是由$M_n,D_n,R_n$导出的。</p>
<h2 id="钱德拉塞卡极限"><a href="#钱德拉塞卡极限" class="headerlink" title="钱德拉塞卡极限"></a>钱德拉塞卡极限</h2><p>白矮星是恒星耗尽核燃料后由于自引力塌缩，内部电子简并压抵抗引力，维持稳定星体结构的天体。$M\sim M_\odot, R\sim 10^4\mathrm{km}$</p>
<h3 id="电子简并压"><a href="#电子简并压" class="headerlink" title="电子简并压"></a>电子简并压</h3><p>非相对论性简并电子气的物态方程为</p>
<script type="math/tex; mode=display">P_{\mathrm{e,deg}} = k_1 \rho^{5/3}</script><p>即$\gamma=5/3,n=3/2,k=k_1$的多方球模型。</p>
<p>质量-半径关系给出$R\propto M^{-1/3}$，$\bar{\rho}\propto M/R^3\propto M^2$<br>对典型白矮星，$M\sim M_\odot, R\sim 10^4\mathrm{km}$，$\bar{\rho}\sim 10^5 \mathrm{g\cdot cm^{-3}}$，属于致密星。</p>
<p>如果让白矮星质量增大，则其密度也将增大，电子数密度增大，由不确定性原理，其动量也将增大，电子的物态将成为极端相对论性。其物态方程为：</p>
<script type="math/tex; mode=display">P_{\mathrm{e,r-deg}} = k_2 \rho^{4/3}</script><p>对应参数$\gamma=4/3,n=3,k=k_2$。按多方球理论，$n=3$时$M$为常量，不能继续变大，即$M$达到最大值。</p>
<script type="math/tex; mode=display">M_{\mathrm{ch}} = 4\pi M_3 \left(\frac{k_2}{\pi G}\right)^{3/2} = 5.83\mu_e^{-2}M_\odot</script><p>为钱德拉塞卡质量，是白矮星质量的上限。</p>
<p>$\mu_e$有两种情况：</p>
<ul>
<li>氢耗尽，主要是氦，此时$\mu_e\approx 2$，$M_{\mathrm{ch}}=1.46M_\odot$</li>
<li>中心铁核，此时$\mu_e\approx 2.15$，$M_{\mathrm{ch}}=1.26M_\odot$</li>
</ul>
<h2 id="爱丁顿（极限）光度"><a href="#爱丁顿（极限）光度" class="headerlink" title="爱丁顿（极限）光度"></a>爱丁顿（极限）光度</h2><p>由辐射转移方程，</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P_\mathrm{rad}}{\mathrm{d}r} = -\frac{\kappa \rho H}{c} = -\frac{\kappa \rho}{c} \frac{F}{4 \pi r^{2}}</script><p>再根据流体静力学平衡</p>
<script type="math/tex; mode=display">\frac{\mathrm{d} P}{\mathrm{d} r}=-\rho \frac{G m}{r^{2}}</script><p>有</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P_\mathrm{rad}}{\mathrm{d}P} = \frac{\kappa F}{4\pi cGm}</script><p>主序星辐射的能流向外，$F&gt;0$，从而$\mathrm{d}P$和$\mathrm{d}P_\mathrm{rad}$符号相同。由于从内向外$P$和$P_\mathrm{gas}$都减小，故$\mathrm{d}P_\mathrm{rad}&lt;\mathrm{d}P$，从而有</p>
<script type="math/tex; mode=display">\kappa F < 4\pi cGm</script><p>注意：在恒星外围壳层的对流区，氢氦充分电离，存在大量自由电子。若核区的磁流体不稳定性使核燃烧增强，$F$增大，导致更强的光致电离，使$n_e$增大，导致汤姆逊散射主导的$\kappa$增大。此时可能有$\kappa F&gt;4\pi cGm$，需要引入对流机制转移多余的辐射的能量。</p>
<p>考虑热平衡方程</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}F}{\mathrm{d}m} = q</script><ul>
<li>中心$F(0)=0$，在中心附近，$F=q_cm$。<br>$\kappa F&lt;4\pi cGm$给出<script type="math/tex; mode=display">q_c < \frac{4\pi cG}{\kappa}</script></li>
<li>外边界$F(M)=L$， $\kappa F&lt;4\pi cGm$给出<script type="math/tex; mode=display">L < \frac{4\pi cGM}{\kappa}</script>恒星外壳层产生不透明度的机制主要是汤姆逊散射，$\kappa\approx \kappa_{\mathrm{es}}$<br>理论上$\kappa_\mathrm{es}=\frac{\sigma_T}{m_Hc}$，其中$\sigma_T=6.25\times10^{-25} \mathrm{cm}^2$为电子的汤姆逊散射截面。<br>从而<script type="math/tex; mode=display">L < L_\mathrm{Edd} = \frac{4\pi m_Hc^2GM}{\sigma_T} = 1.3\times10^{38} \left(\frac{M}{M_\odot}\right) \mathrm{erg\cdot s^{-1}}</script>即对质量$M$给定的恒星，其光度有上限$L_\mathrm{Edd}$，称为爱丁顿光度。</li>
</ul>
<p>若由于内部扰动，$L$超过$L_\mathrm{Edd}$，流体静力学平衡被破坏，$P_\mathrm{rad}$的值很大形成强星风，吹散恒星外包层，使恒星质量减小。</p>
<p>观测上，主序星有质光关系</p>
<script type="math/tex; mode=display">\log L \propto n\log M</script><p>结合$L &lt; L_\mathrm{Edd}$，表明恒星质量存在上限。</p>
<h2 id="标准模型（爱丁顿模型）"><a href="#标准模型（爱丁顿模型）" class="headerlink" title="标准模型（爱丁顿模型）"></a>标准模型（爱丁顿模型）</h2><h3 id="光度"><a href="#光度" class="headerlink" title="光度"></a>光度</h3><p>引入无量纲参数$\eta$，使</p>
<script type="math/tex; mode=display">\frac{F(r)}{m(r)} = \eta \frac{L}{M}</script><p>与可观测量$L,M$联系起来。<br>显然，在恒星表面，$\eta=1$。</p>
<p>则：</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P_\mathrm{rad}}{\mathrm{d}P} = \frac{\kappa F}{4\pi cGm} = \frac{\kappa \eta L}{4\pi cGM} = \frac{\kappa_s L}{4\pi cGM}</script><p>其中$\kappa_s=\kappa\eta$。</p>
<p>由于$q$对温度极端敏感，可以近似认为核区（点源）之外$q=0$。即对$r&gt;0$，$F(r)\sim\mathrm{const}$。而向内$m(r)$减小，从而$\eta$增大，$\eta\ge 1$。<br>另一方面，$\kappa\propto \rho T^{-7/2}$（电子自由-自由散射的Kramers不透明度）。近似认为$\kappa$和$\eta$抵消，$\kappa_s\sim\mathrm{const}$。而在外表面$\kappa=1\cdot\kappa(R)=\kappa(R)$，从而$\kappa_s$就是恒星外表面的不透明度。</p>
<p>$\kappa_s$是常数，从而积分得到：</p>
<script type="math/tex; mode=display">P_\mathrm{rad} = \frac{\kappa_s L}{4\pi cGM}P</script><p>定义$\beta=P_{\mathrm{gas}}/P$，则</p>
<script type="math/tex; mode=display">L = \frac{4\pi cGM}{\kappa_s}\frac{P_\mathrm{rad}}{P} = L_\mathrm{Edd}(1-\beta)</script><p>即<strong>恒星的光度是爱丁顿光度的$1-\beta$倍</strong>。</p>
<h3 id="压强"><a href="#压强" class="headerlink" title="压强"></a>压强</h3><p>总压强</p>
<script type="math/tex; mode=display">
\begin{aligned}
    P &= \frac{P_\mathrm{rad}}{1-\beta} = \frac{aT^4}{3(1-\beta)}
    \\&= \frac{P_\mathrm{gas}}{\beta} = \frac{\mathcal{R}}{\beta \mu}\rho T
\end{aligned}</script><p>从而有</p>
<script type="math/tex; mode=display">T^3 = \frac{3\mathcal{R}(1-\beta)}{a\mu\beta}\rho \tag{6.1}</script><p>对相对论性气体，$\gamma=4/3,n=3$，</p>
<script type="math/tex; mode=display">P = k\rho^{4/3}</script><p>多方球理论给出</p>
<script type="math/tex; mode=display">M = 4\pi M_3\left(\frac{k}{\pi G}\right)^{3/2}</script><p>从而</p>
<script type="math/tex; mode=display">k = \left(\frac{M}{4\pi M_3}\right)^{2/3}\pi G \tag{6.2}</script><p>另一方面，由理想气体方程，</p>
<script type="math/tex; mode=display">P = \frac{\mathcal{R}}{\beta \mu}\rho T = \frac{\mathcal{R}}{\beta \mu} \left[\frac{3\mathcal{R}(1-\beta)}{a\mu\beta}\right]^{1/3}\rho^{4/3} = k\rho^{4/3}</script><p>给出的$k$为</p>
<script type="math/tex; mode=display">k = \left[\frac{3\mathcal{R}^4(1-\beta)}{a\mu^4\beta^4}\right]^{1/3} \tag{6.3}</script><p>(6.2)=(6.3)，化简有</p>
<script type="math/tex; mode=display">
\begin{aligned}
    1-\beta &= \frac{a(\pi G)^3M_\odot^2}{3\mathcal{R}^4(4\pi M_3)^2}\left(\frac{M}{M_\odot}\right)^2 \mu^4\beta^4
    \\&\approx 0.003 \left(\frac{M}{M_\odot}\right)^2 \mu^4\beta^4
\end{aligned}</script><p>称为<strong>Eddington四次方程</strong>。<br>其解为：<br><img src="05-1-Eddington-quartic-euqation.png" alt=""><br>讨论：</p>
<ul>
<li>小质量恒星$\beta\approx 1$，气体压主导，较稳定</li>
<li>大质量恒星$\beta\approx 0$，辐射压主导，不稳定</li>
<li>带入太阳丰度$\mu\approx 0.61$，对应质量范围$0.5M_\odot\le M \le 50M_\odot$，与观测基本一致。</li>
<li>对$\mu=\mathrm{const}$，小的$\beta$对应更大的$M$。</li>
<li>结合$L=L_\mathrm{Edd}(1-\beta)$，有：<script type="math/tex; mode=display">\frac{L}{L_\odot} = 0.003\frac{4\pi cGM_\odot}{\kappa_s L_\odot}\mu^4\beta^4\left(\frac{M}{M_\odot}\right)^3</script>即约有$L\sim M^3$，称为恒星的<strong>质光关系</strong>。<br>上面的结果忽略了不同恒星化学组成不同，实际上由于$\beta=\beta(M,\mu)$，实际观测结果会有偏差</li>
<li>考虑相同质量，不同阶段（氢烧-&gt;氦烧-&gt;碳氧烧）的恒星，$\mu$增大，$\beta$减小，辐射压增大。光度接近爱丁顿光度时，会形成强烈的星风，吹散恒星外包层，使$M$下降，形成负反馈。</li>
</ul>
<h2 id="点源模型-Cowling模型"><a href="#点源模型-Cowling模型" class="headerlink" title="点源模型(Cowling模型)"></a>点源模型(Cowling模型)</h2><p>假设核反应只发生在$r=0$一点，$r&gt;0$时，$q=0$。从而$F(r)=F(R)=L$。<br>另外假设主序前林忠四郎阶段充分对流，使恒星内外区域均匀混合，$\mu$为常数。<br>不透明度$\kappa = \kappa_0 \rho^a T^b$。</p>
<p>从而有如下关系：</p>
<ul>
<li>流体静力学平衡<script type="math/tex; mode=display">\frac{\mathrm{d}P}{\mathrm{d}r} = -\frac{Gm\rho}{r^2}</script></li>
<li>各向同性的辐射流量密度<script type="math/tex; mode=display">H = \frac{F}{4\pi r^2} = \frac{L}{4\pi r^2}</script></li>
<li>辐射转移<script type="math/tex; mode=display">\frac{\mathrm{d}P_\mathrm{rad}}{\mathrm{d}r} = -\frac{\kappa \rho H}{c} = -\frac{\kappa_0 L}{c}\frac{\rho^{a+1}T^b}{4\pi r^2}</script></li>
<li>质量连续性方程<script type="math/tex; mode=display">\frac{\mathrm{d}m}{\mathrm{d}r} = 4\pi r^2\rho</script></li>
<li>气体压<script type="math/tex; mode=display">P_\mathrm{gas} = \frac{\mathcal{R}}{\mu}\rho T</script></li>
</ul>
<p>进一步假设不确定度经验公式中$a=b=0$，即$\kappa=\kappa_0=\mathrm{const}$，联立流体静力学平衡和辐射转移方程，并结合$P=P_\mathrm{gas}+P_\mathrm{rad}$，有</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}P_\mathrm{gas}}{\mathrm{d}P_\mathrm{rad}} = \frac{4\pi cG}{\kappa_0 L}m - 1</script><p>对$r$求导，</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}^2 P_\mathrm{gas}}{\mathrm{d}P_\mathrm{rad}^2}\frac{\mathrm{d}P_\mathrm{rad}}{\mathrm{d}r} = \frac{4\pi cG}{\kappa_0 L}\frac{\mathrm{d}m}{\mathrm{d}r}</script><p>代入辐射转移和质量连续性方程，</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}^2 P_\mathrm{gas}}{\mathrm{d}P_\mathrm{rad}^2} = -\frac{64\pi^3 c^2G}{\kappa_0^2 L^2}r^4 \tag{7.1}</script><p>由气体的物态方程，</p>
<script type="math/tex; mode=display">\rho = \frac{\mu}{\mathcal{R}}\frac{P_\mathrm{gas}}{T} = \frac{\mu}{\mathcal{R}}\left(\frac{a}{3}\right)^{1/4} {P_\mathrm{gas}}P_\mathcal{rad}^{-1/4}</script><p>从而辐射转移方程的倒数：</p>
<script type="math/tex; mode=display">\frac{\mathrm{d}\left(\frac{1}{r}\right)}{\mathrm{d}P_\mathrm{rad}} = \frac{4\pi c}{\kappa_0 L\rho} = \frac{4\pi c}{\kappa_0 L}\frac{\mathcal{R}}{\mu}\left(\frac{3}{a}\right)^{1/4} {P_\mathrm{gas}}^{-1}P_\mathcal{rad}^{1/4} \tag{7.2}</script><p>(7.1)和(7.2)建立了变量$P_\mathrm{gas},P_\mathrm{rad},\frac{1}{r}$之间的关系。可以用数值方法求解。结果表明恒星存在质光关系</p>
<script type="math/tex; mode=display">\log L\propto n\log M</script><p>对中等质量恒星$n$较大（$n\sim 4.5$），对大质量恒星$n$较小（$n\sim 3.0$）。<br>对小质量矮星，内部部分处于量子简并态，该方程组不适用。</p>
</body></html>]]></content>
      <categories>
        <category>笔记</category>
        <category>恒星物理笔记</category>
      </categories>
      <tags>
        <tag>天文</tag>
      </tags>
  </entry>
  <entry>
    <title>关于超现实数</title>
    <url>/2020/05/30/surreal-numbers/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>《研究之美》中描写了这样一个故事：在远离尘世的小岛上“寻找自我”的两人，根据石碑上记载的基本定义，从零开始发展出了一个不同的数学体系——超现实数(<strong>surreal numbers</strong>)。</p>
<p>书中比起介绍的内容，从已知的基本定义开始扩展得出有意义的定理的过程也同样精彩。本文则是一种相对拙劣的总结，试图将其中的内容以一种更清晰易懂的方式重新叙述出来。因此本文不足以成为《研究之美》的替代，也希望本文可以使更多人阅读这一值得被阅读的作品。</p>
<h2 id="数的定义和序关系"><a href="#数的定义和序关系" class="headerlink" title="数的定义和序关系"></a>数的定义和序关系</h2><p><strong>数</strong>被定义为两个数集：</p>
<script type="math/tex; mode=display">x=(X_L,X_R),\ \mathrm{where}\quad X_L\ngeq X_R \tag{1}</script><p>其中$X_L\ngeq X_R$是指任意$X_L$中的元素$x_L$和$X_R$中的元素$x_R$都有$x_L\ngeq x_R$。（如果$X_L$和$X_R$其中有一个是空集，那么$X_L\ngeq X_R$也是成立的，考虑其逆反命题就能得知这一点）</p>
<p>而<strong>序关系</strong>$x\le y$则定义为：</p>
<script type="math/tex; mode=display">x\le y \qquad\mathrm{when}\qquad X_L\ngeq y, x\ngeq Y_R \tag{2}</script><p>（$x\ge y$即是说$y\le x$）</p>
<p>这是一个<strong>递归</strong>的定义，要定义一个数，必须先要有两个数集，而定义数集里的数也需要数······不过这并不是无止境的，因为我们可以拿<strong>空集</strong>来定义数：</p>
<script type="math/tex; mode=display">0 = (\emptyset,\emptyset)</script><p>这里的0只是个记号，不过我们在后面就会看到它的确有0的性质（加法零元）。</p>
<p>书中似乎用了点上帝创世的比喻，我们称0是“<strong>第一天</strong>”创造出来的。有了0之后的第二天，我们便可以将它塞到左集和右集，创造下面两个数：</p>
<script type="math/tex; mode=display">-1=(\emptyset,\{0\}),\qquad 1=(\{0\},\emptyset)</script><p>于是我们可以一天天的创造数。这个“创造日”的概念将会在下面被广泛应用到证明中。</p>
<p><em>（用形式一点的说法，数$x$的创造日可以递归地定义为<br>$d(x)=\max(X_L,X_R)+1$，且$d(0)=1$。这是为了说明创造日是一个有良好定义的概念）</em></p>
<h3 id="le-的传递性"><a href="#le-的传递性" class="headerlink" title="$\le$的传递性"></a>$\le$的传递性</h3><p>下面证明$\le$的<strong>传递性</strong>：</p>
<script type="math/tex; mode=display">x\le y, y\le z\ \Rightarrow\ x\le z \tag{T1}</script><p>对$(x,y,z)$的创造日之和归纳，即假设(T1)对创造日之和小于$d(x)+d(y)+d(z)$的一组数都成立。</p>
<p>若$x\nleq z$，有两种可能：</p>
<ul>
<li>$X_L$中存在某些$x_L\ge z$，结合$y\le z$由归纳假设有$y\le x_L$，这与$x\le y$矛盾。</li>
<li>$Z_R$中存在某些$z_R\le x$，结合$x\le y$由归纳假设有$z_R\le y$，这与$y\le z$矛盾。</li>
</ul>
<p>从而$x\le z$，即(T1)得证。</p>
<h3 id="le-的完全性和自反性"><a href="#le-的完全性和自反性" class="headerlink" title="$\le$的完全性和自反性"></a>$\le$的完全性和自反性</h3><p>下面证明$\le$的<strong>自反性</strong>，即对任意$x$，</p>
<script type="math/tex; mode=display">x\le x \tag{T3}</script><p>各定理的顺序和原书不一定相同，不过为了尊重原书（以及方便），序号还是和原书保持一致。</p>
<p>(T3)容易由对创造日的归纳法给出，$x\le x$即是说$X_L\ngeq x$且$x\ngeq X_R$。而$x_L\ge x$蕴含$X_L\ngeq x_L$，其中必然有$x_L\ngeq x_L$，这和归纳假设矛盾。从而$X_L\ngeq x$成立，$x\ngeq X_R$也可以用相同方法证明。</p>
<p>从而可以证明下面的引理：</p>
<script type="math/tex; mode=display">X_L\le x,x\le X_R \tag{T2}</script><p>仍然使用归纳法，$x_L\nleq x$即是说存在一个$x_{LL}\ge x$或$x_L\ge x_R$。后者违反了规则(1)（数的定义）。而前者由归纳假设$x_{LL}\le x_L$和传递律有$x\le x_{LL}\le x_L$，则$X_L\ngeq x_L$，这和(T3)矛盾。</p>
<p>$y\nleq x$即是存在$x_L\ge y$或$x\ge y_R$。由(T2)，这即是说$y\le x_L\le x$或$y\le y_R\le x$。这即是$\le$的<strong>完全性</strong>：</p>
<script type="math/tex; mode=display">x\nleq y \Rightarrow y\le x \tag{T4}</script><p>从而我们可以把$x\ngeq y$定义为$x&lt;y$。显然$x&lt;y$蕴含了$x\le y$，于是下面两条传递律也成立：</p>
<script type="math/tex; mode=display">x<y, y\le z\  \Rightarrow\ x<z \tag{T5}</script><script type="math/tex; mode=display">x\le y, y<z\  \Rightarrow\ x\le z \tag{T6}</script><p>同时$x\le y$的定义也可以改写为：</p>
<script type="math/tex; mode=display">x\le y \qquad\mathrm{when}\qquad X_L<y, x<Y_R \tag{2'}</script><p>同时结合(T3)，(T2)可以被改写为</p>
<script type="math/tex; mode=display">X_L<x<X_R \tag{T2'}</script><p>我们证明了$\le$满足偏序关系的自反性和传递性，但它并不严格的满足反对称性：可以存在两个数$x,y$，$x\le y,y\le x$，且$x\neq y$。<br>当$x\le y,y\le x$时，我们称$x$和$y$“<strong>相似</strong>”：$x\equiv y$。容易验证这是一个等价关系，如果把“$=$”换成“$\equiv$”，我们也可以称$\le$是数集上的全序。</p>
<h2 id="加法"><a href="#加法" class="headerlink" title="加法"></a>加法</h2><h3 id="加法的性质"><a href="#加法的性质" class="headerlink" title="加法的性质"></a>加法的性质</h3><p>加法定义为</p>
<script type="math/tex; mode=display">x+y = ((X_L+y)\cup(Y_L+x),(X_R+y)\cup(Y_R+x)) \tag{3}</script><p>显然<strong>交换律</strong>成立：</p>
<script type="math/tex; mode=display">x+y = y+x \tag{T9}</script><p>有<strong>零元</strong>：</p>
<script type="math/tex; mode=display">x+0=x \tag{T10}</script><p>$x+0=(X_L+0,X_R+0)$，从而容易由归纳法证明。</p>
<p><strong>结合律</strong>：</p>
<script type="math/tex; mode=display">x+(y+z) = (x+y)+z \tag{T11}</script><p>用归纳法证明，</p>
<script type="math/tex; mode=display">
\begin{aligned}
    左 = (&((X_L+y)+z)\cup((Y_L+x)+z)\cup(Z_L+(x+y)),
    \\&((X_R+y)+z)\cup((Y_R+x)+z)\cup(Z_R+(x+y)))
\end{aligned}</script><script type="math/tex; mode=display">
\begin{aligned}
    右 = (&(X_L+(y+z))\cup((Y_L+z)+x)\cup((Z_L+y)+x),
    \\&(X_R+(y+z))\cup((Y_R+z)+x)\cup((Z_R+y)+x))
\end{aligned}</script><p>由归纳假设，这六个集合分别相等。</p>
<p>上面证明的命题都是“$=$”的，即集合的元素也完全相同。我们希望上一节中的相似在加法中也适用，即</p>
<script type="math/tex; mode=display">x\equiv y\ \Rightarrow \ x+z\equiv y+z \tag{T12}</script><p>或者，更一般的，</p>
<script type="math/tex; mode=display">x\le y\ \Rightarrow \ x+z\le y+z \tag{T13}</script><p>即是要证明$(X_L+z)\cup(Z_L+x)&lt;y+z$，$x+z&lt;(Y_R+z)\cup(Z_R+y)$。然而这里归纳法只能证明$X_L+z\le y+z$。为了排除$x_L+z\equiv y+z$的情况，我们需要(T13)的逆命题也成立：</p>
<script type="math/tex; mode=display">x+z\le y+z\ \Rightarrow \ x\le y \tag{T14}</script><p>这里需要证明$x_L&lt;y,x&lt;y_R$。而这里归纳法也只能证明$x_L\le y$，这又会导致对(T13)的依赖。<br>一种方法是对$(x,y,z)$的创造日之和做归纳，证明命题“(T13)且(T14)”。不过这会在证明$Z_L+x&lt;y+z$时出现问题：证明$Z_L+x&lt;y+z$需要证明两部分，$Z_L+x\le Z_L+y$和$Z_L+y&lt;z+y$，而后一部分$(z_l,z,y)$的创造日之和不一定小于$(x,y,z)$，于是归纳法失效。</p>
<p>为了解除定理之间的相互依赖，我们使用对称的形式：</p>
<script type="math/tex; mode=display">\mathrm{V}(x,x',y,y'):\qquad x\le x',y\le y'\ \Rightarrow x+y\le x'+y'</script><script type="math/tex; mode=display">\mathrm{VI}(x,x',y,y'):\qquad x+y\ge x'+y',y\le y'\ \Rightarrow x\ge x'</script><p>要使用归纳法证明$\mathrm{V}(x,x’,y,y’)$，即  </p>
<script type="math/tex; mode=display">(X_L+y)\cup(Y_L+x)\ngeq x'+y',x+y \ngeq (X'_R+y)\cup(Y'_R+x)</script><p>类似之前的讨论，我们需要</p>
<script type="math/tex; mode=display">\mathrm{VI}(X_L,x',y,y'),\mathrm{VI}(Y_L,y',x,x'),\mathrm{VI}(x,X_R',y,y'),\mathrm{VI}(y,Y_R',x,x')</script><p>成立。<br>而要证明$\mathrm{VI}(x,x’,y,y’)$，即  </p>
<script type="math/tex; mode=display">x'_L\ngeq x, x'\ngeq X_R</script><p>我们需要  </p>
<script type="math/tex; mode=display">\mathrm{V}(x,X_L',y,y'),\mathrm{V}(X_R,x',y,y')</script><p>成立。<br>注意这时$\mathrm{V}(x,x’,y,y’)$和$\mathrm{VI}(x,x’,y,y’)$所依赖的都是创造日之和小于$(x,x’,y,y’)$的命题。从而这时用归纳法证明“$\mathrm{V}(x,x’,y,y’)$且$\mathrm{VI}(x,x’,y,y’)$”是没有问题的。</p>
<p>在最后，我们要证明的是一个相当基础<del>（过于基础以至于被忘记需要证明）</del>的命题——$x+y$是数。</p>
<p>（需要说明的是，一些定理的证明过程没有依赖规则(1)，从而它们对不满足数的规则的“伪数”也成立，如(T1)(T3)，而本节的(T9)-(T14)和V、VI有些依赖$x$和$y$是数，但没有依赖$x+y$是数。因此在证明过程中使用它们不会构成循环论证。）</p>
<p>这一命题可以不用归纳法直接证明，$x+y$是数即是说</p>
<script type="math/tex; mode=display">(X_L+y)\cup(Y_L+x)\ngeq(X_R+y)\cup(Y_R+x)</script><p>可以拆成四个命题，并可以通过套用$\mathrm{VI}(X_L,X_R,y,y)$，$\mathrm{VI}(X_L,x,y,Y_R)$，$\mathrm{VI}(Y_L,y,x,X_R)$，$\mathrm{VI}(Y_L,Y_R,x,x)$直接证明。</p>
<h3 id="减法"><a href="#减法" class="headerlink" title="减法"></a>减法</h3><p><strong>加法逆元</strong>定义为：</p>
<script type="math/tex; mode=display">-x = (-X_R, -X_L) \tag{4}</script><p>显然有</p>
<script type="math/tex; mode=display">x=-(-x) \tag{T16}</script><p>我们先不证明$-x$是数，注意后面的定理中也不会用到这一条件。</p>
<p><strong>减法</strong>即定义为和逆元的加法：</p>
<script type="math/tex; mode=display">x-y = x+(-y) \tag{5}</script><p>下面证明</p>
<script type="math/tex; mode=display">x-x\equiv 0 \tag{T15}</script><p>这即是证明</p>
<script type="math/tex; mode=display">((X_L+(-x))\cup((-X_R)+x),(X_R+(-x))\cup((-X_L)+x)) \equiv 0</script><p>即$x_L+(-x)\ngeq 0,(-x_R)+x\ngeq 0,x_R+(-x)\nleq0,-x_L+x\nleq0$。<br>利用归纳法证明，若$x_L+(-x)\ge 0$，则$(-X)_R+x_L=-X_L+x_L&gt;0$。这与归纳假设$x_L-x_L\equiv0$矛盾，从而$x_L+(-x)&lt;0$成立。类似的方法也可以证明另三个条件。</p>
<p><em>（(T15)说明减法并不是严格的加法的逆运算——因为这里是“$=$”而不是“$\equiv$”，只有在相似的意义上考虑它们才是逆运算，这也在后面的(T17)中体现。不过从下一节开始我们将只会考虑“$\equiv$”。）</em></p>
<p>下面的定理可以由我们已经得到的定理来推出，而不必还原到基本定义了：</p>
<script type="math/tex; mode=display">(x+y)-y \equiv x \tag{T17}</script><p>证明：$(x+y)-y = x+(y-y) \equiv x+0 = x$。</p>
<script type="math/tex; mode=display">-(x+y) = (-x) + (-y) \tag{T18}</script><p>证明：$-(x+y) = 0-(x+y) = (x-x)+(y-y)-(x+y) = -x-y$</p>
<script type="math/tex; mode=display">x\le y\ \Rightarrow \ -y\le -x \tag{T19}</script><p>证明：$x\le y\Rightarrow x-y-x\le y-y-x \Rightarrow -y\le -x$<br>有了(T19)，$-x$是数就是显然的了。</p>
<h2 id="实数"><a href="#实数" class="headerlink" title="实数"></a>实数</h2><h3 id="数的构造规律"><a href="#数的构造规律" class="headerlink" title="数的构造规律"></a>数的构造规律</h3><p>现在我们来考虑实数是如何构造出来的。我们看到无论是序关系还是加减法运算下，相似的数之间并无什么差别，于是在考虑数如何被构造出来的时候我们也只考虑一组相似的数之中的一个。因此我们需要判断两数相似的判据，比如下面的定理：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \mathrm{if}\qquad &Y_L < x < Y_R
    \\ \mathrm{then}\qquad &x\equiv (X_L\cup Y_L, X_R\cup Y_R)
\end{aligned}
\tag{T7}</script><p>（这是符合直觉的，由于数集上有线性序，可以认为数$x$在$X_L$和$X_R$的中间，而在$x$的两边增加一些元素也不会影响$x$的位置）</p>
<p>令$z=(X_L\cup Y_L, X_R\cup Y_R)$。由(T2’)显然有$Z_L=X_L\cup Y_L&lt; x$，$z&lt;z_R\Rightarrow z&lt;X_R$，即$z\le x$。$z\ge x$也易证。从而$x\equiv z$。</p>
<p>进一步的，我们有一个大胆的猜测：若在第$n$日时彼此不相似的数为</p>
<script type="math/tex; mode=display">x_1 < x_2 < \cdots < x_m</script><p>则第$n+1$日创造出的新数只有：</p>
<script type="math/tex; mode=display">\left(\emptyset,\left\{x_{1}\right\}\right),\left(\left\{x_{1}\right\},\left\{x_{2}\right\}\right), \ldots,\left(\left\{x_{m-1}\right\},\left\{x_{m}\right\}\right),\left(\left\{x_{m}\right\}, \emptyset\right)</script><p>要证明这一猜想，由(T7)，只需要考察$x_1\cdots x_m$中两个数构造出的数$(\left{x_{i-1}\right},\left{x_{j+1}\right})$，证明其相似于上面的某一数。</p>
<p>为此，我们可以证明下面这个更一般性的定理：</p>
<script type="math/tex; mode=display">
\begin{aligned}
    \quad &若x是满足Y_L<x<Y_R的首个创造出来的数，
    \\ &则x\equiv y。
\end{aligned}
\tag{T8}</script><p>由于$x_L$和$x_R$比$x$更早创造，从而$Y_L&lt;x_L&lt;Y_R$和$Y_L&lt;x_R&lt;Y_R$不成立，且$x_L&lt;x&lt;x_R$，从而存在$y_L,y_R$，使$x_L&lt;y_L&lt;y&lt;y_R&lt;x_R$。故$x$满足(T7)的条件，从而$x\equiv y$。 </p>
<p>从而$(\left{x_{i-1}\right},\left{x_{j+1}\right})$相似于$x_i\cdots x_j$中最先被创造的数，不是一个新数。</p>
<h3 id="有限天内可以创造的数"><a href="#有限天内可以创造的数" class="headerlink" title="有限天内可以创造的数"></a>有限天内可以创造的数</h3><p>我们有第一天构造的数</p>
<script type="math/tex; mode=display">0=(\emptyset,\emptyset)</script><p>以及第二天</p>
<script type="math/tex; mode=display">-1=(\emptyset,\{0\}),\qquad 1=(\{0\},\emptyset)</script><p>（容易验证$-1$是$1$的加法逆元，我们采用的记号是没问题的）</p>
<p>那么第三天创造的数就有：</p>
<script type="math/tex; mode=display">(\emptyset,\{-1\}),(\{-1\},\{0\}),(\{0\},\{1\}),(\{1\},\emptyset)</script><p>试着做一下加法：</p>
<script type="math/tex; mode=display">1+1=(\{0+1\},\emptyset)=(\{1\},\emptyset)</script><p>我们把$1+1$定义为$2$，即$2\equiv ({1},\emptyset)$。<br>而对$b=({0},{1})$，</p>
<script type="math/tex; mode=display">b+b=(\{0+b\},\{1+b\})=(\{b\},\{1+b\})</script><p>由于$0&lt;b&lt;1$，$1$就是$b$和$1+b$之间最早创造出来的数，由(T8)，$b+b\equiv 1$，从而可以称$b\equiv\frac{1}{2}$。<br><img src="number-creation.png" alt=""></p>
<p>我们看到数的构造似乎有这样的规律，对在第$n$天已经创造出来的数中相邻的两个数$x_i,x_{i+1}$，由它们创造的数$y=({x_i},{x_{i+1}})$满足$y+y=x_i+x_{i+1}$。因此我们假设在第$n$天所有被创造出来的数为：</p>
<script type="math/tex; mode=display">0,\pm\frac{1}{2^{n}},\cdots,\pm 1,\pm\left(1+\frac{1}{2^{n-1}}\right),\cdots,n+1</script><p>（为了方便，这里我们称$1$和$-1$被创造出来的那天为第$0$天。）<br>（即$0-1$之间是$\frac{i}{2^n}$，$1-2$之间是$1+\frac{i}{2^{n-1}}$······当然我们还没定义乘法和乘方，这里的$\frac{k}{2^n}$可以递归地定义为满足$\frac{k}{2^n}+\frac{k}{2^n}=\frac{k}{2^{n-1}}$的数，其唯一性容易验证，而$\frac{k}{2^0}=k$。）</p>
<p>这一假设等价于在第$n$天创造出来的数</p>
<script type="math/tex; mode=display">n-i+\frac{k}{2^i} \equiv \left(\left\{n-i+\frac{(k-1)/2}{2^{i-1}}\right\}, \left\{n-i+\frac{(k+1)/2}{2^{i-1}}\right\}\right)</script><p>（$k$是奇数，否则会更早被创造出来）</p>
<p>用归纳法证明这一假设，分两步进行。首先考虑</p>
<script type="math/tex; mode=display">1+x = ((1+X_L)\cup\{x\}, 1+X_R)</script><p>根据归纳假设，对已经得到的所有数$x$其左集中都可以找到$x_L$使$1+x_L\ge x$，从而上式可以化简为</p>
<script type="math/tex; mode=display">1+x = (1+X_L, 1+X_R)</script><p>于是$n+1$日创造的所有大于1的数就是第$n$日的所有数加1，即这一假设大于1的部分得到证明。</p>
<p>第二步我们考虑$0-1$内相邻的两数$\frac{k}{2^n}$和$\frac{k+1}{2^n}$，由它们构造的新数$y=({\frac{k}{2^n}},{\frac{k+1}{2^n}})$，有</p>
<script type="math/tex; mode=display">y+y = \left(\left\{ \frac{k}{2^n}+y \right\}, \left\{ \frac{k+1}{2^n}+y \right\}\right)</script><p>从而</p>
<script type="math/tex; mode=display">(y+y)_L< \frac{2k+1}{2^n} < (y+y)_R</script><p>若$2k+1\le 2^n$，则由归纳假设$\frac{2k+1}{2^n}$在第$n$日已被创造出来，且是唯一满足上式的数；若$2k+1&gt;2^n$，则前面一段已经证明了它会在第$n+1$日创造出来，且也是唯一满足上式的数。从而由(T8)，</p>
<script type="math/tex; mode=display">y+y \equiv \frac{2k+1}{2^n}</script><p>即</p>
<script type="math/tex; mode=display">y\equiv \frac{2k+1}{2^{n+1}}</script><p>我们的假设在$0-1$的部分也得到证明。</p>
<h3 id="aleph-天创造的数"><a href="#aleph-天创造的数" class="headerlink" title="$\aleph$天创造的数"></a>$\aleph$天创造的数</h3><p>我们已经得到有限日内所能创造的数的规律，它们所代表的实数似乎都可以表示成整数除以$2^n$。或者说，它们用二进制表达都是有限位的。而形如</p>
<script type="math/tex; mode=display">\frac{1}{3}=0.010101\dots</script><p>的数不能在有限天内构造出来。从定义来看这也是必然的，我们无法通过有限次迭代创造所有实数。</p>
<p>不过我们可以考虑无限集合，让左集从小的方向逼近</p>
<script type="math/tex; mode=display">X_L=\{0.01,0.0101,\cdots\}</script><p>而右集从大的方向逼近$\frac{1}{3}$</p>
<script type="math/tex; mode=display">X_L=\{1,0.1,0.011,\cdots\}</script><p>我们就可以将其构造出来：</p>
<script type="math/tex; mode=display">\frac{1}{3}=(X_L,X_R)</script><p>于是我们在第$\aleph$天得到了所有实数（因为任何一个实数都可以写成一串二进制数）</p>
<p>还不仅如此，我们可以考虑：</p>
<script type="math/tex; mode=display">\omega = (\{1,2,3,\cdots\},\emptyset)</script><p>和</p>
<script type="math/tex; mode=display">\epsilon = \left(\left\{0\right\}, \left\{1,\frac{1}{2},\frac{1}{2^2},\cdots\right\}\right)</script><p>$\omega$比任何实数都要大，而$\epsilon$严格大于零，却小于任何实数。我们得到了<strong>无穷大</strong>和<strong>非零的无穷小</strong>！  </p>
<p>考虑$\omega$的一些性质：</p>
<ul>
<li>在$\alef+1$天，我们可以创造出：<script type="math/tex; mode=display">\omega+1 = (\{\omega\},\emptyset)</script>它比$\omega$还要大。以及<script type="math/tex; mode=display">\omega-1 = (\{1,2,\cdots\},\{\omega\})</script>它比任何正实数大，但小于$\omega+1$。</li>
<li>在$2\alef$天，我们将得到<script type="math/tex; mode=display">2\omega = (\{\omega+1,\omega+2,\cdots\},\emptyset)</script></li>
<li>在$\alef^2$天，我们将得到<script type="math/tex; mode=display">\omega^2 = (\{\omega,2\omega,\cdots\},\emptyset)</script></li>
<li>以及<script type="math/tex; mode=display">\omega^\omega = (\{\omega,\omega^2,\cdots\},\emptyset)</script></li>
</ul>
<p>只要不停下来，数就会不断延伸<br><img src="dont-stop.png" alt=""></p>
<p align="center">
だからよ、止まるんじゃねぞ（指造数）
</p>

<h3 id="重新考虑归纳法"><a href="#重新考虑归纳法" class="headerlink" title="重新考虑归纳法"></a>重新考虑归纳法</h3><p>我们这里需要重新考虑针对创造日的归纳法，对所有自然数有效的归纳法在无穷及无穷之后的天数不一定有效。</p>
<p>不过我们可以这样考虑归纳法，我们使用归纳法时事实上是在说，若命题对$x$不成立，则存在$x’\in X_L\cup X_R$，命题对$x’$也不成立。这将会形成一个数列，后一个数属于前一个数的左集或右集。对有穷的数，这将会终结于空集；但对无穷的数，这将会形成一个无穷祖先数列。而事实上，对我们的创造每一个数，它都不可能是无穷祖先数列的起始元素，因为它的左集和右集中不存在违反待证命题的元素。</p>
<p>不过这番论证似乎还是在用归纳法证明归纳法，我们似乎需要将其视为某种公理来保证归纳法的合理性，同时也是形式地表达在定义新数$x=(X_L,X_R)$时$X_L$和$X_R$的元素是“已经存在的数”的含义。</p>
<p>（这段完全是复读原书）</p>
<p><img src="AB.png" alt=""></p>
<p align="center">
（AB天下第一！）
</p>

<h2 id="乘法"><a href="#乘法" class="headerlink" title="乘法"></a>乘法</h2><p>$x$和$y$的乘法$xy$的左集为所有形如</p>
<script type="math/tex; mode=display">x_Ly+xy_L-x_Ly_L \qquad 或 \qquad x_Ry+xy_R-x_Ry_R</script><p>的数，右集为所有形如</p>
<script type="math/tex; mode=display">x_Ly+xy_R-x_Ly_R \qquad 或 \qquad x_Ry+xy_L-x_Ry_L</script><p>的数。</p>
<p>显然<strong>交换律</strong></p>
<script type="math/tex; mode=display">xy=yx \tag{T20}</script><p>成立，有<strong>零元</strong></p>
<script type="math/tex; mode=display">0x=x \tag{T21}</script><p>，<strong>幺元</strong></p>
<script type="math/tex; mode=display">1x=x \tag{T22}</script><p>且</p>
<script type="math/tex; mode=display">-(xy)=(-x)y \tag{T23}</script><p>运用我们之前在证明(T13)和(T14)时的归纳法，我们还应该可以证明</p>
<script type="math/tex; mode=display">x(y+z) \equiv xy+xz \tag{T25}</script><script type="math/tex; mode=display">x(yz) \equiv (xy)z \tag{T26}</script><script type="math/tex; mode=display">x>x',y>y' \Rightarrow (x-x')(y-y')>0 \tag{T26}</script><p>同时我们有几个有趣的结果：</p>
<script type="math/tex; mode=display">\epsilon\omega = 1</script><script type="math/tex; mode=display">\frac{1}{2}\omega = \left(\left\{1,2,3,\cdots\right\}, \left\{\omega-1,\omega-2,\omega-3,\cdots\right\} \right)</script><script type="math/tex; mode=display">\sqrt{\omega} = \left(\left\{1,2,3,\cdots\right\}, \left\{\frac{\omega}{1},\frac{\omega}{2},\frac{\omega}{3},\cdots\right\} \right)</script><script type="math/tex; mode=display">\sqrt{\epsilon} = \left(\left\{\epsilon,2\epsilon,3\epsilon,\cdots\right\}, \left\{\frac{1}{1},\frac{1}{2},\frac{1}{3},\cdots\right\} \right)</script><blockquote>
<p>需要做的事情是无穷的，时间却是有限的······</p>
</blockquote>
</body></html>]]></content>
      <categories>
        <category>数学</category>
      </categories>
      <tags>
        <tag>数学</tag>
      </tags>
  </entry>
  <entry>
    <title>在树莓派上搭建NAS——教程和踩坑合集</title>
    <url>/2022/01/22/202201-NAS-on-raspi/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><h2 id="原由"><a href="#原由" class="headerlink" title="原由"></a>原由</h2><p>我了解到NAS这个东西是21年夏天的时候，那时候正好也是我对存储空间的需求快要超过电脑的硬盘的容量的时候。总的来说我觉得NAS是必要的的原因在两点——一是曾经丢过一次数据导致的备份不足恐惧症，二是最近B站这一系列操作让我意识到的把自己需要的东西放在除了自己的硬盘上的任何地方都是靠不住的。也因此我搭建NAS的目的也就是这两个：方便地备份电脑上的文件，以及存储并随时获取总量不小的动画文件。</p>
<p>这里我不费笔墨详细介绍NAS是什么了，因为会认真看这篇文章的人应该也不需要我介绍。只是要说明一点，自建NAS并不是任何情况下的最优解，所需的硬件设备的价格并不是很低（这里我用的是树莓派+硬盘DIY，如果买成品NAS的话价格会更高），折腾起来也确实比较费时间，以及后面还可能会有维护服务器和硬盘等需要费功夫。我选择自搭NAS的原因除了硬的需求之外，也有一部分就是单纯地觉得这样比较酷，搭起来是个比较有成就感的事。现在我的NAS平稳运行了几个月，给我带来的方便确实是挺大的。我额外加这一段的原因就是强调一下，我不确定是否应该推荐每个人都自搭一个NAS。不过如果你确定这是你真的需要的，那么这篇文章里记录的教程和踩坑合集可能会对你有帮助。</p>
<h2 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h2><h3 id="树莓派"><a href="#树莓派" class="headerlink" title="树莓派"></a>树莓派</h3><p>树莓派在淘宝京东上都很容易就能买到，我买的是目前最新（也是最高性能的）树莓派4B 8G内存版，在别处又买了金属外壳+散热风扇+电源线的套装。有的会卖外接屏幕和键盘，这个没什么用，树莓派本就是买来当做服务器，用ssh连接上去就完全可以操作，没必要额外花钱。另外需要买一个TF卡（micro SD卡，就是以前的手机用的存储卡）作为树莓派的存储，TF卡价格不贵，可以买一个容量大一点的，后面部署docker服务还是需要一些空间的，我现在用的是64G的卡。（在京东搜的时候加上关键词树莓派会贵个几十块钱，不知道为啥）</p>
<p>安装树莓派系统网上有很多教程，随便找一个就行了。因为要用SSH远程登录，在开机前要注意写好连接WiFi的配置文件。我手上的树莓派只能连接2.4GHz频段并需要关闭第六代技术标准，另外带中文的SSID也连接不上。</p>
<h3 id="硬盘"><a href="#硬盘" class="headerlink" title="硬盘"></a>硬盘</h3><p>机械硬盘是很娇贵的东西，突然断电就可能导致硬盘数据读取头划伤盘片，因此对硬盘的供电需要格外注意。有这样的说法，树莓派的USB接口供电不足以带起硬盘，因此直接连硬盘是比较危险的。另外NAS肯定是需要多块硬盘组阵列的，如果用USB集线器之类的东西把本就功率有限的电源再分开就更危险了，因此我买了一个独立供电的硬盘柜，通过USB接口连接到树莓派上。</p>
<p>raid方案的选择参考了知乎上的<a href="https://zhuanlan.zhihu.com/p/48527909">这篇文章</a>。我的选择是snapraid，因为我的工作还是要在电脑上完成的，新生成的文件本就不会实时同步到NAS，每天从电脑同步一次的频率就完全够了，因此用snapraid每天建立一次快照就够了。而snapraid就算一块盘彻底损坏也不会影响阵列中其他盘的数据（不像硬件RAID将所有数据都分块放在不同盘里），比较满足风险厌恶的选择。另外，snapraid不需要阵列中盘的大小都是一致的，只需要一块容量最大的盘作为校验盘，因此对于后续扩充也更加灵活。</p>
<p>我对硬盘的品牌不是很熟悉，买的是据说适合做NAS的西数红盘。我总共买了三块盘，两块4T的和一块1T的，其中一块4T的盘做校验盘，另外两块存放数据。使用mergerfs可以很方便地将两块盘在逻辑上当成一整块来用。（mergerfs生成的挂载路径不方便输入，可以建立一个软链接链接到mergerfs路径，这样不仅方便输入和记忆，在重启后重新挂载硬盘也只需要修改链接的目标地址，不需要重新配置存储在硬盘上的服务）</p>
<h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><h3 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h3><p>成功联网开机后的树莓派就可以被相同局域网内的设备访问到了，但如果不在同一局域网下的设备试图连接到树莓派的ip则会失败。这是因为树莓派只有局域网的ip而没有公网ip，如果其想要访问一台公网上的服务器，那么路由器会将其ip转换为自己的ip，并专门分配一个端口给树莓派用于接收服务器的响应，而与其不在同一个局域网中的主机想要直接访问内网里的树莓派是做不到的，因为树莓派在内网的ip在公网上没有意义。这个过程就是NAT转换。因此，为了访问到在内网中的树莓派，我们需要做一些额外的操作，这被称为内网穿透。</p>
<p>frp等软件通过让一个有公网ip的服务器直接转发到内网设备的网络流量来实现内网穿透，这种方法虽然简单但需要租服务器，从NAS的流量都要经服务器转发，意味着也需要支付大量流量的费用，同时也传输速度也受限于服务器的带宽。而<a href="https://www.zerotier.com/">Zerotier</a>则是试图让两台内网设备通过打洞直接连接，这样传输速度可以达到理论上限。不过实际中穿过多层NAT的打洞可能失败，此时流量就会由zerotier的服务器进行转发，由于其位于国外，转发速度就十分慢。对于这一情况可以在zerotier虚拟网络中加入一台有公网ip的moon服务器，在打洞不成功时由moon转发。目前我手上只有AWS给新用户免费一年的服务器，由于也是在国外，连接速度也很慢，没法看出moon的作用。今年在搬瓦工租台有国内连接优化的服务器后可以再看moon的效果。</p>
<h3 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h3><p>如果NAS没有公网ip的话，也不用特意打开防火墙，毕竟能访问到它的都是自己的设备。我的情况是NAS连接了宿舍的校园网，在校内能直接访问到，所以需要额外考虑一下安全问题。我是用的是Ubuntu自带的防火墙ufw，它是基于linux的iptables的一个简化的防火墙应用，可以允许/阻断特定的ip、端口、网络等的网络请求。我的设置是默认允许所有出站访问、阻断所有入站访问，在额外添加允许来自zerotier虚拟网络和访问v2ray端口的访问。另外保险起见，为了这些服务出问题时还能连接上，又额外允许了22端口（SSH）。</p>
<p>在同一局域网下改如何访问的问题困扰了我一段时间，因为设备连校园网都没有固定ip，没法通过允许特定ip访问的方式允许自己的设备登录。一开始我是只开放了zerotier的虚拟网络的访问，即即使在同一个局域网下也走内网穿透，但如上面所述zerotier打洞并不能每次都成功，因此使用体验并不是很好。愁了一段时间之后我意识到，这不就是VPN本来的用处嘛……在NAS上运行个v2ray，开放v2ray的端口的访问就好了，这样在内网里就是内网的速度，而且在校园网内网络流量还是加密的，更加安全了。一个东西被用来干别的事太多，本来的用处反倒被忘记了，还挺奇妙的。</p>
<h3 id="OpenMediaVault"><a href="#OpenMediaVault" class="headerlink" title="OpenMediaVault"></a>OpenMediaVault</h3><p>NAS系统我选择的是开源的OpenMediaVault，在其web UI上可以进行一些基本的系统管理、文件共享服务的配置等。OMV可以作为操作系统直接烧到存储卡上，也可以只是作为一个软件安装。我的选择是后者，因为树莓派毕竟除了NAS之外也可以作为一个服务器跑点别的东西，需要的东西OMV系统里不一定有。</p>
<p>OMV web UI运行在80端口，安装好后在浏览器输入NAS的ip就可以访问到。需要OMV中进行的配置为:</p>
<ul>
<li>在“文件系统”中挂载硬盘</li>
<li>开启SMB共享服务，并创建一个专门用于登录SMB的用户，设置只允许这个用户查看和修改SMB共享的文件。</li>
<li>在插件部分OMV-Extras可以搜索安装snapraid和mergerfs的插件，进行相应配置。</li>
<li>在OMV-Extras中安装docker和portainer（docker的web UI），后面的服务部署都利用docker进行。</li>
</ul>
<p>上面的配置过程都容易找到教程且没遇到什么坑，在web UI里操作也很方便，这里我就不放链接了。</p>
<h3 id="qBittorrent"><a href="#qBittorrent" class="headerlink" title="qBittorrent"></a>qBittorrent</h3><p>使用NAS的最直接动机就是要存动画，所以最先要配置的自然是下载动画要用的BT服务。之前在电脑上一直用的是开源的qBittorrent，各方面都比较舒服，而且由于有web UI，所以在NAS上也就使用qBT了。</p>
<p>qBT的安装参考的是<a href="https://zhuanlan.zhihu.com/p/363378341">这篇教程</a>，在portainer中操作就是新建一个stack，然后把docker compose的文本复制进去就行。需要注意的是教程里面要映射的用户应该是有读写挂载的硬盘的权限的用户，我最开始映射的是树莓派的默认用户，结果没法下载。</p>
<p>另外，qBT支持RSS订阅，这对于下载新番非常方便。在<a href="https://mikanani.me/">蜜柑计划</a>上订阅番剧可以直接生成RSS订阅链接，将这一链接输入qBT的RSS订阅（位于界面右上角RSS选项卡），在每次查看时即可自动获取未下载的新番链接。</p>
<h3 id="NextCloud"><a href="#NextCloud" class="headerlink" title="NextCloud"></a>NextCloud</h3><p>这部分是我配置得最艰难的部分，根本的原因在于我的树莓派的CPU架构是armv7l（或armhf），而我查到的所有教程在这个CPU上都会存在或多或少的问题导致follow不下去。这里就不参考别人的教程，针对armv7l架构给出我自己的解决方案。</p>
<p>nextcloud数据的存储使用MySQL完成，因此运行nextcloud的镜像之前需要搭建好MySQL服务。对于armv7l架构，可用的数据库是可兼容MySQL的mariadb，在dockerhub中可用的镜像是<code>yobasystems/alpine-mariadb</code>。通过docker的enviroment设置容器的环境变量可以在MySQL镜像建立时创建用户和数据库。需要注意的是容器启动后要登录进去，手动把nextcloud数据库用户的<code>host</code>设成<code>%</code>，这样在另一个容器的nextcloud才能访问得到mariadb服务。如果使用MySQL应该是不用进行这个设置的。</p>
<p>更多的问题出在nextcloud本体，我在搭建过程中遇到的问题有：</p>
<ul>
<li><p>端口问题：我看到的教程中说要把nextcloud的80端口映射出来就能访问到，但是我配置的时候映射出来80端口并访问不到。nextcloud是https服务，是运行在443端口的，把443端口映射出来才能成功访问。</p>
</li>
<li><p>权限问题：第一次构建会提示把数据目录的权限设成0770，设置后却会提示读不了数据目录。这是因为数据目录的所有者是root，权限设为0770之后nextcloud就会没有权限访问。解决方法是进入nextcloud镜像后运行top查看nextcloud进程的创建者（我这里是<code>abc</code>），然后用<code>chown</code>命令将这个用户设置成数据目录的所有者。在找解决方法时我发现似乎别人的情况这个用户应该是<code>www-data</code>，属于用户组<code>www-data</code>，也有说要改用户<code>nginx</code>的权限的，保险起见我就把<code>abc</code>和<code>nginx</code>用户全都放到<code>www-data</code>用户组里面了，最后解决的方法是：</p>
<figure class="highlight haskell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="title">usermod</span> -g abc www-<span class="class"><span class="keyword">data</span></span></span><br><span class="line"><span class="title">chown</span> -<span class="type">R</span> abc:www-<span class="class"><span class="keyword">data</span> 数据目录</span></span><br><span class="line"><span class="title">chmod</span> -<span class="type">R</span> <span class="number">0770</span> 数据目录</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>配置文件：需要手动设置信任的域名，否则会显示<br><img src="nc-error1.png" alt=""><br>但这里并没有给出配置文件的位置，我查日志发现配置文件位于（nextcloud容器内的）<code>/config/www/nextcloud/config/config.php</code></p>
</li>
</ul>
<p>综合了上面的因素，docker compose的配置文件为：</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">version: <span class="string">'2.0'</span></span><br><span class="line">services:</span><br><span class="line">  db:</span><br><span class="line">    image: yobasystems/alpine-mariadb:<span class="number">10.4</span>.<span class="number">17</span></span><br><span class="line">    container_name: nextcloud-mysql</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="number">3306</span>:<span class="number">3306</span></span><br><span class="line">    restart: always</span><br><span class="line">    environment:</span><br><span class="line">      - MYSQL_ROOT_PASSWORD=****  <span class="comment"># Requested, set the root's password of MySQL service.</span></span><br><span class="line">      - MYSQL_LOG_CONSOLE=true</span><br><span class="line">      - MYSQL_DATABASE=nextcloud</span><br><span class="line">      - MYSQL_USER=nextcloud</span><br><span class="line">      - MYSQL_PASSWORD=****</span><br><span class="line">    volumes:</span><br><span class="line">      - <span class="regexp">/srv/</span>MergerDisk<span class="regexp">/nextcloud-mysql/</span>db:<span class="regexp">/var/</span>lib/mysql  <span class="comment"># Requested, specifies the path to MySQL data persistent store.</span></span><br><span class="line"></span><br><span class="line">  nextcloud:</span><br><span class="line">    image: linuxserver/nextcloud:latest</span><br><span class="line">    container_name: nextcloud</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="number">8888</span>:<span class="number">80</span></span><br><span class="line">      - <span class="number">443</span>:<span class="number">443</span></span><br><span class="line">    links:</span><br><span class="line">      - db</span><br><span class="line">    volumes:</span><br><span class="line">      - <span class="regexp">/srv/</span>MergerDisk<span class="regexp">/nextcloud/</span>config:<span class="regexp">/var/</span>www<span class="regexp">/html/</span>config  <span class="comment"># 配置</span></span><br><span class="line">      - <span class="regexp">/srv/</span>MergerDisk<span class="regexp">/nextcloud/</span>data:<span class="regexp">/var/</span>www<span class="regexp">/html/</span>data  <span class="comment"># 云盘文件</span></span><br><span class="line">      - <span class="regexp">/srv/</span>MergerDisk<span class="regexp">/nextcloud/</span>apps:<span class="regexp">/var/</span>www<span class="regexp">/html/</span>apps  <span class="comment"># 插件</span></span><br><span class="line">      - <span class="regexp">/srv/</span>MergerDisk:/Disk</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line">    restart: always</span><br><span class="line">    depends_on:</span><br><span class="line">      - db</span><br></pre></td></tr></tbody></table></figure>
<p>其中<code>/srv/MergerDisk</code>是指向mergerfs创建的合并数据盘挂载点的链接，和配置qBT时一样，这里要把mariadb和nextcloud的存储路径映射到硬盘上。</p>
<p>另外，如果哪里出了问题需要重新构建整个服务的话，要记得把nextcloud和mariadb两个容器的数据都清空。我在没弄好权限问题时就创建了nextcloud用户，结果没法进入初始化界面，只好重新创建整个容器。但删除docker挂载的目录并重新创建之后之前创建的用户信息居然还在，让我一度怀疑是不是赛博闹鬼事件……这实际上是因为用户信息是存在mariadb里的，要完全重新构建要把那边的数据也清除。</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>我使用NAS的场景为：多设备数据备份和媒体文件（动画）共享，下面简要说一下具体都是怎么实现的。</p>
<p>首先是电脑端的数据备份。Windows对SMB有原生的支持，可以通过添加网络驱动器将SMB共享的当做一个本地磁盘直接挂载到Windows的文件系统里，这样处理NAS的硬盘就像处理本机的硬盘一样方便了。我使用FreeFileSync进行文件备份，这是一个开源软件，可以将扫描指定的目录下的所有文件并同步到指定的另一个目录下，并可以自己指定文件的忽略规则（类似gitignore）。FreeFileSync是我还在使用移动硬盘一周一冷备份数据的时候就一直在用的软件，由于Windows对SMB协议的支持，向NAS的备份也可以无缝转移。</p>
<p>对于移动端，主要需要备份的数据是照片和视频，对这一点nextcloud官方的APP实现了支持。将需要备份的相册对应的文件夹加入nextcloud的自动上传文件夹里（设置-&gt;自动上传）即可实现照片的实时备份。其他的云服务，比如iPad上笔记软件Notability的笔记自动备份，也可以通过连接到nextcloud的WebDAV服务实现（notability支持配置自定义WebDAV）。</p>
<p>对于媒体文件的共享，只要把qBT的下载目录放到SMB共享目录内，在各终端安装支持SMB的播放器即可。对于Windows用看本地的视频的播放器就可以直接播放，不过需要注意的是有的播放器播放SMB共享的视频可能不会将其当做流媒体播放，而是整个文件下载到本地，我通过查看任务管理器的网络占用发现potplayer好像就是这么做的（并不确定）。由于我看的都是动画，用的是一款专门的软件<strong>弹弹play</strong>，支持自动检测动画文件对应的作品名并进行分类，同时综合了各大视频网站的弹幕源，在播放本地动画视频时也可以看到弹幕。弹弹play播放SMB共享的动画是按照流媒体播放的，所以这是我在电脑端看动画的选择。弹弹play在安卓和iOS都有客户端，不过移动端对于部分视频格式没法正常解码。这种情况下我使用的是ES文件浏览器，可以查看和操作本地文件的同时也支持SMB等网络文件共享协议，ES浏览器自带的播放器可以播放SMB共享的视频和音频文件。另外，在多终端通过SMB共享NAS上的文件也就实现了不同终端的文件共享。</p>
</body></html>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>2021年度总结——ACG部分</title>
    <url>/2022/02/07/2021-review-ACG/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>本文是2021年度总结的一部分，关于我在2021年看过的ACG作品（几乎都是动画）进行一些简要的评价和讨论。</p>
<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><h3 id="一月番"><a href="#一月番" class="headerlink" title="一月番"></a>一月番</h3><p><img src="01-WonderEggPriority.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>Wonder Egg Priority</strong>：只能说非常地可惜。蛋确实是让我寄予了很重的期望，从第一话就能看出来它确实是属于直戳我好球区的特别那类的：整体是如在梦境中一般的意识流演出，尤其是不同场景之间流畅又不合常理的转换和做梦有着强烈的相似，画面的色彩等元素也是十分的大胆，一整话下来的演出流畅且有足够的张力，让我看得非常之享受。之后也有3话、5话、7话、11话、12话等作为单回我认为演出十分优秀、观感非常好的回，虽然也有9话这样观感比较奇怪、割裂感严重的回，但总体来说全12话的平均水平也是相当不错的。我的关注点主要在演出上，而可惜就可惜在最后剧情写了一堆收不回来甚至没篇幅处理的东西，强行解释本没必要解释的东西去扩大设定，导致整部作品只能是不完备的甚至残缺的。虽然剧本的暴走不会破坏前面的优秀的演出带给我的好的观感，但这终究使蛋成为了一部存在这样的缺陷的动画，我只能说非常的可惜，但总体的说，虽然这很让我伤心，但我并不后悔爱过这部动画。</p>
<p><img src="01-HatarakuSaibou.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>工作细胞Black</strong>：本来我是打算工作细胞第二季和Black都看的，但我发现自己看不下去前者的日常氛围了，可能是最近越来越不想看没事就撒狗粮的番或者是别的什么原因，总之我最后追下去的就只有Black了。我对这部动画整体的感觉是中规中矩，既没有什么可以说的缺陷也没什么太大的亮点，属于可以随波逐流地看下去的类型。一个重要的让它与众不同的点就是它的题材，我愿称其为现代寓言——对我这样身体素质不咋地，可能有点不那么健康的人来说没法完全事不关己地当chubbyemu视频看（虽然那我不喝酒不抽烟，片里那些病也没得过），看完还是会觉得应该对自己身体更上心一些，想来这个效果应该也是作者会希望的吧。</p>
<p><img src="01-Kyojin4part1.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>进击的巨人第四季 part1</strong>：这里暂且只说动画。第四季和之前观感上确实有些不同，不知是换了制作公司的原因还是作品整体上的风格转变，宏大叙事浓度超标的原因。我的感觉是更“硬”了，和原作漫画一致的部分更多，而没有更多适合动画的新东西在里面，因此整个观感只能说是动起来的、有声的漫画。当然漫改动画都会存在这种类似的被原作限制给不出最适合动画的表现的问题，但是有前三季这样优秀的动画化先例在，我想本是可以要求更多的。（另外，3D巨人是真滴难看）</p>
<p><img src="01-Beastars2.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>Beastars 第二季</strong>：和第一季主旋律的青春少狼的情感戏不同，第二季的重点回到食杀案之后可以看到更多只在本作的食肉食草动物共存的世界观才能存在的东西。具体的内容记不太清了，不过整体的观感是不错的。顺带一提3D的水平是真的不错，看着舒服到不觉得是3D。</p>
<p><img src="01-Neverland2.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>约定的梦幻岛 第二季</strong>：我曾经看过梦幻岛的原作的一部分，那时的感觉是从逃出设施开始作品整体就开始逐渐转型成超能力战斗了，给我的观感比较奇怪，大概看了几十话之后就不往下看了，因此也没看到什么在动画第二季不希望删减的部分，也因此并没有体会到原作读者对这个大幅度删减的恼火感。不过就算只考虑动画本身，第二季的观感也仍然不咋地，其原因也十分的典——非要去搞解决不了的“大”问题，宏大叙事驱使角色个人行动，推进只靠长篇大论的无聊嘴炮——真心希望少搞点这个，差不多该退环境了吧。</p>
<h3 id="四月番"><a href="#四月番" class="headerlink" title="四月番"></a>四月番</h3><p><img src="04-OddTaxi.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>Odd Taxi</strong>：我自己管它叫做奇（ji）车。整体上来说奇车描绘的是比较现实的内容，有不少评论说它的剧本比起动画更像是一部日剧，但在表现上它又恰恰选取了最不现实的形式——即动物拟人来表现。即使最后揭露了这是因为主角小户川实际上是由于精神问题才把人看成动物，但这仍然不影响在这里之前本片的内容都是在动物的皮下演出的（顺带一提我不咋喜欢这个设定，而且就算是在剧情上看也很难说它起了什么重要意义，我的感觉是有点画蛇添足）。这正是我觉得这部动画精妙的部分，这种现实和非现实的界限被打破带来的感觉才是这部动画所独有的，也是因此它一定得是动画才行。（采用动物拟人或许也可以有人某些时候就会退化成由欲望和本能支配的动物的理解，不过我也并没有往这边想，都是现编的）</p>
<p>我认为奇车是属于那类可以堆一起一口气看完的动画，因为是剧情主导，两话之间停一段时间也发酵不出来什么除了毒奶以外的东西。由于它的连载时间和我赶毕业论文的时间重合，我实际上也是这么做的，在暑假回家的前一天晚上一口气看完了后一半的内容，感觉是相当舒畅的。整部中我很喜欢的是第四话“田中革命”，故事相对独立且演出力度到位，还是很戳我的逐渐走向没法回头的深渊的类型，所以感觉得到震撼。另外最终话月下飞车的名场面也是很不错的演出。</p>
<p><img src="04-GodzilaSingularPoint.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>哥斯拉：奇点</strong>：科幻题材的动画不算稀缺，但奇点这样的科幻确实不常见。虽然直到最后我也看得有些莫名其妙（并不是因为我数理基础不够扎实），但不可否认奇点确实是科幻点子主导且贯穿始终的硬科幻片，而不是批一层科幻皮讲别的东西的作品。这是我个人对软硬科幻的定义，我对这两者没什么偏好，但确实二次元很少见到这种定义下的硬科幻片，但奇点是一部。另外有趣的是从一些细节（尤其是专有名词的使用）可以感受出来这部作品有真的懂物理的人参与的，而不是一看就能看出来的外行借用看起来高大上的概念瞎搞，作为半个物理人在里面能看到一堆亲切的东西，属实是双厨狂喜。不过作为动画，奇点的缺点也比较明显，关键设定和概念交代得不够显著，有的到最后都没有个解释，导致理解起来很不方便，另外故事的安排上也有很多和主题没什么关系的桥段出现，就更让人摸不到重点。很多关键信息的交代是通过男女主的聊天记录给出，作为非母语者要同时处理中日文的聊天记录文字和声音（还不一样）的四个输入信息，令我极其头大。动画本就不适合表现大量的文字，希望之后能见到更合适一点的处理。最后要说的是我开始追这部番是因为想看巨大怪兽的，但哥斯拉虽然在片名里但基本没怎么出场，有怪兽的都是和机甲战斗的场面（我不太感兴趣，而且体积小得多），所以这方面来说是完全没合上我的预期，总的来说这部动画的观感在各方面都挺奇妙的。</p>
<h3 id="七月番"><a href="#七月番" class="headerlink" title="七月番"></a>七月番</h3><p><img src="07-SonnyBoy.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>Sonny Boy</strong>：从简单的画风、色彩对比强烈的背景和几乎不使用BGM等基本的方面上就能看出是一部非常独特的作品，整体上给了我很多新鲜的体验。虽然追的过程中因为一些原因存在断层，没完全跟下来故事内容（本来就不那么容易理解），但就算这样我也体会了相当的震撼了。能感受到到是一部倾注了很多心血的作品，而且也有想要表达的东西，只可惜我在第一次并没有解读出来太多东西。过后预定会再演几遍，那时会有更多可说的东西。</p>
<p><img src="07-Aquatope.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>白沙水族馆</strong>：现在比较少见的半年番，前后半的感觉不太一样，分开来说。前半段给我的感觉是安静，宁静的小城、员工没几个人的小水族馆、广阔星空下的阵阵海浪声，这些令人心安的元素一起构成了这部动画令人心安的氛围，对于那段时间焦虑得不行的我是一剂良药。虽然有着要让ガマガマ存续下去的这一名义上的主线在，但由于是严格的单元剧的形式，在实际的观感上这件事并没有能起什么影响。不过同样是因为单元剧的形式，剧情上重要转折并不比别的故事能得到更多笔墨，因此也存在表达的不够到位的问题，只不过对于看个安稳的我来说平淡一点倒也没什么影响。而到后半段，随着心成为社会人，舞台转移到银河水族馆之后，我的感觉是作品的整体氛围也发生了符合角色的经历的转变。感觉上变得更躁起来了，各种事情都是草草发生草草结束，而看着也感觉不到之前的那份宁静。不知道是剧情所致还是别的什么原因，亦或是我自己躁起来了，总之观感确实存在大的不同，也因此后半段我也只看了一般半（也和学期后段时间变少有关系），不过之后应该还是会找时间看完的。</p>
<p><img src="07-LoveliveSuperstar.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>Lovelive! SuperStar!!</strong>：并不能说得上令人满意的作品。作为拉拉第四代，可以看出星有谋求一些创新，前三话的展开和之前相比还是存在一些新意的（虽然我觉得可香cp塑造得有点强行，不过整体可以说是不错的）。但到后面就越来越回到那老一套，lovelive大赛、废校危机、一话中有半话啥也不干……属实让人审美疲劳。再加上恋的剧情实在写得莫名其妙，导致整体的观感比较拉。其中唯一让我比较惊喜的是平安名堇这个角色的塑造，在B站发过<a href="https://t.bilibili.com/578548879506623338">动态</a>说这个事，想说的都在那里。</p>
<p><img src="07-5seconds.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>见面五秒开始战斗</strong>：大概属于十年前左右的典中典，没啥可说的。看的理由是女主声优是爱美。制作肉眼可见的贫穷，不过设定和展开还算有意思，而且没有什么雷的地方，作为消磨时间看的东西可以算是比较合格。</p>
<h3 id="十月番"><a href="#十月番" class="headerlink" title="十月番"></a>十月番</h3><p><img src="10-Miko.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>看得见的女孩</strong>：见子的漫画是我之前就在看的，挺喜欢里面画的掉san的鬼和女主很害怕但还要憋着表现出来的表情。不过动画的制作我并不太满意，一个是对鬼的处理，漫画里的恐怖是jump scare式的，而动画却会在鬼出现之前渲染一段时间氛围，这就使恐怖效果打了些折扣——因为说到底作品的风格还是偏轻松的，只会突然吓一下，而提前渲染一段最后反倒会不够吓人，观感就显得不伦不类。不过漫画的静止画面的冲击放到动画上也并不容易做出来，我也想不出什么好想法。另外是动画里做了太多福利画面了，属实是看得很没意思——我想看的是这个吗？是见子被吓哭的脸啊！不过这些缺点之外原作该有的东西都做出来了，所以大体的感觉还是可以的。年末那段时间没法拿出大块时间看动画，所以反而是见子这样边吃饭边看也没问题的片看得更多，也算是理解了这些看一乐动画存在的重要性。</p>
<h3 id="剧场版动画"><a href="#剧场版动画" class="headerlink" title="剧场版动画"></a>剧场版动画</h3><p><img src="revue-starlight-rororo.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>剧场版总集篇 少女歌剧 Revue Starlight Rondo Rondo Rondo</strong>：即使作为总集篇，在rororo也可以看到一定程度的新意。把12话TV压缩到两小时的总集篇，删除了revue以外的部分使节奏变得更快，同时在revue顺序的调整使得结构更加明显，可以更明显地看出starlight的故事。虽然核心的东西还是保留TV原样，但这样的调整也是呈现了另一种新的可能性。</p>
<p><img src="revue-starlight-wild-screen-baroque.png" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>剧场版 少女歌剧 Revue Starlight</strong>：见<a href="/2022/01/03/202201-revue-starlight-gekijoban/" title="舞台少女将站上名为自己的舞台">舞台少女将站上名为自己的舞台</a>。</p>
<p><img src="violent-evergarden.webp" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>剧场版 紫罗兰永恒花园</strong>：两端没什么关联的故事拼在一起凑成了这个剧场版，但比起主线的薇尔莉特和少佐的故事却是前半段更让我动容一点。前者少佐拒绝的理由让我感觉生硬，像是强行扭出来的波折——虽然直球喂糖是容易腻，但是没有曲折还要硬扭出来就真的没必要了。</p>
<h3 id="旧番"><a href="#旧番" class="headerlink" title="旧番"></a>旧番</h3><p><img src="bandori.jpg" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>Bang Dream 第一季</strong>：寒假时闲的没事看的（因为有爱美），作为看一乐观感还是比较不错的（主要是因为爱美）。因为都是传统偶像番所以拿来和拉拉作比较，邦邦这种没什么拯救学校、大赛优胜的“大任在身”的故事相比之下就贴近现实地多，也看着更舒服一点，会让我觉得如果我有同类的经历的话那大概也就是这样的吧。毕竟观众想看的也不是这个，这些平凡又不那么平凡的日常才是真正抓人的点，这点反倒是口碑没那么好的邦邦动画更突出一点。</p>
<h2 id="漫画"><a href="#漫画" class="headerlink" title="漫画"></a>漫画</h2><p><img src="manga-kyojin.jpg" width="40%" height="40%" style="left; margin: 0 "></p>
<p><strong>进击的巨人</strong>：乐。只论作品的话其实烂尾之前倒也都挺不错，最后也仅仅是很平常的搞宏大叙事收不回来了而已，应该说的是可惜但是还行。但结合键政人浓度超标到令人智熄的讨论环境，以及完结之后键政人180反转发表怪论的现状，我就只是觉得乐了。（有时我会想这是不是一个大型行为艺术，毕竟实际上确实是提供了这么大的乐子，如果是的话我只能说谏山创我的超人）我还是会记住巨人的，作为年轻人的最后一步宏大叙事作品，现在是该告别这类题材迎接更广阔的天空了。</p>
</body></html>]]></content>
      <categories>
        <category>总结</category>
      </categories>
      <tags>
        <tag>总结</tag>
        <tag>ACG</tag>
      </tags>
  </entry>
  <entry>
    <title>2021年度总结</title>
    <url>/2022/02/08/2021-review/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>2021于我在各方面上都是变化巨大的一年，本科毕业来到上海又有了新的体验和新的要适应的生活节奏。因此毕业前后（正好是前半年和后半年）对我来说也是个很显著的转折点，在下面的段中我也会以此为界限分开来写。</p>
<h2 id="学业和科研"><a href="#学业和科研" class="headerlink" title="学业和科研"></a>学业和科研</h2><p>从妮可毕业了。前半年被叫来上海干了两个月活，毕业论文也是在上海写完的。毕业论文是半个月速成的很无聊也没啥用的东西，唯一可说的就是趁此机会稍微了解了下Fisher矩阵做引力波参数估计的数学基础。毕业前回妮可待了一个月处理答辩和毕业的一堆的事，这最后一个月和这五年一样平淡，想记录下来却不知从何处说起，也只好作罢。</p>
<p>来交大后确实感觉到博士生的工作节奏快了不少，上了半年我也没法说能完全适应了，当然也有一部分是因为20年开始的这两年都过于闲了。研究生课的量和难度都提升了一大截，选修课从功能上来讲也不是本科的打基础，而是和实际科研工作挂钩，所以不可避免有很多繁杂的东西在里面，之前一直是在打数理基础的我就不那么容易抓住内容。再加上一直有很难长时间集中注意力的毛病以及早上还爱打瞌睡，很多东西都没follow下来。科研上也是如此，组会讲文章的时候因为听不懂难以集中注意力，然后就更没法听懂，陷入这样的恶性循环。总之就是读了半年还没掌握一个博士生该掌握的能力，或许是适应不了大脑高强度运转的节奏，也可能是我根本就不适合科研，也可能两者都是。</p>
<p>差不多一整年都在做一个课题，但是还没做完。内容不是很复杂：引力波源的位置可以用于示踪大尺度结构，要做的是通过数值方法计算由探测器效应引入的各向异性。但进展属实是挺慢，原因在于我对引力波天文不够熟悉，以及一边要上课一边干活的情况下工作效率也确实不咋高，到年末那阵具体的方向才终于比较明朗。具体上我做的还只是埋头写代码跑程序，就算做完了也很难说对里面的物理能更了解一些，唯一一点成就感来源是我写代码重构代码的时候才有一点，所以这活干得也是比较难受，不知后面能不能习惯的了。</p>
<h2 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h2><p>前半年在上海快乐独居，一周去学校里旁听三天课，和老板讨论一次，其余时间因为没有工位就在租的房间里待着。这段时间和20年前半年在家独居一样，要干的活不多，听课也没什么压力，有充足时间可以用来看动画摸鱼，还可以规律作息，每周末去旁边商场买菜顺便溜达溜达，过得相当安逸。唯一不同的一点是那段时间有机会自己做饭，所以尝试节食，几乎每天都吃水煮青菜荞麦面，真的没啥味道……</p>
<p>后半年又回归宿舍生活了，宿舍、理科楼、食堂都挨得很近，所以没啥事每天都只在这一小块区域活动。好处是每天可以赖床到上课前20分钟再出门，坏处是运动量趋近于零。每天在办公室不知不觉就待到12点才回去，不只是因为活多，更主要的是吃完晚饭回来好长时间进入不了高效工作状态，导致压缩夜晚时间。回宿舍之后想放松放松却只能刷刷浪费时间的东西，每天还睡得很晚，留给自己的时间不剩多少。想一想这个压力和工作量确实和之前的情况都不一样，加上这两年又都是极其的闲，所以之前比较随意的时间管理（就是不管理）接着用就确实是比较痛苦。</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="阅读"><a href="#阅读" class="headerlink" title="阅读"></a>阅读</h3><p>读了《编写可读代码的艺术》。顾名思义，介绍的是写出好看代码的技巧和思想。我认为这种教人写规范一点的代码还是很重要的，自己摸索一段时间之后就该更系统一点的了解一下了，里面介绍的一些原则也可以作为面对比较复杂的逻辑时组织代码的参考。另外是我发现书里说的很多和我自己写代码时想的都能对上，还是比较开心的。</p>
<p>读了《数学之美》。严格的说不是2021年读的，是今年年初在回家的飞机上一口气读完的。介绍的是离我们比较近的领域（比如搜索引擎、输入法等）用到的一些机器学习算法，大致让我了解了统计机器学习的思想，见识了很多神经网络以外的机器学习，对我来说还是想当有意思的。作为科普也是相当不错的，算是我理想的那种“不卑不亢”的科普，让没有学科基础的读者能读懂的同时又不会强行用生活中的例子做不怎么相似类比或者刻意避免数学公式，而是很好地分隔开了可以简单讲出来的思想和没必要说的细节。不过要我说的话比起数学之美这本书体现的更多是技术之美，因为里面涉及的数学知识几乎都是些很基本的东西（主要是概率论），而真正有趣的如何是将它们巧妙地应用在解决实际问题上，而将我们司空见惯的理论知识应用到现实实际上是技术要干的事。</p>
<p>读了一半《Head First设计模式》。暑假期间读的，但没读完。之前仅仅是在学C++的时候了解了面向对象编程的一些基本概念和用法，并不知道有这些固定的设计模式。了解了设计模式之后虽然还没遇到要用到的场合，但对面向对象编程的了解更深了一点，对自己写的大一点的软件要怎么组织也有一些头绪了。</p>
<p>读了一半《分析哲学导论》。也是暑假期间读的，一直想要了解一点的东西。但读得比较艰难，可能是还不太适合哲学的思维模式，但想明白了这些讨论也确实是很有意思。之后有时间的话会捡起来读完。</p>
<h3 id="ACG"><a href="#ACG" class="headerlink" title="ACG"></a>ACG</h3><p>单独写在了<a href="/2022/02/07/2021-review-ACG/" title="2021年度总结——ACG部分">2021年度总结——ACG部分</a>。</p>
<h3 id="声优偶像"><a href="#声优偶像" class="headerlink" title="声优偶像"></a>声优偶像</h3><p>比20年好那么一点，21年少歌还有个完整的舞台剧#3，不过也就只有这个线下活动了。可以庆幸的是#3和前两部舞台剧不一样确实挺好看的，买配信的时候只是想久违的看看九九组，结果舞台本身也不错还有点感觉惊喜。因为#3观影还加了后来的怪话群，这对我来说也是一个非常大的收获了。另外一个重大事件就是剧场版的上映了。在剧场版BD发售之前我焦虑了半年，想看又不想被剧透，只能不看不听不搜熬到发售，但看到之后的我可以说这一切都是值得的。剧场版有多优秀无需多言，它带给了我的更是未曾体会到的满足感，这份满足让我有勇气面对自己和自己将要遇到的事情，我想这也是我从动画和偶像之中能期望的最多的了。</p>
<p>加推了爱美（作为个人），最初不是从邦邦而是从TeamY（再精确一点是翻唱夜に駆ける那个视频）开始关注的，很喜欢她极富感染力的笑容。21年歌手再出道发表的ReStarting和Mayday两首歌的歌词都很触动我，想象到作词包含自己的情感就更让我动容了（然后光速下单买了专辑）。虽然比较遗憾没d到一个她所在的企划，不过也顺势听了不少破琵琶的歌，今后还会继续关注。</p>
<h3 id="技术"><a href="#技术" class="headerlink" title="技术"></a>技术</h3><p><img src="my-github-contribution.png" alt=""></p>
<p align="center"> 今年也没赶上地铁瓷砖 </p>

<p>和上面阅读那段一样，自学了一小点开发方面的知识，对于写出漂亮一点的代码还是挺有用的。即使是写成屎也没人关心的课题的代码我也要求自己写的尽量好看，虽然这就要花不少时间重构，不过还是比较有成就感的。另外毕业前和开学中间隔了好几个月，回来看自己的代码还能看懂也是这个的功劳。</p>
<p>写了转推bot。不是什么项目，两边调接口就实现的东西，不过也是构思了一段时间，写出来之后又迭代了一两次才找到比较合适的抽象。到现在是平稳运行，而且做到了各模块相分离，以后完善功能也应该方便，多亏了面向对象。写代码这事有时还是要用些想象力的，某种程度上确实是创作。</p>
<p>学了些web编程的基础，也是一直想了解的。并为少歌剧场版观影会写了个很简陋的缴费记录系统，作为我的第一个web项目（算是机缘巧合，奇妙）。现在的状态是了解一些最基础的web三件套的东西，但现代web用的技术和框架等还完全没看过，还有待以后继续了解（肯定会继续了解的）。</p>
<p>最后是拿树莓派搭了个NAS，虽然没学到啥新技术，但是我觉得真的很酷。</p>
<h3 id="产出"><a href="#产出" class="headerlink" title="产出"></a>产出</h3><p>从MAD变成沙雕整活了，因为严肃方向的创作我确实没多少灵感。不过即使是整活也很需要能力的，自己开始做了才明白这点，构思一个好笑的视频并没有看起来那么容易，我自己的以为好活想法最后剪出来发现也只是个烂活。不过确实也有一些好活有过千播放的。发现自己有时有一点把自己或看的人逗乐的能力也是很让人高兴的一件事，虽然比我会整得多的比比皆是，但看着自己的视频可以得到回应感觉也挺不错。</p>
<h2 id="关于自己"><a href="#关于自己" class="headerlink" title="关于自己"></a>关于自己</h2><p>2021年是我的外部环境发生了很大改变的一年，但我不知道我自己有多少改变。我还是悲观消极爱焦虑，临毕业焦虑毕业论文，暑假焦虑开始读博就没得自己的时间，开学了又焦虑转行失败找不到工作——总之就是总有办法折磨自己。</p>
<p>前半年的时候倒是没想太多，独居又活不重的生活是真的舒服，一天要做的事可以刚好填满一天，不会忙到没时间放松也不会闲到成天胡思乱想。暑假期间我的情况就是后者了，虽然是最后的属于我的两个月的纯自由时间，但并没有享受的很彻底，只因为在焦虑这段时间结束了该怎么办。本来规划了很久的毕业旅行由于疫情没发出发对我来说也是一个相当大的打击，差不多半年的期待和一个月的规划在仅仅一天之内就完全泡汤，理所当然得就好像是事情本就没有第二种可能一样。因为这个我差不多之后的一个月都在自己持续发酵负面情绪，当时甚至时常会感觉我期待的东西一定因为一些原因不会得到，总之对我来说是十分糟糕的体会。</p>
<p>后半年对我来说重要的事是在少歌怪话群里被逐渐眼熟。这也是有多方面因素，如果没有写转推bot和整活让我这些在B站被群友提前认识的工作的话，我肯定是和之前加的其他群一样不敢在里面说话的，但我也知道被群友认识并不是因为我之前做的什么，而是因为对方愿意意识到我，更是因为我们被同一个东西吸引。不过我还是将其看作某种程度上是凭我自己（而不是什么随机的安排）找到并建立的关系，这是除了同好交流本身就很快乐之外这个群带给我的正面意义的东西。所以我很感谢怪话群认识的群友们，在这里我获得另外一种自信，虽然我仍然觉得自己一无是处，但是我却一定程度上可以相信即便如此我也有能力建立与他人的联系，也因此我的心态多少健康了一些，甚至连<a href="https://t.bilibili.com/616274527910426079">参与组织观影会</a>这种之前想都不敢想的事也做了。某种程度上，我大概也可以向好的方向每日进化中。</p>
<h2 id="展望"><a href="#展望" class="headerlink" title="展望"></a>展望</h2><p>去年的flag差不多都倒了（除了什么也不做就实现的那些），打上了疫苗但是也没法出国，有空了但是也没利用上多学东西……倒也可以预料到。不过该立的还是要立的，没准呢。</p>
<ul>
<li>希望手上的课题能赶紧做完，别再出新的幺蛾子了</li>
<li>希望能更擅长点时间管理，多空出来点属于自己的时间，至少留下来时间看动画</li>
<li>同上，作息更规律些，身体健康别出毛病</li>
<li>希望能更适应科研一点，虽然我应该确实不是这块料，但至少要拿到学位</li>
<li>如果上面那条没能实现，希望自己至少心态不要崩</li>
<li>如果上面那条还没能实现，希望至少能成功转硕拿个硕士学位</li>
<li>希望多学些有意思的技术，能写一些酷的东西出来</li>
<li>希望有时间让我培养点自己的人文素养</li>
<li>希望2022年也能遇到优秀的动画</li>
<li>希望少歌能有生气一点，多点活动，多发点歌，新冠少捣点乱</li>
<li>希望我推可以多接到点活</li>
<li>希望2022年也能活下去</li>
</ul>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><blockquote>
<p>飛び出そう　思い切り踏み出して　いつになっても　始まりはきらめくよ</p>
</blockquote>
<p>（网易云没版权放不了外链了，不过毫无疑问是那首歌）</p>
<p><img src="butainoue.jpg" alt=""></p>
</body></html>]]></content>
      <categories>
        <category>总结</category>
      </categories>
      <tags>
        <tag>总结</tag>
      </tags>
  </entry>
  <entry>
    <title>在HPC集群上使用VSCode Remote</title>
    <url>/2022/03/03/202203-VSC-remote-on-HPC/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>参考了<a href="https://www.cnblogs.com/shiyanhe/p/15263183.html">这篇文章</a>。</p>
<p>系里的服务器是HPC集群，平时用服务器都是在本地测试好后用git把代码同步上去，在上面提交大运算量的任务跑，跑完再把结果文件下载回本地处理。但随着数据量变大，这样做的时空成本都逐渐让人难以承受，因此存在在服务器上就地处理数据的需求。能通过ssh直接连接到的是服务器的登录节点，但较大计算量的任务不宜在登录节点上跑，因此需要转发ssh流量到计算节点上。</p>
<p>我这里使用XShell作为ssh终端。首先登录到登录节点上，提交一个交互式任务</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line">qsub -<span class="selector-tag">I</span> -<span class="selector-tag">q</span> debug</span><br></pre></td></tr></tbody></table></figure>
<p>（<code>-q debug</code>表示提交到<code>debug</code>队列）这条命令会打开计算节点的终端，此时可以发现终端已经显示出了计算节点的名字：</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="string">[xxx@gr36 ~]</span>$</span><br></pre></td></tr></tbody></table></figure>
<p>这里就是连接上了<code>gr36</code>节点。或者也可以查看<code>$HOSTNAME</code>环境变量得到节点名。</p>
<p>连接到计算节点后，保持当前窗口不要关闭，再创建一个新的XShell会话，在连接-SSH-隧道按如下方式新建一条转发规则</p>
<p><img src="xshell-tunnel.png" alt=""></p>
<p>目标主机是计算节点的主机名的22号端口（因为VSCode Remote使用ssh连接），源主机是localhost，端口号可以任意设，这里设成8888号。创建好后连接到登录节点即可。此时访问本机的8888号端口的ssh流量就被转发到计算节点上。再在本机的<code>~/.ssh/config</code>文件中添加如下的项（和连接登录节点的身份认证部分一致，只是主机和端口设成上面在本机监听的端口），VSCode Remote就可以直接在计算节点上运行了。</p>
<figure class="highlight gradle"><table><tbody><tr><td class="code"><pre><span class="line">Host HPCNode</span><br><span class="line">  HostName localhost</span><br><span class="line">  Port <span class="number">8888</span></span><br><span class="line">  User xxx</span><br><span class="line">  IdentityFile <span class="regexp">/path/</span>to<span class="regexp">/identity/</span><span class="keyword">file</span></span><br></pre></td></tr></tbody></table></figure>
<p>需要注意的是断开后再次提交交互式任务可能会分配到不同的计算节点，不同节点的ssh指纹不同，因此会导致连接失败。解决方法就是每次重新连接前到<code>~/.ssh/known_hosts</code>文件中删除<code>localhost:8888</code>的那一项即可。</p>
</body></html>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>惊恐</title>
    <url>/2022/05/22/202205-shanghai-lockdown/</url>
    <content><![CDATA[<html><head></head><body></body></html><html><head></head><body><p>这几个月来对我唯一有意义的日期就是2022年3月9日，我时常会去计算当下距这一天已经有多少时间就这么过去了，想起这件事的频率越高，时间在我眼里过得就越慢。只是我实在不擅长算数，于是得到的也只是几个月或者几个月半，所幸时间实际上还是连续地流动，这才使得我并不是要等到数到第三个月的时候就有机会逃离出去。如今我有幸坐在阔别已久的家中而不是在集中隔离的方舱里吸甲醛，眼前熟悉又陌生的景象和过去74天清晰又模糊的记忆在我脑中争相宣称对方是不真实的幻梦。我的理智倾向于认为两者都不是，于是趁记忆还没彻底成为虚幻之前，我试图将其记录下来。</p>
<p>其实某些时候我可以说我的记性并不差。我还很清楚地记得3月9日通知封校的那天早上的慌乱，当时我跑到教学楼的售货机那里才买到几盒饼干和蛋糕，瞎跑一上午后倒是最后赶着在食堂吃了顿安稳饭。记得封楼期间对现状的悲观和迷茫，但即使是那时也没有料到会持续如此长时间。校内解封并略微恢复后产生的一点希望又很快消磨殆尽。接着是称不上等待的等待，因为并没有在等的意识，只是在旁边沉默着看着时间流动。这端时期的结尾倒是显得仓促，学校宣布赶人信息，偶然在群里看到出票的消息，不假思索地点进去买票，到办手续出发回家，只用了短短两天时间快得让人不可思议。</p>
<p>如果要选一个词概括这段时间的状态，我会选的是“惊恐”。无论慌乱还是平静，悲伤还是麻木，我一直处于这样的惊恐之下，它弥漫在现实的背景之中，使得我的所有注意力不得不聚焦于源源不断产生这惊恐的现状之上，如果我还有能力聚焦什么的话。异常不仅仅是突然出现打破了日常，甚至还挤掉了日常的位置成为新的日常。在日常中我有欲望，被达成时快乐，不被达成则痛苦；而在异常中我只剩下回到往日的日常的幻想，这甚至都不能称之为一个像样的欲望，因此我不感觉到快乐或痛苦，只是麻木。即使是痛苦也好过麻木，因为痛苦强调了我作为感受痛苦的主体的存在，而当我什么东西也感受不到时也同样没法确信自己的存在。或许可以通过不接受现状来防止陷入这样的麻木，但已成为日常的异常无处可避，不得不去适应，因此也不可能说服自己不接受。又或许也可以彻底地接受现状而不去再做梦想什么过去的日常，但我终究也没法做到这样，大概也就是没法放弃做梦。</p>
<p>于是我又不得不反复看向所面对的现状。我并不会说感受到了世界的恶意什么的，事实上我们这里各方面大概可以称得上无可厚非，而相比外面的乱象，在学校里吃喝不愁都值得庆幸了。世界并不特意为我准备那么多恶意，世界只是无动于衷。要认识到付出就一定有回报的观点有多天真也不需要被关起来两个多月，但随着时间流逝却也总会期待自己被破坏的生活能换来点什么。但平稳的感染数字否认这一点。望不到头是因为本就没有头可望，我们能期待的最多只是概率涨落的眷顾，我无法说服自己不这么想。</p>
<p>这段时间的负面情绪带来的影响最后终究会消散（但愿如此），但这样的看法的影响大概会是长期的。我之前是在机会来临时也要前思后想一段时间的，除了说是瞻前顾后的性格使然也可以说是潜意识的一种不怕错过的余裕。这种余裕存在所依赖的则是某种稳固的东西存在，而在瞬息万变，抓不到确定性的世界中这样的余裕就是一种奢侈。我想我大概理解了生存狂的想法。或许某种程度上我应该成为一个生存狂。</p>
<p>如果非要找一个好的影响的话也是找得到的。这几个月——事实上是从二月份开学以来——我一直没剪头发，不是因为剪不了，而只是想顺便多留长一点。现在也准备继续留着，以后没准可以扎个小辫或者丸子头或者双马尾啥的。我真的挺喜欢头发的。</p>
</body></html>]]></content>
      <categories>
        <category>随想</category>
      </categories>
      <tags>
        <tag>随想</tag>
      </tags>
  </entry>
</search>
